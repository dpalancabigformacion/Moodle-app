(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{uFKL:function(n,e,t){"use strict";t.r(e),t.d(e,"CoreLoginSitePageModule",(function(){return V}));var i=t("tyNb"),o=t("L3Fv"),c=t("mrSG"),r=t("nvXB"),a=t("BBqZ"),l=t("9+EE"),s=t("bFG1"),g=t("3LXp"),_=t("mv9v"),d=t("kxYv"),m=t("93ts"),u=t("BaYo"),h=t("j3ag"),p=t("oZnq"),f=t("mvS9"),C=t("JpIC"),P=t("m2Ry"),O=t("pHTc"),M=t("y9BN"),S=t("vuGA"),b=t("4reR"),v=t("fXoL"),L=t("3Pt+"),y=t("TEn/"),x=t("ACYt"),w=t("3CSS"),E=t("nt/U"),T=t("ofXK"),k=t("6uVz"),D=t("sYmb");const I=["siteFormEl"];function CoreLoginSitePage_form_17_ng_container_2_Template(n,e){if(1&n&&(v.Cc(0),v.Ec(1,"ion-item"),v.Ec(2,"ion-label",15),v.Ec(3,"h2"),v.pd(4),v.Pc(5,"translate"),v.Dc(),v.Dc(),v.zc(6,"ion-input",16),v.Pc(7,"translate"),v.Dc(),v.Bc()),2&n){const n=v.Oc(2);v.lc(4),v.qd(v.Qc(5,3,"core.login.siteaddress")),v.lc(2),v.Wc("placeholder",v.Qc(7,5,"core.login.siteaddressplaceholder")),v.Vc("core-auto-focus",n.showKeyboard&&!n.showScanQR)}}function CoreLoginSitePage_form_17_ng_container_3_ion_item_14_Template(n,e){if(1&n){const n=v.Fc();v.Ec(0,"ion-item",27),v.Mc("click",(function CoreLoginSitePage_form_17_ng_container_3_ion_item_14_Template_ion_item_click_0_listener(e){v.fd(n);const t=v.Oc(3);return t.connect(e,t.enteredSiteUrl.url)})),v.Pc(1,"translate"),v.Ec(2,"ion-thumbnail",28),v.zc(3,"ion-icon",29),v.Dc(),v.Ec(4,"ion-label"),v.Ec(5,"h2",30),v.pd(6),v.Pc(7,"translate"),v.Dc(),v.Ec(8,"p"),v.pd(9),v.Dc(),v.Dc(),v.Dc()}if(2&n){const n=v.Oc(3);v.mc("aria-label",v.Qc(1,3,"core.login.connect")),v.lc(6),v.qd(v.Qc(7,5,"core.login.yourenteredsite")),v.lc(3),v.qd(n.enteredSiteUrl.noProtocolUrl)}}function CoreLoginSitePage_form_17_ng_container_3_div_16_Template(n,e){1&n&&(v.Ec(0,"div",31),v.zc(1,"ion-spinner"),v.Pc(2,"translate"),v.Dc()),2&n&&(v.lc(1),v.mc("aria-label",v.Qc(2,1,"core.loading")))}function CoreLoginSitePage_form_17_ng_container_3_ng_container_17_ng_container_1_Template(n,e){1&n&&v.Ac(0)}const _c1=function(n){return{site:n}};function CoreLoginSitePage_form_17_ng_container_3_ng_container_17_Template(n,e){if(1&n&&(v.Cc(0),v.nd(1,CoreLoginSitePage_form_17_ng_container_3_ng_container_17_ng_container_1_Template,1,0,"ng-container",32),v.Bc()),2&n){const n=e.$implicit;v.Oc(3);const t=v.ed(24);v.lc(1),v.Vc("ngTemplateOutlet",t)("ngTemplateOutletContext",v.ad(2,_c1,n))}}function CoreLoginSitePage_form_17_ng_container_3_div_18_Template(n,e){1&n&&(v.Ec(0,"div",33),v.zc(1,"ion-spinner"),v.Pc(2,"translate"),v.Dc()),2&n&&(v.lc(1),v.mc("aria-label",v.Qc(2,1,"core.loading")))}function CoreLoginSitePage_form_17_ng_container_3_Template(n,e){if(1&n){const n=v.Fc();v.Cc(0),v.Ec(1,"ion-item"),v.Ec(2,"ion-label",17),v.Ec(3,"h2"),v.pd(4),v.Pc(5,"translate"),v.Dc(),v.Dc(),v.Ec(6,"ion-input",18),v.Mc("ionChange",(function CoreLoginSitePage_form_17_ng_container_3_Template_ion_input_ionChange_6_listener(e){v.fd(n);const t=v.Oc(2);return t.searchSite(e,t.siteForm.value.siteUrl)})),v.Pc(7,"translate"),v.Dc(),v.Dc(),v.Ec(8,"ion-list",19),v.Ec(9,"ion-item",20),v.Ec(10,"ion-label"),v.Ec(11,"h2",21),v.pd(12),v.Pc(13,"translate"),v.Dc(),v.Dc(),v.Dc(),v.nd(14,CoreLoginSitePage_form_17_ng_container_3_ion_item_14_Template,10,7,"ion-item",22),v.Ec(15,"div",23),v.nd(16,CoreLoginSitePage_form_17_ng_container_3_div_16_Template,3,3,"div",24),v.nd(17,CoreLoginSitePage_form_17_ng_container_3_ng_container_17_Template,2,4,"ng-container",25),v.Dc(),v.Dc(),v.nd(18,CoreLoginSitePage_form_17_ng_container_3_div_18_Template,3,3,"div",26),v.Bc()}if(2&n){const n=v.Oc(2);v.lc(4),v.qd(v.Qc(5,14,"core.login.siteaddress")),v.lc(2),v.Wc("placeholder",v.Qc(7,16,"core.login.siteaddressplaceholder")),v.Vc("core-auto-focus",n.showKeyboard&&!n.showScanQR),v.lc(2),v.qc("hidden",!n.hasSites&&!n.enteredSiteUrl),v.lc(4),v.qd(v.Qc(13,18,"core.login.selectsite")),v.lc(2),v.Vc("ngIf",n.enteredSiteUrl),v.lc(1),v.qc("hidden",!n.hasSites)("dimmed",n.loadingSites),v.lc(1),v.Vc("ngIf",n.loadingSites),v.lc(1),v.Vc("ngForOf",n.sites),v.lc(1),v.Vc("ngIf",!n.hasSites&&n.loadingSites)}}function CoreLoginSitePage_form_17_ion_item_4_Template(n,e){if(1&n&&(v.Ec(0,"ion-item"),v.Ec(1,"ion-label"),v.Ec(2,"ion-button",34),v.pd(3),v.Pc(4,"translate"),v.Dc(),v.Dc(),v.Dc()),2&n){const n=v.Oc(2);v.lc(2),v.Vc("disabled",!n.siteForm.valid),v.lc(1),v.rd(" ",v.Qc(4,2,"core.login.connect")," ")}}function CoreLoginSitePage_form_17_Template(n,e){if(1&n){const n=v.Fc();v.Ec(0,"form",13,14),v.Mc("ngSubmit",(function CoreLoginSitePage_form_17_Template_form_ngSubmit_0_listener(e){v.fd(n);const t=v.Oc();return t.connect(e,t.siteForm.value.siteUrl)})),v.nd(2,CoreLoginSitePage_form_17_ng_container_2_Template,8,7,"ng-container",10),v.nd(3,CoreLoginSitePage_form_17_ng_container_3_Template,19,20,"ng-container",10),v.nd(4,CoreLoginSitePage_form_17_ion_item_4_Template,5,4,"ion-item",10),v.Dc()}if(2&n){const n=v.Oc();v.Vc("formGroup",n.siteForm),v.lc(2),v.Vc("ngIf","url"==n.siteSelector),v.lc(1),v.Vc("ngIf","url"!=n.siteSelector),v.lc(1),v.Vc("ngIf","url"==n.siteSelector)}}function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template(n,e){if(1&n){const n=v.Fc();v.Ec(0,"ion-searchbar",36),v.Mc("ngModelChange",(function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ngModelChange_0_listener(e){v.fd(n);return v.Oc(3).filter=e}))("ionInput",(function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ionInput_0_listener(e){v.fd(n);return v.Oc(3).filterChanged(e)}))("ionCancel",(function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ionCancel_0_listener(){v.fd(n);return v.Oc(3).filterChanged()})),v.Pc(1,"translate"),v.Dc()}if(2&n){const n=v.Oc(3);v.Vc("ngModel",n.filter)("placeholder",v.Qc(1,2,"core.login.findyoursite"))}}function CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_ng_container_1_Template(n,e){1&n&&v.Ac(0)}function CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_Template(n,e){if(1&n&&(v.Cc(0),v.nd(1,CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_ng_container_1_Template,1,0,"ng-container",32),v.Bc()),2&n){const n=e.$implicit;v.Oc(3);const t=v.ed(24);v.lc(1),v.Vc("ngTemplateOutlet",t)("ngTemplateOutletContext",v.ad(2,_c1,n))}}function CoreLoginSitePage_ng_container_18_ion_list_1_Template(n,e){if(1&n&&(v.Ec(0,"ion-list"),v.Ec(1,"ion-item"),v.Ec(2,"ion-label"),v.Ec(3,"h2",21),v.pd(4),v.Pc(5,"translate"),v.Dc(),v.Dc(),v.Dc(),v.nd(6,CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template,2,4,"ion-searchbar",35),v.nd(7,CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_Template,2,4,"ng-container",25),v.Dc()),2&n){const n=v.Oc(2);v.lc(4),v.qd(v.Qc(5,3,"core.login.selectsite")),v.lc(2),v.Vc("ngIf",n.fixedSites.length>4),v.lc(1),v.Vc("ngForOf",n.filteredSites)}}function CoreLoginSitePage_ng_container_18_Template(n,e){if(1&n&&(v.Cc(0),v.nd(1,CoreLoginSitePage_ng_container_18_ion_list_1_Template,8,5,"ion-list",10),v.Bc()),2&n){const n=v.Oc();v.lc(1),v.Vc("ngIf","list"==n.siteSelector)}}function CoreLoginSitePage_ng_container_19_Template(n,e){if(1&n){const n=v.Fc();v.Cc(0),v.Ec(1,"div",37),v.pd(2),v.Pc(3,"translate"),v.Dc(),v.Ec(4,"ion-button",38),v.Mc("click",(function CoreLoginSitePage_ng_container_19_Template_ion_button_click_4_listener(){v.fd(n);return v.Oc().showInstructionsAndScanQR()})),v.zc(5,"ion-icon",39),v.pd(6),v.Pc(7,"translate"),v.Dc(),v.Bc()}2&n&&(v.lc(2),v.qd(v.Qc(3,2,"core.login.or")),v.lc(4),v.rd(" ",v.Qc(7,4,"core.scanqr")," "))}function CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_1_Template(n,e){if(1&n&&v.zc(0,"img",45),2&n){const n=v.Oc(2).site;v.Vc("src",n.imageurl,v.id)}}function CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_2_Template(n,e){1&n&&v.zc(0,"img",46)}function CoreLoginSitePage_ng_template_23_ion_thumbnail_1_Template(n,e){if(1&n&&(v.Ec(0,"ion-thumbnail",0),v.nd(1,CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_1_Template,1,1,"img",43),v.nd(2,CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_2_Template,1,0,"img",44),v.Dc()),2&n){const n=v.Oc().site;v.lc(1),v.Vc("ngIf",n.imageurl),v.lc(1),v.Vc("ngIf",!n.imageurl)}}function CoreLoginSitePage_ng_template_23_p_3_Template(n,e){if(1&n&&(v.Ec(0,"p",47),v.pd(1),v.Dc()),2&n){const n=v.Oc().site;v.lc(1),v.qd(n.title)}}function CoreLoginSitePage_ng_template_23_p_4_Template(n,e){if(1&n&&(v.Ec(0,"p"),v.pd(1),v.Dc()),2&n){const n=v.Oc().site;v.lc(1),v.qd(n.noProtocolUrl)}}function CoreLoginSitePage_ng_template_23_p_5_Template(n,e){if(1&n&&(v.Ec(0,"p"),v.pd(1),v.Dc()),2&n){const n=v.Oc().site;v.lc(1),v.qd(n.location)}}function CoreLoginSitePage_ng_template_23_Template(n,e){if(1&n){const n=v.Fc();v.Ec(0,"ion-item",40),v.Mc("click",(function CoreLoginSitePage_ng_template_23_Template_ion_item_click_0_listener(t){v.fd(n);const i=e.site;return v.Oc().connect(t,i.url,i)})),v.nd(1,CoreLoginSitePage_ng_template_23_ion_thumbnail_1_Template,3,2,"ion-thumbnail",41),v.Ec(2,"ion-label"),v.nd(3,CoreLoginSitePage_ng_template_23_p_3_Template,2,1,"p",42),v.nd(4,CoreLoginSitePage_ng_template_23_p_4_Template,2,1,"p",10),v.nd(5,CoreLoginSitePage_ng_template_23_p_5_Template,2,1,"p",10),v.Dc(),v.Dc()}if(2&n){const n=e.site,t=v.Oc();v.mc("aria-label",n.name),v.lc(1),v.Vc("ngIf",t.siteFinderSettings.displayimage),v.lc(2),v.Vc("ngIf",n.title),v.lc(1),v.Vc("ngIf",n.noProtocolUrl),v.lc(1),v.Vc("ngIf",n.location)}}let U=(()=>{class CoreLoginSitePage{constructor(n){this.formBuilder=n,this.siteSelector="sitefinder",this.showKeyboard=!1,this.filter="",this.sites=[],this.hasSites=!1,this.loadingSites=!1;let e="";this.siteSelector=u.a.CONFIG.multisitesdisplay;this.siteFinderSettings=Object.assign({displaysitename:!0,displayimage:!0,displayalias:!0,displaycity:!0,displaycountry:!0,displayurl:!0},u.a.CONFIG.sitefindersettings||{}),_.a.hasSeveralFixedSites()?e=this.initSiteSelector():u.a.CONFIG.enableonboarding&&!r.a.isIOS()&&this.initOnboarding(),this.showScanQR=_.a.displayQRInSiteScreen(),this.siteForm=this.formBuilder.group({siteUrl:[e,this.moodleUrlValidator()]}),this.searchFunction=s.a.debounce((n=>Object(c.a)(this,void 0,void 0,(function*(){if((n=n.trim()).length>=3){const e=yield l.b.findSites(n);this.sites=this.extendCoreLoginSiteInfo(e),this.hasSites=!!this.sites.length}else this.hasSites=!1;this.loadingSites=!1}))),1e3)}ngOnInit(){this.showKeyboard=!!O.a.getRouteBooleanParam("showKeyboard")}initSiteSelector(){return this.fixedSites=this.extendCoreLoginSiteInfo(_.a.getFixedSites()),this.siteSelector="list",this.fixedSites.some((n=>!!n.imageurl))||(this.siteFinderSettings.displayimage=!1),this.filteredSites=this.fixedSites,this.fixedSites[0].url}initOnboarding(){return Object(c.a)(this,void 0,void 0,(function*(){(yield a.a.get(_.b.ONBOARDING_DONE,!1))||this.showOnboarding()}))}extendCoreLoginSiteInfo(n){return n.map((n=>{n.noProtocolUrl=this.siteFinderSettings.displayurl&&n.url?p.a.removeProtocol(n.url):"";const e=this.siteFinderSettings.displaysitename?n.name:"",t=this.siteFinderSettings.displayalias&&n.alias?n.alias:"";n.title=e&&t?e+" ("+t+")":e+t;const i=this.siteFinderSettings.displaycountry&&n.countrycode?s.a.getCountryName(n.countrycode):"",o=this.siteFinderSettings.displaycity&&n.city?n.city:"";return n.location=o&&i?o+" - "+i:o+i,n}))}moodleUrlValidator(){return n=>{const e=n.value.trim();let t=e.length>=3&&p.a.isValidMoodleUrl(e);if(!t){!!l.b.getDemoSiteData(e)&&(t=!0)}return t?null:{siteUrl:{value:n.value}}}}showHelp(){return Object(c.a)(this,void 0,void 0,(function*(){yield g.a.openModal({component:C.a,cssClass:"core-modal-fullscreen"})}))}showOnboarding(){return Object(c.a)(this,void 0,void 0,(function*(){yield g.a.openModal({component:P.a,cssClass:"core-modal-fullscreen"})}))}connect(n,e,t){return Object(c.a)(this,void 0,void 0,(function*(){if(n.preventDefault(),n.stopPropagation(),r.a.closeKeyboard(),!e)return g.a.showErrorModal("core.login.siteurlrequired",!0),void 0;if(!r.a.isOnline())return g.a.showErrorModal("core.networkerrormsg",!0),void 0;if((e=e.trim()).match(/^(https?:\/\/)?campus\.example\.edu/))return this.showLoginIssue(null,new m.a(h.M.instant("core.login.errorexampleurl"))),void 0;const i=l.b.getDemoSiteData(e);if(i)yield this.loginDemoSite(i);else{const n=yield g.a.showModalLoading();let i;try{i=yield l.b.checkSite(e)}catch(t){const o=p.a.guessMoodleDomain(e);if(!o||o==e)return n.dismiss(),this.showLoginIssue(e,t);try{i=yield l.b.checkSite(o)}catch(i){return n.dismiss(),this.showLoginIssue(e,t||i)}}yield this.login(i,t),n.dismiss()}}))}loginDemoSite(n){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield g.a.showModalLoading();try{const t=yield l.b.getUserToken(n.url,n.username,n.password);return yield l.b.newSite(t.siteUrl,t.token,t.privateToken),b.a.triggerFormSubmittedEvent(this.formElement,!0),yield O.a.navigateToSiteHome(),void 0}catch(e){_.a.treatUserTokenError(n.url,e,n.username,n.password),e.loggedout&&O.a.navigate("/login/sites",{reset:!0})}finally{e.dismiss()}}))}login(n,e){var t;return Object(c.a)(this,void 0,void 0,(function*(){try{if(yield l.b.checkApplication(n.config),b.a.triggerFormSubmittedEvent(this.formElement,!0),_.a.isSSOLoginNeeded(n.code))_.a.confirmAndOpenBrowserForSSOLogin(n.siteUrl,n.code,n.service,null===(t=n.config)||void 0===t?void 0:t.launchurl);else{const t={siteUrl:n.siteUrl,siteConfig:n.config};e&&!this.fixedSites&&(t.siteName=e.name,t.logoUrl=e.imageurl),O.a.navigate("/login/credentials",{params:t})}}catch(n){}}))}showLoginIssue(n,e){let t=g.a.getErrorMessage(e);if(t==h.M.instant("core.cannotconnecttrouble")){this.sites.find((e=>e.url==n))||(t+=" "+h.M.instant("core.cannotconnectverify"))}let i="<p>"+t+"</p>";if(n){i+='<p padding><a href="'+(f.a.isAbsoluteURL(n)?n:"https://"+n)+'" core-link>'+n+"</a></p>"}const o=[{text:h.M.instant("core.needhelp"),cssClass:"core-login-need-help",handler:()=>{this.showHelp()}},{text:h.M.instant("core.tryagain"),role:"cancel"}];g.a.showAlertWithOptions({header:h.M.instant("core.cannotconnect",{$a:d.a.MINIMUM_MOODLE_VERSION}),message:i,buttons:o})}filterChanged(n){var e;const t=null===(e=null==n?void 0:n.target.value)||void 0===e?void 0:e.trim().toLowerCase();this.filteredSites=t&&this.fixedSites?this.fixedSites.filter((n=>n.title.toLowerCase().indexOf(t)>-1||n.noProtocolUrl.toLowerCase().indexOf(t)>-1||n.location.toLowerCase().indexOf(t)>-1)):this.fixedSites}searchSite(n,e){this.loadingSites=!0,e=e.trim(),this.enteredSiteUrl=this.siteForm.valid&&e.length>=3?{url:e,name:"connect",title:"",location:"",noProtocolUrl:p.a.removeProtocol(e)}:void 0,this.searchFunction(e.trim())}showInstructionsAndScanQR(){return Object(c.a)(this,void 0,void 0,(function*(){try{yield _.a.showScanQRInstructions(),yield this.scanQR()}catch(n){}}))}scanQR(){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield s.a.scanQR();if(!n)return;if(M.a.isCustomURL(n)){try{yield M.a.handleCustomURL(n)}catch(e){e&&e.data&&e.data.isAuthenticationURL&&e.data.siteUrl?this.treatErrorInAuthenticationCustomURL(n,e):M.a.treatHandleCustomURLError(e)}return}const e=f.a.getUrlProtocol(n);if(e&&"http"!=e&&"https"!=e)return g.a.showErrorModal(h.M.instant("core.errorurlschemeinvalidscheme",{$a:n})),void 0;(yield _.a.isSiteUrlAllowed(n))?(this.siteForm.controls.siteUrl.setValue(n),this.connect(new Event("click"),n)):g.a.showErrorModal("core.errorurlschemeinvalidsite",!0)}))}treatErrorInAuthenticationCustomURL(n,e){var t;return Object(c.a)(this,void 0,void 0,(function*(){const n=(null===(t=e.data)||void 0===t?void 0:t.siteUrl)||"",i=yield g.a.showModalLoading();this.siteForm.controls.siteUrl.setValue(n);try{const e=yield l.b.checkSite(n);yield l.b.checkApplication(e.config),_.a.isSSOLoginNeeded(e.code)||(yield O.a.navigate("/login/credentials",{params:{siteUrl:e.siteUrl,siteConfig:e.config}}))}catch(n){}finally{i.dismiss()}e.error=S.a.addTextToError(e.error,"<br><br>"+h.M.instant("core.login.youcanstillconnectwithcredentials")),M.a.treatHandleCustomURLError(e)}))}openSettings(){O.a.navigate("/settings")}}return CoreLoginSitePage.ɵfac=function CoreLoginSitePage_Factory(n){return new(n||CoreLoginSitePage)(v.yc(L.f))},CoreLoginSitePage.ɵcmp=v.sc({type:CoreLoginSitePage,selectors:[["page-core-login-site"]],viewQuery:function CoreLoginSitePage_Query(n,e){var t;(1&n&&v.ud(I,!0),2&n)&&(v.dd(t=v.Nc())&&(e.formElement=t.first))},decls:25,vars:17,consts:[["slot","start"],[3,"text"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","fas-cog","aria-hidden","true"],[1,"ion-padding"],[1,"list-item-limited-width"],[1,"ion-text-center","ion-padding","ion-margin-bottom","core-login-site-logo"],["src","assets/img/login_logo.png","role","presentation","alt","",1,"avatar-full","login-logo"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["aria-haspopup","dialog","expand","block","fill","clear",1,"ion-margin-top","core-login-need-help","core-button-as-link","ion-text-wrap",3,"click"],["sitelisting",""],[3,"formGroup","ngSubmit"],["siteFormEl",""],["position"," stacked"],["name","url","type","url","formControlName","siteUrl",3,"placeholder","core-auto-focus"],["position","stacked"],["name","url","formControlName","siteUrl",3,"placeholder","core-auto-focus","ionChange"],[1,"core-login-site-list"],[1,"core-login-site-list-title"],[1,"item-heading"],["button","","detail","true","class","core-login-entered-site",3,"click",4,"ngIf"],[1,"core-login-site-list-found"],["class","core-login-site-list-loading",4,"ngIf"],[4,"ngFor","ngForOf"],["class","core-login-site-nolist-loading",4,"ngIf"],["button","","detail","true",1,"core-login-entered-site",3,"click"],["slot","start","aria-hidden","true"],["name","fas-pen","aria-hidden","true"],[1,"ion-text-wrap"],[1,"core-login-site-list-loading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"core-login-site-nolist-loading"],["expand","block","type","submit",1,"ion-text-wrap",3,"disabled"],[3,"ngModel","placeholder","ngModelChange","ionInput","ionCancel",4,"ngIf"],[3,"ngModel","placeholder","ngModelChange","ionInput","ionCancel"],[1,"ion-text-center","ion-padding","ion-margin-top"],["expand","block","fill","outline","aria-haspopup","dialog",1,"ion-margin",3,"click"],["slot","start","name","fas-qrcode","aria-hidden","true"],["button","","detail","true",3,"click"],["slot","start",4,"ngIf"],["class","item-heading ion-text-wrap",4,"ngIf"],["onError","this.src='assets/icon/icon.png'","alt","","role","presentation",3,"src",4,"ngIf"],["src","assets/icon/icon.png","class","core-login-default-icon","alt","","role","presentation",4,"ngIf"],["onError","this.src='assets/icon/icon.png'","alt","","role","presentation",3,"src"],["src","assets/icon/icon.png","alt","","role","presentation",1,"core-login-default-icon"],[1,"item-heading","ion-text-wrap"]],template:function CoreLoginSitePage_Template(n,e){1&n&&(v.Ec(0,"ion-header"),v.Ec(1,"ion-toolbar"),v.Ec(2,"ion-buttons",0),v.zc(3,"ion-back-button",1),v.Pc(4,"translate"),v.Dc(),v.Ec(5,"ion-title"),v.Ec(6,"h1"),v.pd(7),v.Pc(8,"translate"),v.Dc(),v.Dc(),v.Ec(9,"ion-buttons",2),v.Ec(10,"ion-button",3),v.Mc("click",(function CoreLoginSitePage_Template_ion_button_click_10_listener(){return e.openSettings()})),v.Pc(11,"translate"),v.zc(12,"ion-icon",4),v.Dc(),v.Dc(),v.Dc(),v.Dc(),v.Ec(13,"ion-content",5),v.Ec(14,"div",6),v.Ec(15,"div",7),v.zc(16,"img",8),v.Dc(),v.nd(17,CoreLoginSitePage_form_17_Template,5,4,"form",9),v.nd(18,CoreLoginSitePage_ng_container_18_Template,2,1,"ng-container",10),v.nd(19,CoreLoginSitePage_ng_container_19_Template,8,6,"ng-container",10),v.Ec(20,"ion-button",11),v.Mc("click",(function CoreLoginSitePage_Template_ion_button_click_20_listener(){return e.showHelp()})),v.pd(21),v.Pc(22,"translate"),v.Dc(),v.Dc(),v.Dc(),v.nd(23,CoreLoginSitePage_ng_template_23_Template,6,5,"ng-template",null,12,v.od)),2&n&&(v.lc(3),v.Vc("text",v.Qc(4,9,"core.back")),v.lc(4),v.qd(v.Qc(8,11,"core.login.connecttomoodle")),v.lc(3),v.mc("aria-label",v.Qc(11,13,"core.settings.appsettings")),v.lc(5),v.qc("hidden",e.hasSites||e.enteredSiteUrl),v.lc(2),v.Vc("ngIf",!e.fixedSites),v.lc(1),v.Vc("ngIf",e.fixedSites),v.lc(1),v.Vc("ngIf",e.showScanQR&&!e.hasSites&&!e.enteredSiteUrl),v.lc(2),v.rd(" ",v.Qc(22,15,"core.needhelp")," "))},directives:[y.C,y.Ab,y.m,y.h,y.i,y.yb,x.a,y.l,y.D,w.a,E.a,y.v,T.t,L.H,L.s,L.k,y.I,y.O,y.H,y.Pb,L.r,L.i,k.a,y.P,T.s,y.xb,y.qb,T.A,y.ib,L.u],pipes:[D.d],styles:["[_nghost-%COMP%]{--list-item-max-width:600px}.item-input[_ngcontent-%COMP%]:last-child{margin-bottom:20px}.item.core-login-need-help[_ngcontent-%COMP%]{margin-top:16px}.item.core-login-site-qrcode[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border-bottom:0}.core-login-site-connect[_ngcontent-%COMP%]{margin-top:1.4rem}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{min-width:50px;min-height:50px;width:50px;height:50px;border-radius:20%;box-shadow:0 0 4px var(--gray-200);text-align:center;overflow:hidden}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px;max-width:-webkit-fit-content;max-width:fit-content;width:auto;height:auto;margin:0 auto 0 50%;transform:translate3d(-50%,0,0);object-fit:cover;object-position:50% 50%}[dir=rtl][_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate3d(calc(-1 * -50%),0,0)}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 auto;font-size:35px;height:50px}[dir=rtl][_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:0;margin-right:50%}.core-login-site-list[_ngcontent-%COMP%], .core-login-site-list-found[_ngcontent-%COMP%], .core-login-site-logo[_ngcontent-%COMP%]{transition-delay:0s;visibility:visible;opacity:1;transition:all .7s ease-in-out;max-height:9999px}.core-login-site-list-found.hidden[_ngcontent-%COMP%], .core-login-site-list.hidden[_ngcontent-%COMP%], .core-login-site-logo.hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;margin-top:0;margin-bottom:0;padding:0;max-height:0}.core-login-site-list-found.dimmed[_ngcontent-%COMP%]{pointer-events:none;position:relative}.core-login-site-list-loading[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;display:flex;align-content:center;align-items:center;background-color:hsla(0,0%,100%,.5);z-index:1}.core-login-site-list-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto}.core-login-site-nolist-loading[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.item.core-login-site-list-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .item.core-login-site-list-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2.item-heading[_ngcontent-%COMP%]{margin-top:0}@media (min-width:768px){ion-content[_ngcontent-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]{margin-top:20%}ion-content[_ngcontent-%COMP%]   .core-login-site-logo.hidden[_ngcontent-%COMP%]{margin-top:0}}.core-login-entered-site[_ngcontent-%COMP%]{background-color:var(--light)}.core-login-entered-site[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{box-shadow:0 0 4px var(--gray-300)}.core-login-default-icon[_ngcontent-%COMP%]{filter:grayscale(100%)}","[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{--background:var(--core-login-background);--ion-item-background:var(--core-login-background)}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{--color:var(--core-login-text-color)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .core-oauth-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color)}[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%]{--color:var(--core-login-text-color);-webkit-text-decoration-color:var(--core-login-text-color);text-decoration-color:var(--core-login-text-color)}[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--core-login-text-color)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .item.item-input[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.ios[_ngcontent-%COMP%]{--inner-border-width:0 0 1px 0}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{--background:var(--core-login-input-background);--color:var(--core-login-input-color)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item.md[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item.md[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:8px;padding-inline-start:8px}}[_nghost-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}[_nghost-%COMP%]   .core-sitename[_ngcontent-%COMP%] + .core-siteurl[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .core-sitename[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:0}[_nghost-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]{width:90%;max-width:300px;margin:5px auto}[_nghost-%COMP%]   .core-login-forgotten-password[_ngcontent-%COMP%]{text-decoration:underline}body.dark[_nghost-%COMP%]   core-loading[_ngcontent-%COMP%], body.dark   [_nghost-%COMP%]   core-loading[_ngcontent-%COMP%]{--loading-background:var(--core-login-background-dark);--loading-text-color:#fff;--loading-spinner:#fff}"]}),CoreLoginSitePage})();const F=[{path:"",component:U}];let V=(()=>{class CoreLoginSitePageModule{}return CoreLoginSitePageModule.ɵmod=v.wc({type:CoreLoginSitePageModule}),CoreLoginSitePageModule.ɵinj=v.vc({factory:function CoreLoginSitePageModule_Factory(n){return new(n||CoreLoginSitePageModule)},imports:[[i.m.forChild(F),o.a],i.m]}),CoreLoginSitePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&v.kd(V,{declarations:[U],imports:[i.m,o.a],exports:[i.m]}))}}]);