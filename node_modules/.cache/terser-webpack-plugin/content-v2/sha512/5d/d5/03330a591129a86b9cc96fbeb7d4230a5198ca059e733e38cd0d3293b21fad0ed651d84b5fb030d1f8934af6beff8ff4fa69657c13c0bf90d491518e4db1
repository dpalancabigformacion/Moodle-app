{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{\"LfF/\":function(e,n,t){\"use strict\";t.r(n),t.d(n,\"AddonCalendarEventPageModule\",(function(){return z}));var i=t(\"tyNb\"),o=t(\"L3Fv\"),c=t(\"9Xwr\"),a=t(\"mrSG\"),d=t(\"SmTL\"),r=t(\"n6RP\"),l=t(\"Lc7R\"),s=t(\"+lfu\"),_=t(\"nvXB\"),v=t(\"fjkH\"),h=t(\"3LXp\"),m=t(\"vuGA\"),u=t(\"9+EE\"),g=t(\"ANhT\"),f=t(\"ULAo\"),E=t(\"Q98t\"),p=t(\"mWdr\"),I=t(\"j3ag\"),b=t(\"pHTc\"),C=t(\"bFG1\"),P=t(\"BaYo\"),y=t(\"2CAT\"),D=t(\"fXoL\"),O=t(\"TEn/\"),A=t(\"4JiN\"),T=t(\"ofXK\"),x=t(\"fQ68\"),M=t(\"8/N+\"),w=t(\"nt/U\"),N=t(\"PgjG\"),V=t(\"hMzs\"),L=t(\"3CSS\"),k=t(\"eAud\"),S=t(\"iSJP\"),R=t(\"ACYt\"),Q=t(\"sYmb\");function AddonCalendarEventPage_h1_6_Template(e,n){if(1&e&&(D.Ec(0,\"h1\"),D.zc(1,\"core-format-text\",13),D.Dc()),2&e){const e=D.Oc();D.lc(1),D.Vc(\"text\",e.event.name)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId)}}const _c0=function(e){return{$a:e}};function AddonCalendarEventPage_ion_card_22_Template(e,n){1&e&&(D.Ec(0,\"ion-card\",14),D.Ec(1,\"ion-item\"),D.zc(2,\"ion-icon\",15),D.Ec(3,\"ion-label\"),D.pd(4),D.Pc(5,\"translate\"),D.Pc(6,\"translate\"),D.Dc(),D.Dc(),D.Dc()),2&e&&(D.lc(4),D.qd(D.Rc(5,1,\"core.hasdatatosync\",D.ad(6,_c0,D.Qc(6,4,\"addon.calendar.calendarevent\")))))}function AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template(e,n){if(1&e&&D.zc(0,\"core-mod-icon\",25),2&e){const e=D.Oc(2);D.Vc(\"modicon\",e.event.moduleIcon)(\"showAlt\",!1)(\"modname\",e.event.modulename)(\"componentId\",e.event.instance)}}function AddonCalendarEventPage_ion_list_23_ion_icon_3_Template(e,n){if(1&e&&D.zc(0,\"ion-icon\",26),2&e){const e=D.Oc(2);D.Vc(\"name\",e.event.eventIcon)}}function AddonCalendarEventPage_ion_list_23_span_8_Template(e,n){if(1&e&&(D.Ec(0,\"span\",19),D.pd(1),D.Dc()),2&e){const e=D.Oc(2);D.lc(1),D.qd(e.event.iconTitle)}}function AddonCalendarEventPage_ion_list_23_ion_note_17_Template(e,n){1&e&&(D.Ec(0,\"ion-note\",4),D.zc(1,\"ion-icon\",27),D.pd(2),D.Pc(3,\"translate\"),D.Dc()),2&e&&(D.lc(2),D.rd(\" \",D.Qc(3,1,\"core.deletedoffline\"),\" \"))}function AddonCalendarEventPage_ion_list_23_ion_item_26_Template(e,n){if(1&e&&(D.Ec(0,\"ion-item\",28),D.Ec(1,\"ion-label\"),D.Ec(2,\"h2\"),D.pd(3),D.Pc(4,\"translate\"),D.Dc(),D.Ec(5,\"p\"),D.zc(6,\"core-format-text\",29),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.Vc(\"href\",e.courseUrl),D.lc(3),D.qd(D.Qc(4,4,\"core.course\")),D.lc(3),D.Vc(\"text\",e.courseName)(\"contextInstanceId\",e.courseId)}}function AddonCalendarEventPage_ion_list_23_ion_item_27_Template(e,n){if(1&e&&(D.Ec(0,\"ion-item\",30),D.Ec(1,\"ion-label\"),D.Ec(2,\"h2\"),D.pd(3),D.Pc(4,\"translate\"),D.Dc(),D.Ec(5,\"p\"),D.pd(6),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,2,\"core.group\")),D.lc(3),D.qd(e.groupName)}}function AddonCalendarEventPage_ion_list_23_ion_item_28_Template(e,n){if(1&e&&(D.Ec(0,\"ion-item\",31),D.Ec(1,\"ion-label\"),D.Ec(2,\"h2\"),D.pd(3),D.Pc(4,\"translate\"),D.Dc(),D.Ec(5,\"p\"),D.zc(6,\"core-format-text\",32),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,3,\"core.category\")),D.lc(3),D.Vc(\"text\",e.categoryPath)(\"contextInstanceId\",e.event.categoryid)}}function AddonCalendarEventPage_ion_list_23_ion_item_29_Template(e,n){if(1&e&&(D.Ec(0,\"ion-item\",31),D.Ec(1,\"ion-label\"),D.Ec(2,\"h2\"),D.pd(3),D.Pc(4,\"translate\"),D.Dc(),D.Ec(5,\"p\"),D.zc(6,\"core-format-text\",13),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,4,\"core.description\")),D.lc(3),D.Vc(\"text\",e.event.description)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId)}}function AddonCalendarEventPage_ion_list_23_ion_item_30_Template(e,n){if(1&e&&(D.Ec(0,\"ion-item\",31),D.Ec(1,\"ion-label\"),D.Ec(2,\"h2\"),D.pd(3),D.Pc(4,\"translate\"),D.Dc(),D.Ec(5,\"p\"),D.Ec(6,\"a\",33),D.zc(7,\"core-format-text\",13),D.Dc(),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,5,\"core.location\")),D.lc(3),D.Vc(\"href\",e.event.encodedLocation,D.id),D.lc(1),D.Vc(\"text\",e.event.location)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId)}}function AddonCalendarEventPage_ion_list_23_ion_item_31_Template(e,n){if(1&e&&(D.Ec(0,\"ion-item\"),D.Ec(1,\"ion-label\"),D.Ec(2,\"ion-button\",34),D.pd(3),D.Pc(4,\"translate\"),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(2),D.Vc(\"href\",e.moduleUrl),D.lc(1),D.rd(\" \",D.Qc(4,2,\"addon.calendar.gotoactivity\"),\" \")}}const _c1=function(e){return[e]};function AddonCalendarEventPage_ion_list_23_Template(e,n){if(1&e&&(D.Ec(0,\"ion-list\"),D.Ec(1,\"ion-item\",16),D.nd(2,AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template,1,4,\"core-mod-icon\",17),D.nd(3,AddonCalendarEventPage_ion_list_23_ion_icon_3_Template,1,1,\"ion-icon\",18),D.Ec(4,\"ion-label\"),D.Ec(5,\"span\",19),D.pd(6),D.Pc(7,\"translate\"),D.nd(8,AddonCalendarEventPage_ion_list_23_span_8_Template,2,1,\"span\",20),D.Dc(),D.Ec(9,\"h1\"),D.zc(10,\"core-format-text\",13),D.Dc(),D.Dc(),D.Dc(),D.Ec(11,\"ion-item\"),D.Ec(12,\"ion-label\"),D.Ec(13,\"h2\"),D.pd(14),D.Pc(15,\"translate\"),D.Dc(),D.zc(16,\"core-format-text\",13),D.Dc(),D.nd(17,AddonCalendarEventPage_ion_list_23_ion_note_17_Template,4,3,\"ion-note\",21),D.Dc(),D.Ec(18,\"ion-item\"),D.Ec(19,\"ion-label\"),D.Ec(20,\"h2\"),D.pd(21),D.Pc(22,\"translate\"),D.Dc(),D.Ec(23,\"p\"),D.pd(24),D.Pc(25,\"translate\"),D.Dc(),D.Dc(),D.Dc(),D.nd(26,AddonCalendarEventPage_ion_list_23_ion_item_26_Template,7,6,\"ion-item\",22),D.nd(27,AddonCalendarEventPage_ion_list_23_ion_item_27_Template,7,4,\"ion-item\",23),D.nd(28,AddonCalendarEventPage_ion_list_23_ion_item_28_Template,7,5,\"ion-item\",24),D.nd(29,AddonCalendarEventPage_ion_list_23_ion_item_29_Template,7,6,\"ion-item\",24),D.nd(30,AddonCalendarEventPage_ion_list_23_ion_item_30_Template,8,7,\"ion-item\",24),D.nd(31,AddonCalendarEventPage_ion_list_23_ion_item_31_Template,5,4,\"ion-item\",3),D.Dc()),2&e){const e=D.Oc();D.lc(1),D.Vc(\"ngClass\",D.ad(29,_c1,\"addon-calendar-eventtype-\"+e.event.eventtype)),D.lc(1),D.Vc(\"ngIf\",e.event.moduleIcon),D.lc(1),D.Vc(\"ngIf\",e.event.eventIcon&&!e.event.moduleIcon),D.lc(3),D.rd(\" \",D.Qc(7,21,\"addon.calendar.type\"+e.event.formattedType),\" \"),D.lc(2),D.Vc(\"ngIf\",e.event.moduleIcon&&e.event.iconTitle),D.lc(2),D.Vc(\"text\",e.event.name)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId),D.lc(4),D.qd(D.Qc(15,23,\"addon.calendar.when\")),D.lc(2),D.Vc(\"text\",e.event.formattedtime)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId),D.lc(1),D.Vc(\"ngIf\",e.event.deleted),D.lc(4),D.qd(D.Qc(22,25,\"addon.calendar.eventtype\")),D.lc(3),D.qd(D.Qc(25,27,\"addon.calendar.type\"+e.event.formattedType)),D.lc(2),D.Vc(\"ngIf\",e.courseName),D.lc(1),D.Vc(\"ngIf\",e.groupName),D.lc(1),D.Vc(\"ngIf\",e.categoryPath),D.lc(1),D.Vc(\"ngIf\",e.event.description),D.lc(1),D.Vc(\"ngIf\",e.event.location),D.lc(1),D.Vc(\"ngIf\",e.moduleUrl)}}function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template(e,n){if(1&e&&(D.Ec(0,\"p\"),D.pd(1),D.Dc()),2&e){const e=D.Oc(2).$implicit;D.lc(1),D.qd(e.sublabel)}}function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template(e,n){if(1&e){const e=D.Fc();D.Ec(0,\"ion-item\",31),D.Ec(1,\"ion-label\"),D.Ec(2,\"p\",37),D.pd(3),D.Dc(),D.nd(4,AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template,2,1,\"p\",3),D.Dc(),D.Ec(5,\"ion-button\",38),D.Mc(\"click\",(function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template_ion_button_click_5_listener(n){D.fd(e);const t=D.Oc().$implicit;return D.Oc(2).cancelNotification(t.id,n)})),D.Pc(6,\"translate\"),D.zc(7,\"ion-icon\",39),D.Dc(),D.Dc()}if(2&e){const e=D.Oc().$implicit,n=D.Oc(2);D.qc(\"item-dimmed\",e.timestamp<=n.currentTime),D.lc(3),D.qd(e.label),D.lc(1),D.Vc(\"ngIf\",e.sublabel),D.lc(1),D.mc(\"aria-label\",D.Qc(6,5,\"core.delete\"))}}function AddonCalendarEventPage_ion_card_24_ng_container_6_Template(e,n){if(1&e&&(D.Cc(0),D.nd(1,AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template,8,7,\"ion-item\",36),D.Bc()),2&e){const e=n.$implicit;D.lc(1),D.Vc(\"ngIf\",e.timestamp>0)}}function AddonCalendarEventPage_ion_card_24_ng_container_7_Template(e,n){if(1&e){const e=D.Fc();D.Cc(0),D.Ec(1,\"ion-item\"),D.Ec(2,\"ion-label\"),D.Ec(3,\"ion-button\",40),D.Mc(\"click\",(function AddonCalendarEventPage_ion_card_24_ng_container_7_Template_ion_button_click_3_listener(){D.fd(e);return D.Oc(2).addReminder()})),D.pd(4),D.Pc(5,\"translate\"),D.Dc(),D.Dc(),D.Dc(),D.Bc()}2&e&&(D.lc(4),D.rd(\" \",D.Qc(5,1,\"addon.calendar.setnewreminder\"),\" \"))}function AddonCalendarEventPage_ion_card_24_Template(e,n){if(1&e&&(D.Ec(0,\"ion-card\"),D.Ec(1,\"ion-item\"),D.Ec(2,\"ion-label\"),D.Ec(3,\"h2\"),D.pd(4),D.Pc(5,\"translate\"),D.Dc(),D.Dc(),D.Dc(),D.nd(6,AddonCalendarEventPage_ion_card_24_ng_container_6_Template,2,1,\"ng-container\",35),D.nd(7,AddonCalendarEventPage_ion_card_24_ng_container_7_Template,6,3,\"ng-container\",3),D.Dc()),2&e){const e=D.Oc();D.lc(4),D.qd(D.Qc(5,3,\"addon.calendar.reminders\")),D.lc(2),D.Vc(\"ngForOf\",e.reminders),D.lc(1),D.Vc(\"ngIf\",e.event.timestart>e.currentTime)}}let U=(()=>{class AddonCalendarEventPage{constructor(e){this.route=e,this.eventLoaded=!1,this.courseName=\"\",this.courseUrl=\"\",this.notificationsEnabled=!1,this.moduleUrl=\"\",this.categoryPath=\"\",this.currentTime=-1,this.reminders=[],this.canEdit=!1,this.hasOffline=!1,this.isOnline=!1,this.syncIcon=P.a.ICON_LOADING,this.notificationsEnabled=g.a.isAvailable(),this.siteHomeId=u.b.getCurrentSiteHomeId(),this.currentSiteId=u.b.getCurrentSiteId(),this.canEdit=d.a.canEditEventsInSite(),this.editEventObserver=v.b.on(d.c.EDIT_EVENT_EVENT,(e=>{e&&e.eventId===this.eventId&&(this.eventLoaded=!1,this.refreshEvent(!0,!1))}),this.currentSiteId),this.newEventObserver=v.b.on(d.c.NEW_EVENT_EVENT,(e=>{this.eventId<0&&e&&(e.eventId===this.eventId||e.oldEventId===this.eventId)&&(this.eventId=e.eventId,this.eventLoaded=!1,this.refreshEvent(!0,!1))}),this.currentSiteId),this.syncObserver=v.b.on(s.b.AUTO_SYNCED,this.checkSyncResult.bind(this,!1),this.currentSiteId),this.manualSyncObserver=v.b.on(s.b.MANUAL_SYNCED,this.checkSyncResult.bind(this,!0),this.currentSiteId),this.onlineObserver=I.B.onChange().subscribe((()=>{I.C.run((()=>{this.isOnline=_.a.isOnline()}))})),this.defaultTimeChangedObserver=v.b.on(d.c.DEFAULT_NOTIFICATION_TIME_CHANGED,(()=>{this.loadReminders()}),this.currentSiteId),this.currentTime=E.a.timestamp(),this.updateCurrentTime=window.setInterval((()=>{this.currentTime=E.a.timestamp()}),5e3)}loadReminders(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.notificationsEnabled||!this.event)return;const e=yield d.a.getEventReminders(this.eventId,this.currentSiteId);this.reminders=yield r.b.formatReminders(e,this.event.timestart,this.currentSiteId)}))}ngOnInit(){try{this.eventId=b.a.getRequiredRouteNumberParam(\"id\")}catch(e){return h.a.showErrorModal(e),b.a.back(),void 0}this.syncIcon=P.a.ICON_LOADING,this.fetchEvent()}fetchEvent(e=!1,n=!1){return Object(a.a)(this,void 0,void 0,(function*(){if(this.isOnline=_.a.isOnline(),e){if(yield this.syncEvents(n))return}try{if(this.eventId>=0){const e=yield d.a.getEventById(this.eventId);this.event=yield r.b.formatEventData(e)}try{const e=r.b.formatOfflineEventData(yield l.a.getEvent(this.eventId));this.hasOffline=!0,this.event=Object.assign(this.event||{},e)}catch(e){if(this.hasOffline=!1,this.eventId<0)return h.a.showErrorModal(\"Event not found.\"),b.a.back(),void 0}if(!this.event)return;if(this.loadReminders(),this.categoryPath=\"\",this.courseName=\"\",this.courseUrl=\"\",this.moduleUrl=\"\",this.event.moduleIcon){const e=f.a.translateModuleName(this.event.modulename||\"\");-1===e.indexOf(\"core.mod_\")&&(this.event.modulename=e),this.moduleUrl=this.event.url||\"\"}const e=[],n=this.event,t=this.event.courseid;t!=this.siteHomeId&&this.event.course&&(this.courseId=this.event.course.id,this.courseName=this.event.course.fullname,this.courseUrl=this.event.course.viewurl),t&&this.event.groupid&&e.push(this.loadGroupName(this.event,t)),this.event.iscategoryevent&&this.event.category&&(this.categoryPath=this.event.category.nestedname),this.event.location&&(this.event.location=m.a.decodeHTML(this.event.location),this.event.encodedLocation=m.a.buildAddressURL(this.event.location)),e.push(l.a.isEventDeleted(this.eventId).then((e=>{n.deleted=e}))),e.push(d.a.getCalendarTimeFormat().then((e=>Object(a.a)(this,void 0,void 0,(function*(){n.formattedtime=yield d.a.formatEventTime(n,e)}))))),yield Promise.all(e)}catch(e){h.a.showErrorModalDefault(e,\"addon.calendar.errorloadevent\",!0)}this.eventLoaded=!0,this.syncIcon=P.a.ICON_SYNC}))}syncEvents(e=!1){return Object(a.a)(this,void 0,void 0,(function*(){let n=!1;try{const e=yield s.a.syncEvents();e.warnings&&e.warnings.length&&h.a.showErrorModal(e.warnings[0]),e.deleted&&-1!=e.deleted.indexOf(this.eventId)?n=!0:this.eventId<0&&e.offlineIdMap[this.eventId]&&(this.eventId=e.offlineIdMap[this.eventId]),e.updated&&(e.source=\"event\",v.b.trigger(s.b.MANUAL_SYNCED,e,this.currentSiteId))}catch(n){e&&h.a.showErrorModalDefault(n,\"core.errorsync\",!0)}return n}))}loadGroupName(e,n){return Object(a.a)(this,void 0,void 0,(function*(){try{const t=(yield p.a.getUserGroupsInCourse(n)).find((n=>n.id==e.groupid));this.groupName=t?t.name:\"\"}catch(e){this.groupName=\"\"}}))}addReminder(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.event||!this.event.id)return;const e=yield h.a.openModal({component:y.a});void 0!==e&&(yield d.a.addEventReminder(this.event,e,this.currentSiteId),yield this.loadReminders())}))}cancelNotification(e,n){return Object(a.a)(this,void 0,void 0,(function*(){n.preventDefault(),n.stopPropagation();try{yield h.a.showDeleteConfirm();const n=yield h.a.showModalLoading(\"core.deleting\",!0);try{yield d.a.deleteEventReminder(e),yield this.loadReminders()}catch(e){h.a.showErrorModalDefault(e,\"Error deleting reminder\")}finally{n.dismiss()}}catch(e){}}))}doRefresh(e,n,t=!1){return Object(a.a)(this,void 0,void 0,(function*(){this.eventLoaded&&(yield this.refreshEvent(!0,t).finally((()=>{null==e?void 0:e.complete(),n&&n()})))}))}refreshEvent(e=!1,n=!1){return Object(a.a)(this,void 0,void 0,(function*(){this.syncIcon=P.a.ICON_LOADING;const t=[];this.eventId>0&&t.push(d.a.invalidateEvent(this.eventId)),t.push(d.a.invalidateTimeFormat()),yield C.a.allPromisesIgnoringErrors(t),yield this.fetchEvent(e,n)}))}openEdit(){b.a.navigateToSitePath(`/calendar/edit/${this.eventId}`)}deleteEvent(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.event)return;const e=I.M.instant(\"addon.calendar.deleteevent\"),n={};let t;this.event.eventcount>1?(t=I.M.instant(\"addon.calendar.confirmeventseriesdelete\",{$a:{name:this.event.name,count:this.event.eventcount}}),n.inputs=[{type:\"radio\",name:\"deleteall\",checked:!0,value:!1,label:I.M.instant(\"addon.calendar.deleteoneevent\")},{type:\"radio\",name:\"deleteall\",checked:!1,value:!0,label:I.M.instant(\"addon.calendar.deleteallevents\")}]):t=I.M.instant(\"addon.calendar.confirmeventdelete\",{$a:this.event.name});let i=!1;try{i=yield h.a.showConfirm(t,e,void 0,void 0,n)}catch(e){return}const o=yield h.a.showModalLoading(\"core.sending\",!0);try{let e=!1;if(this.event.id<0?yield l.a.deleteEvent(this.event.id):e=yield d.a.deleteEvent(this.event.id,this.event.name,i),e)try{yield r.b.refreshAfterChangeEvent(this.event,i?this.event.eventcount:1)}catch(e){}this.event.id<0?v.b.trigger(d.c.NEW_EVENT_DISCARDED_EVENT,{},u.b.getCurrentSiteId()):v.b.trigger(d.c.DELETED_EVENT_EVENT,{eventId:this.eventId,sent:e},u.b.getCurrentSiteId()),e||this.event.id<0?(h.a.showToast(\"addon.calendar.eventcalendareventdeleted\",!0,3e3),b.a.back()):this.event.deleted=!0}catch(e){h.a.showErrorModalDefault(e,\"Error deleting event.\")}o.dismiss()}))}undoDelete(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.event)return;const e=yield h.a.showModalLoading(\"core.sending\",!0);try{yield l.a.unmarkDeleted(this.event.id),v.b.trigger(d.c.UNDELETED_EVENT_EVENT,{eventId:this.eventId},u.b.getCurrentSiteId()),this.event.deleted=!1}catch(e){h.a.showErrorModalDefault(e,\"Error undeleting event.\")}e.dismiss()}))}checkSyncResult(e,n){if(n)if(n.deleted&&-1!=n.deleted.indexOf(this.eventId))h.a.showToast(\"addon.calendar.eventcalendareventdeleted\",!0,3e3),b.a.back();else if(n.events&&(!e||\"event\"!=n.source))if(this.eventId<0)n.offlineIdMap[this.eventId]&&(this.eventId=n.offlineIdMap[this.eventId],this.eventLoaded=!1,this.refreshEvent());else{n.events.find((e=>e.id==this.eventId))&&(this.eventLoaded=!1,this.refreshEvent())}}ngOnDestroy(){this.editEventObserver.off(),this.syncObserver.off(),this.manualSyncObserver.off(),this.onlineObserver.unsubscribe(),this.newEventObserver.off(),clearInterval(this.updateCurrentTime)}}return AddonCalendarEventPage.ɵfac=function AddonCalendarEventPage_Factory(e){return new(e||AddonCalendarEventPage)(D.yc(i.a))},AddonCalendarEventPage.ɵcmp=D.sc({type:AddonCalendarEventPage,selectors:[[\"page-addon-calendar-event\"]],decls:25,vars:34,consts:[[\"collapsible\",\"\"],[\"slot\",\"start\"],[3,\"text\"],[4,\"ngIf\"],[\"slot\",\"end\"],[3,\"hidden\",\"priority\",\"content\",\"iconAction\",\"closeOnClick\",\"action\"],[\"iconAction\",\"fas-edit\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-trash\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-undo-alt\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[\"class\",\"core-warning-card\",4,\"ngIf\"],[3,\"text\",\"contextLevel\",\"contextInstanceId\"],[1,\"core-warning-card\"],[\"name\",\"fas-exclamation-triangle\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[\"collapsible\",\"\",1,\"ion-text-wrap\",\"addon-calendar-event\",3,\"ngClass\"],[\"slot\",\"start\",3,\"modicon\",\"showAlt\",\"modname\",\"componentId\",4,\"ngIf\"],[\"aria-hidden\",\"true\",\"slot\",\"start\",3,\"name\",4,\"ngIf\"],[1,\"sr-only\"],[\"class\",\"sr-only\",4,\"ngIf\"],[\"slot\",\"end\",4,\"ngIf\"],[\"class\",\"ion-text-wrap\",\"core-link\",\"\",\"capture\",\"true\",3,\"href\",4,\"ngIf\"],[\"class\",\"ion-text-wrap core-groupname\",4,\"ngIf\"],[\"class\",\"ion-text-wrap\",4,\"ngIf\"],[\"slot\",\"start\",3,\"modicon\",\"showAlt\",\"modname\",\"componentId\"],[\"aria-hidden\",\"true\",\"slot\",\"start\",3,\"name\"],[\"name\",\"fas-trash\",\"aria-hidden\",\"true\"],[\"core-link\",\"\",\"capture\",\"true\",1,\"ion-text-wrap\",3,\"href\"],[\"contextLevel\",\"course\",3,\"text\",\"contextInstanceId\"],[1,\"ion-text-wrap\",\"core-groupname\"],[1,\"ion-text-wrap\"],[\"contextLevel\",\"coursecat\",3,\"text\",\"contextInstanceId\"],[\"core-link\",\"\",\"auto-login\",\"no\",3,\"href\"],[\"expand\",\"block\",\"core-link\",\"\",\"capture\",\"true\",3,\"href\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"ion-text-wrap\",3,\"item-dimmed\",4,\"ngIf\"],[1,\"item-heading\"],[\"fill\",\"clear\",\"slot\",\"end\",3,\"click\"],[\"name\",\"fas-trash\",\"color\",\"danger\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"],[\"expand\",\"block\",3,\"click\"]],template:function AddonCalendarEventPage_Template(e,n){1&e&&(D.Ec(0,\"ion-header\",0),D.Ec(1,\"ion-toolbar\"),D.Ec(2,\"ion-buttons\",1),D.zc(3,\"ion-back-button\",2),D.Pc(4,\"translate\"),D.Dc(),D.Ec(5,\"ion-title\"),D.nd(6,AddonCalendarEventPage_h1_6_Template,2,3,\"h1\",3),D.Dc(),D.Ec(7,\"ion-buttons\",4),D.Ec(8,\"core-context-menu\"),D.Ec(9,\"core-context-menu-item\",5),D.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener(e){return n.doRefresh(void 0,e,!0)})),D.Pc(10,\"translate\"),D.Dc(),D.Ec(11,\"core-context-menu-item\",6),D.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener(){return n.openEdit()})),D.Pc(12,\"translate\"),D.Dc(),D.Ec(13,\"core-context-menu-item\",7),D.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener(){return n.deleteEvent()})),D.Pc(14,\"translate\"),D.Dc(),D.Ec(15,\"core-context-menu-item\",8),D.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener(){return n.undoDelete()})),D.Pc(16,\"translate\"),D.Dc(),D.Dc(),D.Dc(),D.Dc(),D.Dc(),D.Ec(17,\"ion-content\"),D.Ec(18,\"ion-refresher\",9),D.Mc(\"ionRefresh\",(function AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener(e){return n.doRefresh(e.target)})),D.zc(19,\"ion-refresher-content\",10),D.Pc(20,\"translate\"),D.Dc(),D.Ec(21,\"core-loading\",11),D.nd(22,AddonCalendarEventPage_ion_card_22_Template,7,8,\"ion-card\",12),D.nd(23,AddonCalendarEventPage_ion_list_23_Template,32,31,\"ion-list\",3),D.nd(24,AddonCalendarEventPage_ion_card_24_Template,8,5,\"ion-card\",3),D.Dc(),D.Dc()),2&e&&(D.lc(3),D.Vc(\"text\",D.Qc(4,22,\"core.back\")),D.lc(3),D.Vc(\"ngIf\",n.event),D.lc(3),D.Vc(\"hidden\",!n.eventLoaded||!n.hasOffline&&n.event&&!n.event.deleted||!n.isOnline)(\"priority\",400)(\"content\",D.Qc(10,24,\"core.settings.synchronizenow\"))(\"iconAction\",n.syncIcon)(\"closeOnClick\",!1),D.lc(2),D.Vc(\"hidden\",!n.event||!n.event.canedit||n.event.deleted||!n.canEdit&&n.event.id>0)(\"priority\",300)(\"content\",D.Qc(12,26,\"core.edit\")),D.lc(2),D.Vc(\"hidden\",!n.event||!n.event.candelete||n.event.deleted)(\"priority\",200)(\"content\",D.Qc(14,28,\"core.delete\")),D.lc(2),D.Vc(\"hidden\",!n.event||!n.event.deleted)(\"priority\",200)(\"content\",D.Qc(16,30,\"core.restore\")),D.lc(3),D.Vc(\"disabled\",!n.eventLoaded),D.lc(1),D.Wc(\"pullingText\",D.Qc(20,32,\"core.pulltorefresh\")),D.lc(2),D.Vc(\"hideUntil\",n.eventLoaded),D.lc(1),D.Vc(\"ngIf\",n.hasOffline||n.event&&n.event.deleted),D.lc(1),D.Vc(\"ngIf\",n.event),D.lc(1),D.Vc(\"ngIf\",n.notificationsEnabled&&n.event))},directives:[O.C,A.b,O.Ab,O.m,O.h,O.i,O.yb,T.t,x.a,M.a,w.a,O.v,O.bb,O.cb,N.a,V.a,O.n,O.I,O.D,L.a,O.O,O.P,T.q,k.a,O.W,S.a,R.a,O.l,T.s],pipes:[Q.d],styles:[\"[_nghost-%COMP%]{--addon-calendar-blank-day-background-color:var(--light)}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:.7rem;--margin-vertical:12px;--margin-end:12px;margin-top:var(--margin-vertical);margin-bottom:var(--margin-vertical);margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#8e24aa}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#ca3120}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#f0ad4e}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#0f6cbf}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#357a32}\",\"[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1.6rem}\"]}),AddonCalendarEventPage})();const q=[{path:\"\",component:U}];let z=(()=>{class AddonCalendarEventPageModule{}return AddonCalendarEventPageModule.ɵmod=D.wc({type:AddonCalendarEventPageModule}),AddonCalendarEventPageModule.ɵinj=D.vc({factory:function AddonCalendarEventPageModule_Factory(e){return new(e||AddonCalendarEventPageModule)},imports:[[i.m.forChild(q),o.a,c.a],i.m]}),AddonCalendarEventPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&D.kd(z,{declarations:[U],imports:[i.m,o.a,c.a],exports:[i.m]}))}}]);","name":"37.628a0b6adca0a69e7049.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[37],{\n\n/***/ \"LfF/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonCalendarEventPageModule\", function() { return /* binding */ event_module_AddonCalendarEventPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 14 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/components.module.ts\nvar components_module = __webpack_require__(\"9Xwr\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar.ts\nvar calendar = __webpack_require__(\"SmTL\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-helper.ts\nvar calendar_helper = __webpack_require__(\"n6RP\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-offline.ts\nvar calendar_offline = __webpack_require__(\"Lc7R\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-sync.ts\nvar calendar_sync = __webpack_require__(\"+lfu\");\n\n// EXTERNAL MODULE: ./src/core/services/app.ts + 1 modules\nvar app = __webpack_require__(\"nvXB\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/text.ts + 1 modules\nvar utils_text = __webpack_require__(\"vuGA\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/services/local-notifications.ts + 1 modules\nvar local_notifications = __webpack_require__(\"ANhT\");\n\n// EXTERNAL MODULE: ./src/core/features/course/services/course.ts\nvar course = __webpack_require__(\"ULAo\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/time.ts\nvar time = __webpack_require__(\"Q98t\");\n\n// EXTERNAL MODULE: ./src/core/services/groups.ts\nvar services_groups = __webpack_require__(\"mWdr\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/core/constants.ts\nvar constants = __webpack_require__(\"BaYo\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/reminder-time-modal/reminder-time-modal.ts\nvar reminder_time_modal = __webpack_require__(\"2CAT\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js + 4 modules\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-header.ts\nvar collapsible_header = __webpack_require__(\"4JiN\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu.ts + 4 modules\nvar context_menu = __webpack_require__(\"fQ68\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu-item.ts\nvar context_menu_item = __webpack_require__(\"8/N+\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/components/mod-icon/mod-icon.ts\nvar mod_icon = __webpack_require__(\"eAud\");\n\n// EXTERNAL MODULE: ./src/core/directives/link.ts\nvar directives_link = __webpack_require__(\"iSJP\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/addons/calendar/pages/event/event.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonCalendarEventPage_h1_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"h1\");\n        core[\"zc\" /* ɵɵelement */](1, \"core-format-text\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r0.event.name)(\"contextLevel\", ctx_r0.event.contextLevel)(\"contextInstanceId\", ctx_r0.event.contextInstanceId);\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction AddonCalendarEventPage_ion_card_22_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 14);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 15);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Pc\" /* ɵɵpipe */](6, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 1, \"core.hasdatatosync\", core[\"ad\" /* ɵɵpureFunction1 */](6, _c0, core[\"Qc\" /* ɵɵpipeBind1 */](6, 4, \"addon.calendar.calendarevent\"))));\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-mod-icon\", 25);\n    }\n    if (rf & 2) {\n        const ctx_r4 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"modicon\", ctx_r4.event.moduleIcon)(\"showAlt\", false)(\"modname\", ctx_r4.event.modulename)(\"componentId\", ctx_r4.event.instance);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_icon_3_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"ion-icon\", 26);\n    }\n    if (rf & 2) {\n        const ctx_r5 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"name\", ctx_r5.event.eventIcon);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_span_8_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"span\", 19);\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r6 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qd\" /* ɵɵtextInterpolate */](ctx_r6.event.iconTitle);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_note_17_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-note\", 4);\n        core[\"zc\" /* ɵɵelement */](1, \"ion-icon\", 27);\n        core[\"pd\" /* ɵɵtext */](2);\n        core[\"Pc\" /* ɵɵpipe */](3, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](3, 1, \"core.deletedoffline\"), \" \");\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_26_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 28);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 29);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r8 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", ctx_r8.courseUrl);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 4, \"core.course\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r8.courseName)(\"contextInstanceId\", ctx_r8.courseId);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_27_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 30);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"pd\" /* ɵɵtext */](6);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r9 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 2, \"core.group\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](ctx_r9.groupName);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_28_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 31);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 32);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r10 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 3, \"core.category\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r10.categoryPath)(\"contextInstanceId\", ctx_r10.event.categoryid);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_29_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 31);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r11 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 4, \"core.description\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r11.event.description)(\"contextLevel\", ctx_r11.event.contextLevel)(\"contextInstanceId\", ctx_r11.event.contextInstanceId);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_30_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 31);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"Ec\" /* ɵɵelementStart */](6, \"a\", 33);\n        core[\"zc\" /* ɵɵelement */](7, \"core-format-text\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r12 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 5, \"core.location\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", ctx_r12.event.encodedLocation, core[\"id\" /* ɵɵsanitizeUrl */]);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r12.event.location)(\"contextLevel\", ctx_r12.event.contextLevel)(\"contextInstanceId\", ctx_r12.event.contextInstanceId);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_31_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-button\", 34);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r13 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", ctx_r13.moduleUrl);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](4, 2, \"addon.calendar.gotoactivity\"), \" \");\n    }\n}\nconst _c1 = function (a0) { return [a0]; };\nfunction AddonCalendarEventPage_ion_list_23_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-list\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\", 16);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template, 1, 4, \"core-mod-icon\", 17);\n        core[\"nd\" /* ɵɵtemplate */](3, AddonCalendarEventPage_ion_list_23_ion_icon_3_Template, 1, 1, \"ion-icon\", 18);\n        core[\"Ec\" /* ɵɵelementStart */](4, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](5, \"span\", 19);\n        core[\"pd\" /* ɵɵtext */](6);\n        core[\"Pc\" /* ɵɵpipe */](7, \"translate\");\n        core[\"nd\" /* ɵɵtemplate */](8, AddonCalendarEventPage_ion_list_23_span_8_Template, 2, 1, \"span\", 20);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](9, \"h1\");\n        core[\"zc\" /* ɵɵelement */](10, \"core-format-text\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](11, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](12, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](13, \"h2\");\n        core[\"pd\" /* ɵɵtext */](14);\n        core[\"Pc\" /* ɵɵpipe */](15, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"zc\" /* ɵɵelement */](16, \"core-format-text\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](17, AddonCalendarEventPage_ion_list_23_ion_note_17_Template, 4, 3, \"ion-note\", 21);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](18, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](19, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](20, \"h2\");\n        core[\"pd\" /* ɵɵtext */](21);\n        core[\"Pc\" /* ɵɵpipe */](22, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](23, \"p\");\n        core[\"pd\" /* ɵɵtext */](24);\n        core[\"Pc\" /* ɵɵpipe */](25, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](26, AddonCalendarEventPage_ion_list_23_ion_item_26_Template, 7, 6, \"ion-item\", 22);\n        core[\"nd\" /* ɵɵtemplate */](27, AddonCalendarEventPage_ion_list_23_ion_item_27_Template, 7, 4, \"ion-item\", 23);\n        core[\"nd\" /* ɵɵtemplate */](28, AddonCalendarEventPage_ion_list_23_ion_item_28_Template, 7, 5, \"ion-item\", 24);\n        core[\"nd\" /* ɵɵtemplate */](29, AddonCalendarEventPage_ion_list_23_ion_item_29_Template, 7, 6, \"ion-item\", 24);\n        core[\"nd\" /* ɵɵtemplate */](30, AddonCalendarEventPage_ion_list_23_ion_item_30_Template, 8, 7, \"ion-item\", 24);\n        core[\"nd\" /* ɵɵtemplate */](31, AddonCalendarEventPage_ion_list_23_ion_item_31_Template, 5, 4, \"ion-item\", 3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngClass\", core[\"ad\" /* ɵɵpureFunction1 */](29, _c1, \"addon-calendar-eventtype-\" + ctx_r2.event.eventtype));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.moduleIcon);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.eventIcon && !ctx_r2.event.moduleIcon);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](7, 21, \"addon.calendar.type\" + ctx_r2.event.formattedType), \" \");\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.moduleIcon && ctx_r2.event.iconTitle);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r2.event.name)(\"contextLevel\", ctx_r2.event.contextLevel)(\"contextInstanceId\", ctx_r2.event.contextInstanceId);\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](15, 23, \"addon.calendar.when\"));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r2.event.formattedtime)(\"contextLevel\", ctx_r2.event.contextLevel)(\"contextInstanceId\", ctx_r2.event.contextInstanceId);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.deleted);\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](22, 25, \"addon.calendar.eventtype\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](25, 27, \"addon.calendar.type\" + ctx_r2.event.formattedType));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.courseName);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.groupName);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.categoryPath);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.description);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.location);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.moduleUrl);\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"p\");\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const reminder_r16 = core[\"Oc\" /* ɵɵnextContext */](2).$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qd\" /* ɵɵtextInterpolate */](reminder_r16.sublabel);\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r22 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 31);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"p\", 37);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](4, AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template, 2, 1, \"p\", 3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"ion-button\", 38);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template_ion_button_click_5_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r22); const reminder_r16 = core[\"Oc\" /* ɵɵnextContext */]().$implicit; const ctx_r20 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r20.cancelNotification(reminder_r16.id, $event); });\n        core[\"Pc\" /* ɵɵpipe */](6, \"translate\");\n        core[\"zc\" /* ɵɵelement */](7, \"ion-icon\", 39);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const reminder_r16 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        const ctx_r17 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"qc\" /* ɵɵclassProp */](\"item-dimmed\", reminder_r16.timestamp <= ctx_r17.currentTime);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](reminder_r16.label);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", reminder_r16.sublabel);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](6, 5, \"core.delete\"));\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template, 8, 7, \"ion-item\", 36);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const reminder_r16 = ctx.$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", reminder_r16.timestamp > 0);\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_7_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r25 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-button\", 40);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonCalendarEventPage_ion_card_24_ng_container_7_Template_ion_button_click_3_listener() { core[\"fd\" /* ɵɵrestoreView */](_r25); const ctx_r24 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r24.addReminder(); });\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](5, 1, \"addon.calendar.setnewreminder\"), \" \");\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"h2\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, AddonCalendarEventPage_ion_card_24_ng_container_6_Template, 2, 1, \"ng-container\", 35);\n        core[\"nd\" /* ɵɵtemplate */](7, AddonCalendarEventPage_ion_card_24_ng_container_7_Template, 6, 3, \"ng-container\", 3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 3, \"addon.calendar.reminders\"));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r3.reminders);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r3.event.timestart > ctx_r3.currentTime);\n    }\n}\n/**\n * Page that displays a single calendar event.\n */\nlet event_page_AddonCalendarEventPage = /*@__PURE__*/ (() => {\n    class AddonCalendarEventPage {\n        constructor(route) {\n            this.route = route;\n            this.eventLoaded = false;\n            this.courseName = '';\n            this.courseUrl = '';\n            this.notificationsEnabled = false;\n            this.moduleUrl = '';\n            this.categoryPath = '';\n            this.currentTime = -1;\n            this.reminders = [];\n            this.canEdit = false;\n            this.hasOffline = false;\n            this.isOnline = false;\n            this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING; // Sync icon.\n            this.notificationsEnabled = local_notifications[\"a\" /* CoreLocalNotifications */].isAvailable();\n            this.siteHomeId = sites[\"b\" /* CoreSites */].getCurrentSiteHomeId();\n            this.currentSiteId = sites[\"b\" /* CoreSites */].getCurrentSiteId();\n            // Check if site supports editing. No need to check allowed types, event.canedit already does it.\n            this.canEdit = calendar[\"a\" /* AddonCalendar */].canEditEventsInSite();\n            // Listen for event edited. If current event is edited, reload the data.\n            this.editEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].EDIT_EVENT_EVENT, (data) => {\n                if (data && data.eventId === this.eventId) {\n                    this.eventLoaded = false;\n                    this.refreshEvent(true, false);\n                }\n            }, this.currentSiteId);\n            // Listen for event created. If user edits the data of a new offline event or it's sent to server, this event is triggered.\n            this.newEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].NEW_EVENT_EVENT, (data) => {\n                if (this.eventId < 0 && data && (data.eventId === this.eventId || data.oldEventId === this.eventId)) {\n                    this.eventId = data.eventId;\n                    this.eventLoaded = false;\n                    this.refreshEvent(true, false);\n                }\n            }, this.currentSiteId);\n            // Refresh data if this calendar event is synchronized automatically.\n            this.syncObserver = events[\"b\" /* CoreEvents */].on(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].AUTO_SYNCED, this.checkSyncResult.bind(this, false), this.currentSiteId);\n            // Refresh data if calendar events are synchronized manually but not by this page.\n            this.manualSyncObserver = events[\"b\" /* CoreEvents */].on(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].MANUAL_SYNCED, this.checkSyncResult.bind(this, true), this.currentSiteId);\n            // Refresh online status when changes.\n            this.onlineObserver = singletons[\"B\" /* Network */].onChange().subscribe(() => {\n                // Execute the callback in the Angular zone, so change detection doesn't stop working.\n                singletons[\"C\" /* NgZone */].run(() => {\n                    this.isOnline = app[\"a\" /* CoreApp */].isOnline();\n                });\n            });\n            // Reload reminders if default notification time changes.\n            this.defaultTimeChangedObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].DEFAULT_NOTIFICATION_TIME_CHANGED, () => {\n                this.loadReminders();\n            }, this.currentSiteId);\n            // Set and update current time. Use a 5 seconds error margin.\n            this.currentTime = time[\"a\" /* CoreTimeUtils */].timestamp();\n            this.updateCurrentTime = window.setInterval(() => {\n                this.currentTime = time[\"a\" /* CoreTimeUtils */].timestamp();\n            }, 5000);\n        }\n        /**\n         * Load reminders.\n         *\n         * @return Promise resolved when done.\n         */\n        loadReminders() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.notificationsEnabled || !this.event) {\n                    return;\n                }\n                const reminders = yield calendar[\"a\" /* AddonCalendar */].getEventReminders(this.eventId, this.currentSiteId);\n                this.reminders = yield calendar_helper[\"b\" /* AddonCalendarHelper */].formatReminders(reminders, this.event.timestart, this.currentSiteId);\n            });\n        }\n        /**\n         * View loaded.\n         */\n        ngOnInit() {\n            try {\n                this.eventId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('id');\n            }\n            catch (error) {\n                dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                services_navigator[\"a\" /* CoreNavigator */].back();\n                return;\n            }\n            this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n            this.fetchEvent();\n        }\n        /**\n         * Fetches the event and updates the view.\n         *\n         * @param sync Whether it should try to synchronize offline events.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        fetchEvent(sync = false, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.isOnline = app[\"a\" /* CoreApp */].isOnline();\n                if (sync) {\n                    const deleted = yield this.syncEvents(showErrors);\n                    if (deleted) {\n                        return;\n                    }\n                }\n                try {\n                    // Get the event data.\n                    if (this.eventId >= 0) {\n                        const event = yield calendar[\"a\" /* AddonCalendar */].getEventById(this.eventId);\n                        this.event = yield calendar_helper[\"b\" /* AddonCalendarHelper */].formatEventData(event);\n                    }\n                    try {\n                        const offlineEvent = calendar_helper[\"b\" /* AddonCalendarHelper */].formatOfflineEventData(yield calendar_offline[\"a\" /* AddonCalendarOffline */].getEvent(this.eventId));\n                        // There is offline data, apply it.\n                        this.hasOffline = true;\n                        this.event = Object.assign(this.event || {}, offlineEvent);\n                    }\n                    catch (_a) {\n                        // No offline data.\n                        this.hasOffline = false;\n                        if (this.eventId < 0) {\n                            // It's an offline event, but it wasn't found. Shouldn't happen.\n                            dom[\"a\" /* CoreDomUtils */].showErrorModal('Event not found.');\n                            services_navigator[\"a\" /* CoreNavigator */].back();\n                            return;\n                        }\n                    }\n                    if (!this.event) {\n                        return; // At this point we should always have the event, adding this check to avoid TS errors.\n                    }\n                    // Load reminders.\n                    this.loadReminders();\n                    // Reset some of the calculated data.\n                    this.categoryPath = '';\n                    this.courseName = '';\n                    this.courseUrl = '';\n                    this.moduleUrl = '';\n                    if (this.event.moduleIcon) {\n                        // It's a module event, translate the module name to the current language.\n                        const name = course[\"a\" /* CoreCourse */].translateModuleName(this.event.modulename || '');\n                        if (name.indexOf('core.mod_') === -1) {\n                            this.event.modulename = name;\n                        }\n                        // Get the module URL.\n                        this.moduleUrl = this.event.url || '';\n                    }\n                    const promises = [];\n                    const event = this.event;\n                    const courseId = this.event.courseid;\n                    if (courseId != this.siteHomeId) {\n                        // If the event belongs to a course, get the course name and the URL to view it.\n                        if (this.event.course) {\n                            this.courseId = this.event.course.id;\n                            this.courseName = this.event.course.fullname;\n                            this.courseUrl = this.event.course.viewurl;\n                        }\n                    }\n                    // If it's a group event, get the name of the group.\n                    if (courseId && this.event.groupid) {\n                        promises.push(this.loadGroupName(this.event, courseId));\n                    }\n                    if (this.event.iscategoryevent && this.event.category) {\n                        this.categoryPath = this.event.category.nestedname;\n                    }\n                    if (this.event.location) {\n                        // Build a link to open the address in maps.\n                        this.event.location = utils_text[\"a\" /* CoreTextUtils */].decodeHTML(this.event.location);\n                        this.event.encodedLocation = utils_text[\"a\" /* CoreTextUtils */].buildAddressURL(this.event.location);\n                    }\n                    // Check if event was deleted in offine.\n                    promises.push(calendar_offline[\"a\" /* AddonCalendarOffline */].isEventDeleted(this.eventId).then((deleted) => {\n                        event.deleted = deleted;\n                        return;\n                    }));\n                    // Re-calculate the formatted time so it uses the device date.\n                    promises.push(calendar[\"a\" /* AddonCalendar */].getCalendarTimeFormat().then((timeFormat) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                        event.formattedtime = yield calendar[\"a\" /* AddonCalendar */].formatEventTime(event, timeFormat);\n                        return;\n                    })));\n                    yield Promise.all(promises);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'addon.calendar.errorloadevent', true);\n                }\n                this.eventLoaded = true;\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_SYNC;\n            });\n        }\n        /**\n         * Sync offline events.\n         *\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved with boolean: whether event was deleted on sync.\n         */\n        syncEvents(showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                let deleted = false;\n                // Try to synchronize offline events.\n                try {\n                    const result = yield calendar_sync[\"a\" /* AddonCalendarSync */].syncEvents();\n                    if (result.warnings && result.warnings.length) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModal(result.warnings[0]);\n                    }\n                    if (result.deleted && result.deleted.indexOf(this.eventId) != -1) {\n                        // This event was deleted during the sync.\n                        deleted = true;\n                    }\n                    else if (this.eventId < 0 && result.offlineIdMap[this.eventId]) {\n                        // Event was created, use the online ID.\n                        this.eventId = result.offlineIdMap[this.eventId];\n                    }\n                    if (result.updated) {\n                        // Trigger a manual sync event.\n                        result.source = 'event';\n                        events[\"b\" /* CoreEvents */].trigger(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].MANUAL_SYNCED, result, this.currentSiteId);\n                    }\n                }\n                catch (error) {\n                    if (showErrors) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.errorsync', true);\n                    }\n                }\n                return deleted;\n            });\n        }\n        /**\n         * Load group name.\n         *\n         * @param event Event.\n         * @param courseId Course ID.\n         * @return Promise resolved when done.\n         */\n        loadGroupName(event, courseId) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const groups = yield services_groups[\"a\" /* CoreGroups */].getUserGroupsInCourse(courseId);\n                    const group = groups.find((group) => group.id == event.groupid);\n                    this.groupName = group ? group.name : '';\n                }\n                catch (_a) {\n                    // Error getting groups, just don't show the group name.\n                    this.groupName = '';\n                }\n            });\n        }\n        /**\n         * Add a reminder for this event.\n         */\n        addReminder() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.event || !this.event.id) {\n                    return;\n                }\n                const reminderTime = yield dom[\"a\" /* CoreDomUtils */].openModal({\n                    component: reminder_time_modal[\"a\" /* AddonCalendarReminderTimeModalComponent */],\n                });\n                if (reminderTime === undefined) {\n                    // User canceled.\n                    return;\n                }\n                yield calendar[\"a\" /* AddonCalendar */].addEventReminder(this.event, reminderTime, this.currentSiteId);\n                yield this.loadReminders();\n            });\n        }\n        /**\n         * Cancel the selected notification.\n         *\n         * @param id Reminder ID.\n         * @param e Click event.\n         */\n        cancelNotification(id, e) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                e.preventDefault();\n                e.stopPropagation();\n                try {\n                    yield dom[\"a\" /* CoreDomUtils */].showDeleteConfirm();\n                    const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.deleting', true);\n                    try {\n                        yield calendar[\"a\" /* AddonCalendar */].deleteEventReminder(id);\n                        yield this.loadReminders();\n                    }\n                    catch (error) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error deleting reminder');\n                    }\n                    finally {\n                        modal.dismiss();\n                    }\n                }\n                catch (_a) {\n                    // Ignore errors.\n                }\n            });\n        }\n        /**\n         * Refresh the data.\n         *\n         * @param refresher Refresher.\n         * @param done Function to call when done.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        doRefresh(refresher, done, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.eventLoaded) {\n                    return;\n                }\n                yield this.refreshEvent(true, showErrors).finally(() => {\n                    refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n                    done && done();\n                });\n            });\n        }\n        /**\n         * Refresh the event.\n         *\n         * @param sync Whether it should try to synchronize offline events.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        refreshEvent(sync = false, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                const promises = [];\n                if (this.eventId > 0) {\n                    promises.push(calendar[\"a\" /* AddonCalendar */].invalidateEvent(this.eventId));\n                }\n                promises.push(calendar[\"a\" /* AddonCalendar */].invalidateTimeFormat());\n                yield utils[\"a\" /* CoreUtils */].allPromisesIgnoringErrors(promises);\n                yield this.fetchEvent(sync, showErrors);\n            });\n        }\n        /**\n         * Open the page to edit the event.\n         */\n        openEdit() {\n            services_navigator[\"a\" /* CoreNavigator */].navigateToSitePath(`/calendar/edit/${this.eventId}`);\n        }\n        /**\n         * Delete the event.\n         */\n        deleteEvent() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.event) {\n                    return;\n                }\n                const title = singletons[\"M\" /* Translate */].instant('addon.calendar.deleteevent');\n                const options = {};\n                let message;\n                if (this.event.eventcount > 1) {\n                    // It's a repeated event.\n                    message = singletons[\"M\" /* Translate */].instant('addon.calendar.confirmeventseriesdelete', { $a: { name: this.event.name, count: this.event.eventcount } });\n                    options.inputs = [\n                        {\n                            type: 'radio',\n                            name: 'deleteall',\n                            checked: true,\n                            value: false,\n                            label: singletons[\"M\" /* Translate */].instant('addon.calendar.deleteoneevent'),\n                        },\n                        {\n                            type: 'radio',\n                            name: 'deleteall',\n                            checked: false,\n                            value: true,\n                            label: singletons[\"M\" /* Translate */].instant('addon.calendar.deleteallevents'),\n                        },\n                    ];\n                }\n                else {\n                    // Not repeated, display a simple confirm.\n                    message = singletons[\"M\" /* Translate */].instant('addon.calendar.confirmeventdelete', { $a: this.event.name });\n                }\n                let deleteAll = false;\n                try {\n                    deleteAll = yield dom[\"a\" /* CoreDomUtils */].showConfirm(message, title, undefined, undefined, options);\n                }\n                catch (_a) {\n                    // User canceled.\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    let onlineEventDeleted = false;\n                    if (this.event.id < 0) {\n                        yield calendar_offline[\"a\" /* AddonCalendarOffline */].deleteEvent(this.event.id);\n                    }\n                    else {\n                        onlineEventDeleted = yield calendar[\"a\" /* AddonCalendar */].deleteEvent(this.event.id, this.event.name, deleteAll);\n                    }\n                    if (onlineEventDeleted) {\n                        // Event deleted, invalidate right days & months.\n                        try {\n                            yield calendar_helper[\"b\" /* AddonCalendarHelper */].refreshAfterChangeEvent(this.event, deleteAll ? this.event.eventcount : 1);\n                        }\n                        catch (_b) {\n                            // Ignore errors.\n                        }\n                    }\n                    // Trigger an event.\n                    if (this.event.id < 0) {\n                        events[\"b\" /* CoreEvents */].trigger(calendar[\"c\" /* AddonCalendarProvider */].NEW_EVENT_DISCARDED_EVENT, {}, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    }\n                    else {\n                        events[\"b\" /* CoreEvents */].trigger(calendar[\"c\" /* AddonCalendarProvider */].DELETED_EVENT_EVENT, {\n                            eventId: this.eventId,\n                            sent: onlineEventDeleted,\n                        }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    }\n                    if (onlineEventDeleted || this.event.id < 0) {\n                        dom[\"a\" /* CoreDomUtils */].showToast('addon.calendar.eventcalendareventdeleted', true, 3000);\n                        // Event deleted, close the view.\n                        services_navigator[\"a\" /* CoreNavigator */].back();\n                    }\n                    else {\n                        // Event deleted in offline, just mark it as deleted.\n                        this.event.deleted = true;\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error deleting event.');\n                }\n                modal.dismiss();\n            });\n        }\n        /**\n         * Undo delete the event.\n         */\n        undoDelete() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.event) {\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    yield calendar_offline[\"a\" /* AddonCalendarOffline */].unmarkDeleted(this.event.id);\n                    // Trigger an event.\n                    events[\"b\" /* CoreEvents */].trigger(calendar[\"c\" /* AddonCalendarProvider */].UNDELETED_EVENT_EVENT, {\n                        eventId: this.eventId,\n                    }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    this.event.deleted = false;\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error undeleting event.');\n                }\n                modal.dismiss();\n            });\n        }\n        /**\n         * Check the result of an automatic sync or a manual sync not done by this page.\n         *\n         * @param isManual Whether it's a manual sync.\n         * @param data Sync result.\n         */\n        checkSyncResult(isManual, data) {\n            if (!data) {\n                return;\n            }\n            if (data.deleted && data.deleted.indexOf(this.eventId) != -1) {\n                dom[\"a\" /* CoreDomUtils */].showToast('addon.calendar.eventcalendareventdeleted', true, 3000);\n                // Event was deleted, close the view.\n                services_navigator[\"a\" /* CoreNavigator */].back();\n            }\n            else if (data.events && (!isManual || data.source != 'event')) {\n                if (this.eventId < 0) {\n                    if (data.offlineIdMap[this.eventId]) {\n                        // Event was created, use the online ID.\n                        this.eventId = data.offlineIdMap[this.eventId];\n                        this.eventLoaded = false;\n                        this.refreshEvent();\n                    }\n                }\n                else {\n                    const event = data.events.find((ev) => ev.id == this.eventId);\n                    if (event) {\n                        this.eventLoaded = false;\n                        this.refreshEvent();\n                    }\n                }\n            }\n        }\n        /**\n         * Page destroyed.\n         */\n        ngOnDestroy() {\n            this.editEventObserver.off();\n            this.syncObserver.off();\n            this.manualSyncObserver.off();\n            this.onlineObserver.unsubscribe();\n            this.newEventObserver.off();\n            clearInterval(this.updateCurrentTime);\n        }\n    }\n    AddonCalendarEventPage.ɵfac = function AddonCalendarEventPage_Factory(t) { return new (t || AddonCalendarEventPage)(core[\"yc\" /* ɵɵdirectiveInject */](router[\"a\" /* ActivatedRoute */])); };\n    AddonCalendarEventPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonCalendarEventPage, selectors: [[\"page-addon-calendar-event\"]], decls: 25, vars: 34, consts: [[\"collapsible\", \"\"], [\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [\"slot\", \"end\"], [3, \"hidden\", \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [\"iconAction\", \"fas-edit\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-trash\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-undo-alt\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [3, \"text\", \"contextLevel\", \"contextInstanceId\"], [1, \"core-warning-card\"], [\"name\", \"fas-exclamation-triangle\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"collapsible\", \"\", 1, \"ion-text-wrap\", \"addon-calendar-event\", 3, \"ngClass\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", \"modname\", \"componentId\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"name\", 4, \"ngIf\"], [1, \"sr-only\"], [\"class\", \"sr-only\", 4, \"ngIf\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap core-groupname\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", \"modname\", \"componentId\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"name\"], [\"name\", \"fas-trash\", \"aria-hidden\", \"true\"], [\"core-link\", \"\", \"capture\", \"true\", 1, \"ion-text-wrap\", 3, \"href\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [1, \"ion-text-wrap\", \"core-groupname\"], [1, \"ion-text-wrap\"], [\"contextLevel\", \"coursecat\", 3, \"text\", \"contextInstanceId\"], [\"core-link\", \"\", \"auto-login\", \"no\", 3, \"href\"], [\"expand\", \"block\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"ion-text-wrap\", 3, \"item-dimmed\", 4, \"ngIf\"], [1, \"item-heading\"], [\"fill\", \"clear\", \"slot\", \"end\", 3, \"click\"], [\"name\", \"fas-trash\", \"color\", \"danger\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", 3, \"click\"]], template: function AddonCalendarEventPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\", 0);\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 1);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 2);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"nd\" /* ɵɵtemplate */](6, AddonCalendarEventPage_h1_6_Template, 2, 3, \"h1\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](7, \"ion-buttons\", 4);\n                core[\"Ec\" /* ɵɵelementStart */](8, \"core-context-menu\");\n                core[\"Ec\" /* ɵɵelementStart */](9, \"core-context-menu-item\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener($event) { return ctx.doRefresh(undefined, $event, true); });\n                core[\"Pc\" /* ɵɵpipe */](10, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](11, \"core-context-menu-item\", 6);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener() { return ctx.openEdit(); });\n                core[\"Pc\" /* ɵɵpipe */](12, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"core-context-menu-item\", 7);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener() { return ctx.deleteEvent(); });\n                core[\"Pc\" /* ɵɵpipe */](14, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](15, \"core-context-menu-item\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener() { return ctx.undoDelete(); });\n                core[\"Pc\" /* ɵɵpipe */](16, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](17, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](18, \"ion-refresher\", 9);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener($event) { return ctx.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](19, \"ion-refresher-content\", 10);\n                core[\"Pc\" /* ɵɵpipe */](20, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](21, \"core-loading\", 11);\n                core[\"nd\" /* ɵɵtemplate */](22, AddonCalendarEventPage_ion_card_22_Template, 7, 8, \"ion-card\", 12);\n                core[\"nd\" /* ɵɵtemplate */](23, AddonCalendarEventPage_ion_list_23_Template, 32, 31, \"ion-list\", 3);\n                core[\"nd\" /* ɵɵtemplate */](24, AddonCalendarEventPage_ion_card_24_Template, 8, 5, \"ion-card\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 22, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.event);\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.eventLoaded || !ctx.hasOffline && ctx.event && !ctx.event.deleted || !ctx.isOnline)(\"priority\", 400)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](10, 24, \"core.settings.synchronizenow\"))(\"iconAction\", ctx.syncIcon)(\"closeOnClick\", false);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.event || !ctx.event.canedit || ctx.event.deleted || !ctx.canEdit && ctx.event.id > 0)(\"priority\", 300)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](12, 26, \"core.edit\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.event || !ctx.event.candelete || ctx.event.deleted)(\"priority\", 200)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](14, 28, \"core.delete\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.event || !ctx.event.deleted)(\"priority\", 200)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](16, 30, \"core.restore\"));\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.eventLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](20, 32, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.eventLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.hasOffline || ctx.event && ctx.event.deleted);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.event);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.notificationsEnabled && ctx.event);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], collapsible_header[\"b\" /* CoreCollapsibleHeaderDirective */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], common[\"t\" /* NgIf */], context_menu[\"a\" /* CoreContextMenuComponent */], context_menu_item[\"a\" /* CoreContextMenuItemComponent */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], format_text[\"a\" /* CoreFormatTextDirective */], ionic_angular[\"n\" /* IonCard */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], ionic_angular[\"O\" /* IonLabel */], ionic_angular[\"P\" /* IonList */], common[\"q\" /* NgClass */], mod_icon[\"a\" /* CoreModIconComponent */], ionic_angular[\"W\" /* IonNote */], directives_link[\"a\" /* CoreLinkDirective */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], common[\"s\" /* NgForOf */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], styles: [\"[_nghost-%COMP%]{--addon-calendar-blank-day-background-color:var(--light)}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:.7rem;--margin-vertical:12px;--margin-end:12px;margin-top:var(--margin-vertical);margin-bottom:var(--margin-vertical);margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#8e24aa}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#ca3120}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#f0ad4e}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#0f6cbf}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#357a32}\", \"[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1.6rem}\"] });\n    return AddonCalendarEventPage;\n})();\n\n// CONCATENATED MODULE: ./src/addons/calendar/pages/event/event.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: event_page_AddonCalendarEventPage,\n    },\n];\nlet event_module_AddonCalendarEventPageModule = /*@__PURE__*/ (() => {\n    class AddonCalendarEventPageModule {\n    }\n    AddonCalendarEventPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonCalendarEventPageModule });\n    AddonCalendarEventPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonCalendarEventPageModule_Factory(t) { return new (t || AddonCalendarEventPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* AddonCalendarComponentsModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return AddonCalendarEventPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](event_module_AddonCalendarEventPageModule, { declarations: [event_page_AddonCalendarEventPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* AddonCalendarComponentsModule */]], exports: [router[\"m\" /* RouterModule */]] });\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}