{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{\"Yxj/\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"CoreCommentsViewerPageModule\",(function(){return F}));var o=n(\"tyNb\"),i=n(\"L3Fv\"),s=n(\"mrSG\"),a=n(\"fjkH\"),c=n(\"MUy3\"),r=n(\"9+EE\"),m=n(\"5pQw\"),d=n(\"kQNd\"),l=n(\"TEn/\"),g=n(\"BaYo\"),h=n(\"pHTc\"),_=n(\"j3ag\"),C=n(\"bFG1\"),u=n(\"3LXp\"),f=n(\"4pns\"),p=n(\"vuGA\"),P=n(\"93ts\"),b=n(\"rdx0\"),O=n(\"Q98t\"),w=n(\"nvXB\"),v=n(\"wd/R\"),M=n.n(v),I=n(\"fXoL\"),x=n(\"hMzs\"),D=n(\"ofXK\"),y=n(\"fQ68\"),V=n(\"8/N+\"),E=n(\"nt/U\"),T=n(\"PgjG\"),k=n(\"xpMl\"),L=n(\"ACYt\"),N=n(\"3CSS\"),A=n(\"r8G5\"),z=n(\"FeAf\"),S=n(\"O4u7\"),U=n(\"sYmb\"),R=n(\"uYHD\");function CoreCommentsViewerPage_ion_button_9_Template(e,t){if(1&e){const e=I.Fc();I.Ec(0,\"ion-button\",15),I.Mc(\"click\",(function CoreCommentsViewerPage_ion_button_9_Template_ion_button_click_0_listener(){I.fd(e);return I.Oc().toggleDelete()})),I.Pc(1,\"translate\"),I.zc(2,\"ion-icon\",16),I.Dc()}2&e&&I.mc(\"aria-label\",I.Qc(1,1,\"core.toggledelete\"))}function CoreCommentsViewerPage_core_empty_box_20_Template(e,t){1&e&&(I.zc(0,\"core-empty-box\",17),I.Pc(1,\"translate\")),2&e&&I.Vc(\"message\",I.Qc(1,1,\"core.comments.nocomments\"))}function CoreCommentsViewerPage_ng_container_23_p_1_Template(e,t){if(1&e&&(I.Ec(0,\"p\",25),I.pd(1),I.Pc(2,\"coreFormatDate\"),I.Dc()),2&e){const e=I.Oc().$implicit;I.lc(1),I.rd(\" \",I.Rc(2,1,1e3*e.timecreated,\"strftimedayshort\"),\" \")}}function CoreCommentsViewerPage_ng_container_23_h2_4_Template(e,t){if(1&e&&(I.Ec(0,\"h2\",26),I.zc(1,\"core-user-avatar\",27),I.Ec(2,\"div\"),I.pd(3),I.Dc(),I.Dc()),2&e){const e=I.Oc().$implicit;I.lc(1),I.Vc(\"user\",e)(\"linkProfile\",!1),I.lc(2),I.qd(e.fullname)}}function CoreCommentsViewerPage_ng_container_23_ng_container_8_Template(e,t){if(1&e&&(I.Cc(0),I.pd(1),I.Pc(2,\"coreFormatDate\"),I.Bc()),2&e){const e=I.Oc().$implicit;I.lc(1),I.rd(\" \",I.Rc(2,1,1e3*e.timecreated,\"strftimetime\"),\" \")}}function CoreCommentsViewerPage_ng_container_23_ng_container_9_Template(e,t){1&e&&(I.Cc(0),I.zc(1,\"ion-icon\",28),I.Ec(2,\"span\",29),I.pd(3),I.Pc(4,\"translate\"),I.Dc(),I.Bc()),2&e&&(I.lc(3),I.rd(\" \",I.Qc(4,1,\"core.deletedoffline\"),\" \"))}function CoreCommentsViewerPage_ng_container_23_div_10_Template(e,t){1&e&&I.zc(0,\"div\",30)}function CoreCommentsViewerPage_ng_container_23_ion_button_11_Template(e,t){if(1&e){const e=I.Fc();I.Ec(0,\"ion-button\",31),I.Mc(\"click\",(function CoreCommentsViewerPage_ng_container_23_ion_button_11_Template_ion_button_click_0_listener(t){I.fd(e);const n=I.Oc().$implicit;return I.Oc().deleteComment(t,n)})),I.Pc(1,\"translate\"),I.zc(2,\"ion-icon\",32),I.Dc()}2&e&&(I.Vc(\"@coreSlideInOut\",\"fromRight\"),I.mc(\"aria-label\",I.Qc(1,2,\"core.delete\")))}function CoreCommentsViewerPage_ng_container_23_ion_button_12_Template(e,t){if(1&e){const e=I.Fc();I.Ec(0,\"ion-button\",31),I.Mc(\"click\",(function CoreCommentsViewerPage_ng_container_23_ion_button_12_Template_ion_button_click_0_listener(t){I.fd(e);const n=I.Oc().$implicit;return I.Oc().undoDeleteComment(t,n)})),I.Pc(1,\"translate\"),I.zc(2,\"ion-icon\",33),I.Dc()}2&e&&I.mc(\"aria-label\",I.Qc(1,1,\"core.restore\"))}function CoreCommentsViewerPage_ng_container_23_Template(e,t){if(1&e&&(I.Cc(0),I.nd(1,CoreCommentsViewerPage_ng_container_23_p_1_Template,3,4,\"p\",18),I.Ec(2,\"ion-item\",19),I.Ec(3,\"ion-label\"),I.nd(4,CoreCommentsViewerPage_ng_container_23_h2_4_Template,4,3,\"h2\",20),I.Ec(5,\"div\",21),I.zc(6,\"core-format-text\",2),I.Dc(),I.Dc(),I.Ec(7,\"ion-note\",3),I.nd(8,CoreCommentsViewerPage_ng_container_23_ng_container_8_Template,3,4,\"ng-container\",22),I.nd(9,CoreCommentsViewerPage_ng_container_23_ng_container_9_Template,5,3,\"ng-container\",22),I.Dc(),I.nd(10,CoreCommentsViewerPage_ng_container_23_div_10_Template,1,0,\"div\",23),I.nd(11,CoreCommentsViewerPage_ng_container_23_ion_button_11_Template,3,4,\"ion-button\",24),I.nd(12,CoreCommentsViewerPage_ng_container_23_ion_button_12_Template,3,3,\"ion-button\",24),I.Dc(),I.Bc()),2&e){const e=t.$implicit,n=I.Oc();I.lc(1),I.Vc(\"ngIf\",e.showDate),I.lc(1),I.qc(\"addon-message-mine\",e.userid==n.currentUserId)(\"addon-message-not-mine\",e.userid!=n.currentUserId)(\"addon-message-no-user\",!e.showUserData),I.Vc(\"@coreSlideInOut\",e.userid==n.currentUserId?\"\":\"fromLeft\"),I.lc(2),I.Vc(\"ngIf\",e.showUserData),I.lc(2),I.Vc(\"text\",e.content)(\"contextLevel\",n.contextLevel)(\"contextInstanceId\",n.instanceId)(\"courseId\",n.courseId),I.lc(2),I.Vc(\"ngIf\",!e.deleted),I.lc(1),I.Vc(\"ngIf\",e.deleted),I.lc(1),I.Vc(\"ngIf\",e.showTail),I.lc(1),I.Vc(\"ngIf\",n.showDelete&&!e.deleted&&e.delete),I.lc(1),I.Vc(\"ngIf\",n.showDelete&&e.deleted)}}function CoreCommentsViewerPage_ion_item_24_ion_button_15_Template(e,t){if(1&e){const e=I.Fc();I.Ec(0,\"ion-button\",31),I.Mc(\"click\",(function CoreCommentsViewerPage_ion_item_24_ion_button_15_Template_ion_button_click_0_listener(t){I.fd(e);const n=I.Oc(2);return n.deleteComment(t,n.offlineComment)})),I.Pc(1,\"translate\"),I.zc(2,\"ion-icon\",32),I.Dc()}2&e&&(I.Vc(\"@coreSlideInOut\",\"fromRight\"),I.mc(\"aria-label\",I.Qc(1,2,\"core.delete\")))}const _c0=function(e){return{$a:e}};function CoreCommentsViewerPage_ion_item_24_Template(e,t){if(1&e&&(I.Ec(0,\"ion-item\",34),I.Ec(1,\"ion-label\"),I.Ec(2,\"p\",35),I.zc(3,\"ion-icon\",36),I.pd(4),I.Pc(5,\"translate\"),I.Pc(6,\"lowercase\"),I.Pc(7,\"translate\"),I.Dc(),I.Ec(8,\"div\",21),I.zc(9,\"core-format-text\",2),I.Dc(),I.Dc(),I.Ec(10,\"ion-note\"),I.zc(11,\"ion-icon\",37),I.pd(12),I.Pc(13,\"translate\"),I.Dc(),I.zc(14,\"div\",30),I.nd(15,CoreCommentsViewerPage_ion_item_24_ion_button_15_Template,3,4,\"ion-button\",24),I.Dc()),2&e){const e=I.Oc();I.lc(4),I.rd(\" \",I.Rc(5,7,\"core.thereisdatatosync\",I.ad(16,_c0,I.Qc(6,10,I.Qc(7,12,\"core.comments.comments\")))),\" \"),I.lc(5),I.Vc(\"text\",e.offlineComment.content)(\"contextLevel\",e.contextLevel)(\"contextInstanceId\",e.instanceId)(\"courseId\",e.courseId),I.lc(3),I.rd(\" \",I.Qc(13,14,\"core.notsent\"),\" \"),I.lc(3),I.Vc(\"ngIf\",e.showDelete)}}function CoreCommentsViewerPage_ion_footer_25_Template(e,t){if(1&e){const e=I.Fc();I.Ec(0,\"ion-footer\",38),I.Ec(1,\"ion-toolbar\",39),I.Ec(2,\"core-send-message-form\",40),I.Mc(\"onSubmit\",(function CoreCommentsViewerPage_ion_footer_25_Template_core_send_message_form_onSubmit_2_listener(t){I.fd(e);return I.Oc().addComment(t)})),I.Pc(3,\"translate\"),I.Dc(),I.Dc(),I.Dc()}if(2&e){const e=I.Oc();I.lc(2),I.Vc(\"sendDisabled\",e.sending)(\"message\",e.newComment)(\"placeholder\",I.Qc(3,3,\"core.comments.addcomment\"))}}let Q=(()=>{class CoreCommentsViewerPage{constructor(e){this.route=e,this.comments=[],this.commentsLoaded=!1,this.itemId=0,this.area=\"\",this.page=0,this.title=\"\",this.canLoadMore=!1,this.loadMoreError=!1,this.canAddComments=!1,this.canDeleteComments=!1,this.showDelete=!1,this.hasOffline=!1,this.refreshIcon=g.a.ICON_LOADING,this.syncIcon=g.a.ICON_LOADING,this.sending=!1,this.newComment=\"\",this.addDeleteCommentsAvailable=!1,this.viewDestroyed=!1,this.currentUserId=r.b.getCurrentSiteUserId(),this.syncObserver=a.b.on(d.b.AUTO_SYNCED,(e=>{e.contextLevel==this.contextLevel&&e.instanceId==this.instanceId&&e.componentName==this.componentName&&e.itemId==this.itemId&&e.area==this.area&&(this.showSyncWarnings(e.warnings),this.commentsLoaded=!1,this.refreshIcon=g.a.ICON_LOADING,this.syncIcon=g.a.ICON_LOADING,this.page=0,this.comments=[],this.fetchComments(!1))}),r.b.getCurrentSiteId()),this.isOnline=w.a.isOnline(),this.onlineObserver=_.B.onChange().subscribe((()=>{_.C.run((()=>{this.isOnline=w.a.isOnline()}))}))}ngOnInit(){return Object(s.a)(this,void 0,void 0,(function*(){try{this.contextLevel=h.a.getRequiredRouteParam(\"contextLevel\"),this.instanceId=h.a.getRequiredRouteNumberParam(\"instanceId\"),this.componentName=h.a.getRequiredRouteParam(\"componentName\"),this.itemId=h.a.getRequiredRouteNumberParam(\"itemId\"),this.area=h.a.getRouteParam(\"area\")||\"\",this.title=h.a.getRouteNumberParam(\"title\")||_.M.instant(\"core.comments.comments\"),this.courseId=h.a.getRouteNumberParam(\"courseId\")}catch(e){return u.a.showErrorModal(e),h.a.back(),void 0}this.addDeleteCommentsAvailable=yield m.a.isAddCommentsAvailable(),this.currentUserId=r.b.getCurrentSiteUserId(),this.commentsLoaded=!1,yield this.fetchComments(!0)}))}fetchComments(e,t=!1){return Object(s.a)(this,void 0,void 0,(function*(){this.loadMoreError=!1,e&&(yield C.a.ignoreErrors(this.syncComments(t)));try{const e=yield m.a.getComments(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area,this.page);this.canAddComments=this.addDeleteCommentsAvailable&&!!e.canpost;let t=e.comments.sort(((e,t)=>e.timecreated-t.timecreated));this.canLoadMore=void 0!==e.count?this.comments.length+t.length<e.count:e.comments.length>0&&e.comments.length>=m.b.pageSize,t=yield Promise.all(t.map((e=>this.loadCommentProfile(e)))),this.comments=t.concat(this.comments),this.comments.forEach(((e,t)=>{e.showDate=this.showDate(e,this.comments[t-1]),e.showUserData=this.showUserData(e,this.comments[t-1]),e.showTail=this.showTail(e,this.comments[t+1])})),this.canDeleteComments=this.addDeleteCommentsAvailable&&(this.hasOffline||this.comments.some((e=>!!e.delete))),yield this.loadOfflineData()}catch(e){this.loadMoreError=!0,e&&\"assignsubmission_comments\"==this.componentName?u.a.showAlertTranslated(\"core.notice\",\"core.comments.commentsnotworking\"):u.a.showErrorModalDefault(e,_.M.instant(\"core.error\")+\": get_comments\")}finally{this.commentsLoaded=!0,this.refreshIcon=g.a.ICON_REFRESH,this.syncIcon=g.a.ICON_SYNC,0==this.page&&this.scrollToBottom()}}))}loadPrevious(e){return this.page++,this.canLoadMore=!1,this.fetchComments(!0).finally((()=>{e&&e()}))}refreshComments(e,t){return Object(s.a)(this,void 0,void 0,(function*(){this.commentsLoaded=!1,this.refreshIcon=g.a.ICON_LOADING,this.syncIcon=g.a.ICON_LOADING;try{yield this.invalidateComments()}finally{this.page=0,this.comments=[];try{yield this.fetchComments(!0,e)}finally{null==t?void 0:t.complete()}}}))}showSyncWarnings(e){const t=p.a.buildMessage(e);t&&u.a.showErrorModal(t)}syncComments(e){return Object(s.a)(this,void 0,void 0,(function*(){try{const e=yield d.a.syncComments(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area);this.showSyncWarnings((null==e?void 0:e.warnings)||[])}catch(t){throw e&&u.a.showErrorModalDefault(t,\"core.errorsync\",!0),new P.a(t)}}))}addComment(e){return Object(s.a)(this,void 0,void 0,(function*(){w.a.closeKeyboard();const t=yield u.a.showModalLoading(\"core.sending\",!0);this.sending=!0;try{const n=yield m.a.addComment(e,this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area);if(u.a.showToast(n?\"core.comments.eventcommentcreated\":\"core.datastoredoffline\",!0,3e3),n){this.invalidateComments();const e=yield this.loadCommentProfile(n);e.showDate=this.showDate(e,this.comments[this.comments.length-1]),e.showUserData=this.showUserData(e,this.comments[this.comments.length-1]),e.showTail=this.showTail(e,this.comments[this.comments.length+1]),this.comments=this.comments.concat([e]),this.canDeleteComments=this.addDeleteCommentsAvailable,a.b.trigger(m.b.COMMENTS_COUNT_CHANGED_EVENT,{contextLevel:this.contextLevel,instanceId:this.instanceId,component:this.componentName,itemId:this.itemId,area:this.area,countChange:1},r.b.getCurrentSiteId())}else!1===n&&(yield this.loadOfflineData())}catch(e){u.a.showErrorModal(e)}finally{t.dismiss(),this.sending=!1,this.scrollToBottom()}}))}deleteComment(e,t){return Object(s.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();const n=O.a.userDate(1e3*(\"lastmodified\"in t?t.lastmodified:t.timecreated),\"core.strftimerecentfull\"),o={contextlevel:this.contextLevel,instanceid:this.instanceId,component:this.componentName,itemid:this.itemId,area:this.area,content:t.content,id:\"id\"in t?t.id:void 0};try{yield u.a.showDeleteConfirm(\"core.comments.deletecommentbyon\",{$a:{user:t.fullname||\"\",time:n}})}catch(e){return}try{const e=yield m.a.deleteComment(o);if(this.showDelete=!1,e&&\"id\"in t){const e=this.comments.findIndex((e=>e.id==t.id));e>=0&&(this.comments.splice(e,1),a.b.trigger(m.b.COMMENTS_COUNT_CHANGED_EVENT,{contextLevel:this.contextLevel,instanceId:this.instanceId,component:this.componentName,itemId:this.itemId,area:this.area,countChange:-1},r.b.getCurrentSiteId()))}else this.loadOfflineData();this.invalidateComments(),u.a.showToast(\"core.comments.eventcommentdeleted\",!0,3e3)}catch(e){u.a.showErrorModalDefault(e,\"Delete comment failed.\")}}))}invalidateComments(){return m.a.invalidateCommentsData(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area)}loadCommentProfile(e){return Object(s.a)(this,void 0,void 0,(function*(){try{const t=yield f.a.getProfile(e.userid,void 0,!0);e.profileimageurl=t.profileimageurl,e.fullname=t.fullname}catch(e){}return e}))}showUserData(e,t){return!(e.userid==this.currentUserId||t&&t.userid==e.userid&&!e.showDate)}showTail(e,t){return!t||t.userid!=e.userid||!!t.showDate}showDate(e,t){return!t||!M()(1e3*e.timecreated).isSame(1e3*t.timecreated,\"day\")}loadOfflineData(){return Object(s.a)(this,void 0,void 0,(function*(){const e=[];let t=!1;e.push(b.a.getComment(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area).then((e=>Object(s.a)(this,void 0,void 0,(function*(){this.offlineComment=e,e&&(\"\"==this.newComment&&(this.newComment=this.offlineComment.content),this.offlineComment.userid=this.currentUserId)}))))),e.push(b.a.getDeletedComments(this.contextLevel,this.instanceId,this.componentName,this.itemId,this.area).then((e=>{t=e&&e.length>0,t&&e.forEach((e=>{const t=this.comments.find((t=>t.id==e.commentid));t&&(t.deleted=!!e.deleted)}))}))),yield Promise.all(e),this.hasOffline=!!this.offlineComment||t}))}undoDeleteComment(e,t){return Object(s.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation(),yield b.a.undoDeleteComment(t.id),t.deleted=!1,this.showDelete=!1}))}scrollToBottom(){setTimeout((()=>{var e;this.viewDestroyed||(null===(e=this.content)||void 0===e?void 0:e.scrollToBottom())}),100)}toggleDelete(){this.showDelete=!this.showDelete}ngOnDestroy(){var e;null===(e=this.syncObserver)||void 0===e?void 0:e.off(),this.onlineObserver.unsubscribe(),this.viewDestroyed=!0}}return CoreCommentsViewerPage.ɵfac=function CoreCommentsViewerPage_Factory(e){return new(e||CoreCommentsViewerPage)(I.yc(o.a))},CoreCommentsViewerPage.ɵcmp=I.sc({type:CoreCommentsViewerPage,selectors:[[\"page-core-comments-viewer\"]],viewQuery:function CoreCommentsViewerPage_Query(e,t){var n;(1&e&&I.ud(l.v,!0),2&e)&&(I.dd(n=I.Nc())&&(t.content=n.first))},decls:26,vars:33,consts:[[\"slot\",\"start\"],[3,\"text\"],[3,\"text\",\"contextLevel\",\"contextInstanceId\",\"courseId\"],[\"slot\",\"end\"],[\"slot\",\"end\",\"fill\",\"clear\",3,\"click\",4,\"ngIf\"],[3,\"hidden\",\"priority\",\"content\",\"iconAction\",\"closeOnClick\",\"action\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[\"icon\",\"fas-comments\",3,\"message\",4,\"ngIf\"],[\"position\",\"top\",3,\"enabled\",\"error\",\"action\"],[1,\"addon-messages-discussion-container\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"ion-text-wrap addon-message addon-message-mine\",4,\"ngIf\"],[\"class\",\"footer-adjustable\",4,\"ngIf\"],[\"slot\",\"end\",\"fill\",\"clear\",3,\"click\"],[\"name\",\"fas-pen\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"],[\"icon\",\"fas-comments\",3,\"message\"],[\"class\",\"ion-text-center addon-messages-date\",4,\"ngIf\"],[1,\"ion-text-wrap\",\"addon-message\"],[\"class\",\"addon-message-user\",4,\"ngIf\"],[1,\"addon-message-text\"],[4,\"ngIf\"],[\"class\",\"tail\",4,\"ngIf\"],[\"slot\",\"end\",\"fill\",\"clear\",\"color\",\"danger\",\"class\",\"addon-messages-delete-button\",3,\"click\",4,\"ngIf\"],[1,\"ion-text-center\",\"addon-messages-date\"],[1,\"addon-message-user\"],[\"slot\",\"start\",3,\"user\",\"linkProfile\"],[\"name\",\"fas-trash\",\"aria-hidden\",\"true\"],[1,\"ion-text-wrap\"],[1,\"tail\"],[\"slot\",\"end\",\"fill\",\"clear\",\"color\",\"danger\",1,\"addon-messages-delete-button\",3,\"click\"],[\"name\",\"fas-trash\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"],[\"name\",\"fas-undo-alt\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"],[1,\"ion-text-wrap\",\"addon-message\",\"addon-message-mine\"],[1,\"ion-text-center\"],[\"name\",\"fas-exclamation-triangle\",\"aria-hidden\",\"true\"],[\"name\",\"fas-clock\",\"aria-hidden\",\"true\"],[1,\"footer-adjustable\"],[\"color\",\"contrast\"],[3,\"sendDisabled\",\"message\",\"placeholder\",\"onSubmit\"]],template:function CoreCommentsViewerPage_Template(e,t){1&e&&(I.Ec(0,\"ion-header\"),I.Ec(1,\"ion-toolbar\"),I.Ec(2,\"ion-buttons\",0),I.zc(3,\"ion-back-button\",1),I.Pc(4,\"translate\"),I.Dc(),I.Ec(5,\"ion-title\"),I.Ec(6,\"h1\"),I.zc(7,\"core-format-text\",2),I.Dc(),I.Dc(),I.Ec(8,\"ion-buttons\",3),I.nd(9,CoreCommentsViewerPage_ion_button_9_Template,3,3,\"ion-button\",4),I.Ec(10,\"core-context-menu\"),I.Ec(11,\"core-context-menu-item\",5),I.Mc(\"action\",(function CoreCommentsViewerPage_Template_core_context_menu_item_action_11_listener(){return t.refreshComments(!1)})),I.Pc(12,\"translate\"),I.Dc(),I.Ec(13,\"core-context-menu-item\",5),I.Mc(\"action\",(function CoreCommentsViewerPage_Template_core_context_menu_item_action_13_listener(){return t.refreshComments(!0)})),I.Pc(14,\"translate\"),I.Dc(),I.Dc(),I.Dc(),I.Dc(),I.Dc(),I.Ec(15,\"ion-content\"),I.Ec(16,\"ion-refresher\",6),I.Mc(\"ionRefresh\",(function CoreCommentsViewerPage_Template_ion_refresher_ionRefresh_16_listener(e){return t.refreshComments(!1,e.target)})),I.zc(17,\"ion-refresher-content\",7),I.Pc(18,\"translate\"),I.Dc(),I.Ec(19,\"core-loading\",8),I.nd(20,CoreCommentsViewerPage_core_empty_box_20_Template,2,3,\"core-empty-box\",9),I.Ec(21,\"core-infinite-loading\",10),I.Mc(\"action\",(function CoreCommentsViewerPage_Template_core_infinite_loading_action_21_listener(e){return t.loadPrevious(e)})),I.Dc(),I.Ec(22,\"ion-list\",11),I.nd(23,CoreCommentsViewerPage_ng_container_23_Template,13,18,\"ng-container\",12),I.nd(24,CoreCommentsViewerPage_ion_item_24_Template,16,18,\"ion-item\",13),I.Dc(),I.Dc(),I.Dc(),I.nd(25,CoreCommentsViewerPage_ion_footer_25_Template,4,5,\"ion-footer\",14)),2&e&&(I.lc(3),I.Vc(\"text\",I.Qc(4,25,\"core.back\")),I.lc(4),I.Vc(\"text\",t.title)(\"contextLevel\",t.contextLevel)(\"contextInstanceId\",t.instanceId)(\"courseId\",t.courseId),I.lc(2),I.Vc(\"ngIf\",t.canDeleteComments),I.lc(2),I.Vc(\"hidden\",!(t.commentsLoaded&&!t.hasOffline))(\"priority\",100)(\"content\",I.Qc(12,27,\"core.refresh\"))(\"iconAction\",t.refreshIcon)(\"closeOnClick\",!0),I.lc(2),I.Vc(\"hidden\",!(t.commentsLoaded&&t.hasOffline&&t.isOnline))(\"priority\",100)(\"content\",I.Qc(14,29,\"core.settings.synchronizenow\"))(\"iconAction\",t.syncIcon)(\"closeOnClick\",!1),I.lc(3),I.Vc(\"disabled\",!t.commentsLoaded),I.lc(1),I.Wc(\"pullingText\",I.Qc(18,31,\"core.pulltorefresh\")),I.lc(2),I.Vc(\"hideUntil\",t.commentsLoaded),I.lc(1),I.Vc(\"ngIf\",!(null!=t.comments&&t.comments.length||t.offlineComment)),I.lc(1),I.Vc(\"enabled\",t.canLoadMore)(\"error\",t.loadMoreError),I.lc(2),I.Vc(\"ngForOf\",t.comments),I.lc(1),I.Vc(\"ngIf\",t.offlineComment),I.lc(1),I.Vc(\"ngIf\",t.commentsLoaded&&t.canAddComments))},directives:[l.C,l.Ab,l.m,l.h,l.i,l.yb,x.a,D.t,y.a,V.a,E.a,l.v,l.bb,l.cb,T.a,k.a,l.P,D.s,L.a,l.l,l.D,N.a,A.a,l.I,l.O,l.W,z.a,l.A,S.a],pipes:[U.d,R.a,D.p],styles:['.ios[_nghost-%COMP%]   ion-footer[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]:last-child, .ios   [_nghost-%COMP%]   ion-footer[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]:last-child{padding-bottom:4px;min-height:0}ion-content[_ngcontent-%COMP%]{--content-background:var(--background-alternative);--background:var(--content-background)}ion-content[_ngcontent-%COMP%]::part(scroll){padding-bottom:0!important}.addon-messages-discussion-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:16px!important;background:var(--content-background)}.addon-messages-date[_ngcontent-%COMP%]{font-weight:400;font-size:.9rem}ion-item.addon-message[_ngcontent-%COMP%]{--message-background:var(--addon-messages-message-bg);--message-activated-background:var(--addon-messages-message-activated-bg);--message-alignment:flex-start;border:0;border-radius:var(--medium-radius);padding:0 8px;margin:8px;--background:var(--message-background);background:var(--message-background);align-self:var(--message-alignment);width:90%;max-width:var(--list-item-max-width);--min-height:var(--a11y-min-target-size);position:relative;transition:width .5s ease-in-out;overflow:visible}ion-item.addon-message[_ngcontent-%COMP%]::part(native){--inner-border-width:0px;--inner-padding-end:0px;padding:0;margin:0}ion-item.addon-message[_ngcontent-%COMP%]:hover{filter:drop-shadow(2px 2px 2px rgba(0,0,0,.3))}ion-item.addon-message[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:only-child{display:inline}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-user[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:.5rem;margin-top:0;color:var(--ion-text-color)}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-user[_ngcontent-%COMP%]   core-user-avatar[_ngcontent-%COMP%]{display:block;--core-avatar-size:var(--addon-messages-avatar-size);margin:0}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-user[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:500;flex-grow:1;padding-left:.5rem;padding-right:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ion-item.addon-message[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{color:var(--addon-messages-message-note-text);font-size:var(--addon-messages-message-note-font-size);margin:0;padding:8px 0;align-self:flex-start}ion-item.addon-message[tappable][_ngcontent-%COMP%]:active{--message-background:var(--message-activated-background)}ion-item.addon-message[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;padding:8px 0}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-text[_ngcontent-%COMP%]{display:inline-flex}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--ion-text-color)}ion-item.addon-message[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{content:\"\";width:0;height:0;position:absolute;touch-action:none;bottom:0;border:.5rem solid transparent;border-bottom:.5rem solid var(--message-background)}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]{--message-background:var(--addon-messages-message-mine-bg);--message-activated-background:var(--addon-messages-message-mine-activated-bg);--message-alignment:flex-end}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{float:right;margin:2px -3px -2px 5px}[dir=rtl][_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{float:left}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:5px;margin-inline-start:5px;-webkit-margin-end:-3px;margin-inline-end:-3px}}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{right:-8px;margin-right:-.5rem}[dir=rtl][_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{left:unset;right:unset;left:-8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:-.5rem;margin-inline-end:-.5rem}}ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{left:-8px;margin-left:-.5rem}[dir=rtl][_nghost-%COMP%]   ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{left:unset;right:unset;right:-8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{margin-left:unset;-webkit-margin-start:-.5rem;margin-inline-start:-.5rem}}ion-item.addon-message[_ngcontent-%COMP%]   .addon-messages-delete-button[_ngcontent-%COMP%]{min-height:0;line-height:normal;margin-top:0;margin-bottom:0;height:var(--a11y-min-target-size)!important;align-self:flex-end}ion-item.addon-message[_ngcontent-%COMP%]   .addon-messages-delete-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4em;line-height:normal;color:var(--danger)}ion-item.addon-message.addon-message-no-user[_ngcontent-%COMP%]{margin-top:0}'],data:{animation:[c.a.SLIDE_IN_OUT]}}),CoreCommentsViewerPage})();const j=[{path:\"\",component:Q}];let F=(()=>{class CoreCommentsViewerPageModule{}return CoreCommentsViewerPageModule.ɵmod=I.wc({type:CoreCommentsViewerPageModule}),CoreCommentsViewerPageModule.ɵinj=I.vc({factory:function CoreCommentsViewerPageModule_Factory(e){return new(e||CoreCommentsViewerPageModule)},imports:[[o.m.forChild(j),i.a],o.m]}),CoreCommentsViewerPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&I.kd(F,{declarations:[Q],imports:[o.m,i.a],exports:[o.m]}))}}]);","name":"90.aad2dfb4c6152f3040b9.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[90],{\n\n/***/ \"Yxj/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"CoreCommentsViewerPageModule\", function() { return /* binding */ viewer_module_CoreCommentsViewerPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 14 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/core/components/animations.ts\nvar animations = __webpack_require__(\"MUy3\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/features/comments/services/comments.ts\nvar services_comments = __webpack_require__(\"5pQw\");\n\n// EXTERNAL MODULE: ./src/core/features/comments/services/comments-sync.ts\nvar comments_sync = __webpack_require__(\"kQNd\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/constants.ts\nvar constants = __webpack_require__(\"BaYo\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/features/user/services/user.ts\nvar services_user = __webpack_require__(\"4pns\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/text.ts + 1 modules\nvar utils_text = __webpack_require__(\"vuGA\");\n\n// EXTERNAL MODULE: ./src/core/classes/errors/error.ts\nvar errors_error = __webpack_require__(\"93ts\");\n\n// EXTERNAL MODULE: ./src/core/features/comments/services/comments-offline.ts\nvar comments_offline = __webpack_require__(\"rdx0\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/time.ts\nvar utils_time = __webpack_require__(\"Q98t\");\n\n// EXTERNAL MODULE: ./src/core/services/app.ts + 1 modules\nvar app = __webpack_require__(\"nvXB\");\n\n// EXTERNAL MODULE: ./node_modules/moment/moment.js\nvar moment = __webpack_require__(\"wd/R\");\nvar moment_default = /*#__PURE__*/__webpack_require__.n(moment);\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js + 4 modules\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu.ts + 4 modules\nvar context_menu = __webpack_require__(\"fQ68\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu-item.ts\nvar context_menu_item = __webpack_require__(\"8/N+\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/components/infinite-loading/infinite-loading.ts\nvar infinite_loading = __webpack_require__(\"xpMl\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/components/empty-box/empty-box.ts\nvar empty_box = __webpack_require__(\"r8G5\");\n\n// EXTERNAL MODULE: ./src/core/components/user-avatar/user-avatar.ts\nvar user_avatar = __webpack_require__(\"FeAf\");\n\n// EXTERNAL MODULE: ./src/core/components/send-message-form/send-message-form.ts\nvar send_message_form = __webpack_require__(\"O4u7\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// EXTERNAL MODULE: ./src/core/pipes/format-date.ts\nvar format_date = __webpack_require__(\"uYHD\");\n\n// CONCATENATED MODULE: ./src/core/features/comments/pages/viewer/viewer.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction CoreCommentsViewerPage_ion_button_9_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r6 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 15);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreCommentsViewerPage_ion_button_9_Template_ion_button_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r6); const ctx_r5 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r5.toggleDelete(); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 16);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"core.toggledelete\"));\n    }\n}\nfunction CoreCommentsViewerPage_core_empty_box_20_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-empty-box\", 17);\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"message\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"core.comments.nocomments\"));\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_p_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"p\", 25);\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Pc\" /* ɵɵpipe */](2, \"coreFormatDate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const comment_r7 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Rc\" /* ɵɵpipeBind2 */](2, 1, comment_r7.timecreated * 1000, \"strftimedayshort\"), \" \");\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_h2_4_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"h2\", 26);\n        core[\"zc\" /* ɵɵelement */](1, \"core-user-avatar\", 27);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"div\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const comment_r7 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"user\", comment_r7)(\"linkProfile\", false);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"qd\" /* ɵɵtextInterpolate */](comment_r7.fullname);\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_ng_container_8_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Pc\" /* ɵɵpipe */](2, \"coreFormatDate\");\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const comment_r7 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Rc\" /* ɵɵpipeBind2 */](2, 1, comment_r7.timecreated * 1000, \"strftimetime\"), \" \");\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_ng_container_9_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"zc\" /* ɵɵelement */](1, \"ion-icon\", 28);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"span\", 29);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](4, 1, \"core.deletedoffline\"), \" \");\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_div_10_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"div\", 30);\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_ion_button_11_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r21 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 31);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreCommentsViewerPage_ng_container_23_ion_button_11_Template_ion_button_click_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r21); const comment_r7 = core[\"Oc\" /* ɵɵnextContext */]().$implicit; const ctx_r20 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r20.deleteComment($event, comment_r7); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 32);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"@coreSlideInOut\", \"fromRight\");\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 2, \"core.delete\"));\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_ion_button_12_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r24 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 31);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreCommentsViewerPage_ng_container_23_ion_button_12_Template_ion_button_click_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r24); const comment_r7 = core[\"Oc\" /* ɵɵnextContext */]().$implicit; const ctx_r23 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r23.undoDeleteComment($event, comment_r7); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 33);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"core.restore\"));\n    }\n}\nfunction CoreCommentsViewerPage_ng_container_23_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, CoreCommentsViewerPage_ng_container_23_p_1_Template, 3, 4, \"p\", 18);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-item\", 19);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"nd\" /* ɵɵtemplate */](4, CoreCommentsViewerPage_ng_container_23_h2_4_Template, 4, 3, \"h2\", 20);\n        core[\"Ec\" /* ɵɵelementStart */](5, \"div\", 21);\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 2);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](7, \"ion-note\", 3);\n        core[\"nd\" /* ɵɵtemplate */](8, CoreCommentsViewerPage_ng_container_23_ng_container_8_Template, 3, 4, \"ng-container\", 22);\n        core[\"nd\" /* ɵɵtemplate */](9, CoreCommentsViewerPage_ng_container_23_ng_container_9_Template, 5, 3, \"ng-container\", 22);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](10, CoreCommentsViewerPage_ng_container_23_div_10_Template, 1, 0, \"div\", 23);\n        core[\"nd\" /* ɵɵtemplate */](11, CoreCommentsViewerPage_ng_container_23_ion_button_11_Template, 3, 4, \"ion-button\", 24);\n        core[\"nd\" /* ɵɵtemplate */](12, CoreCommentsViewerPage_ng_container_23_ion_button_12_Template, 3, 3, \"ion-button\", 24);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const comment_r7 = ctx.$implicit;\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", comment_r7.showDate);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qc\" /* ɵɵclassProp */](\"addon-message-mine\", comment_r7.userid == ctx_r2.currentUserId)(\"addon-message-not-mine\", comment_r7.userid != ctx_r2.currentUserId)(\"addon-message-no-user\", !comment_r7.showUserData);\n        core[\"Vc\" /* ɵɵproperty */](\"@coreSlideInOut\", comment_r7.userid == ctx_r2.currentUserId ? \"\" : \"fromLeft\");\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", comment_r7.showUserData);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", comment_r7.content)(\"contextLevel\", ctx_r2.contextLevel)(\"contextInstanceId\", ctx_r2.instanceId)(\"courseId\", ctx_r2.courseId);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !comment_r7.deleted);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", comment_r7.deleted);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", comment_r7.showTail);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.showDelete && !comment_r7.deleted && comment_r7.delete);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.showDelete && comment_r7.deleted);\n    }\n}\nfunction CoreCommentsViewerPage_ion_item_24_ion_button_15_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r28 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 31);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreCommentsViewerPage_ion_item_24_ion_button_15_Template_ion_button_click_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r28); const ctx_r27 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r27.deleteComment($event, ctx_r27.offlineComment); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 32);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"@coreSlideInOut\", \"fromRight\");\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 2, \"core.delete\"));\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction CoreCommentsViewerPage_ion_item_24_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 34);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"p\", 35);\n        core[\"zc\" /* ɵɵelement */](3, \"ion-icon\", 36);\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Pc\" /* ɵɵpipe */](6, \"lowercase\");\n        core[\"Pc\" /* ɵɵpipe */](7, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](8, \"div\", 21);\n        core[\"zc\" /* ɵɵelement */](9, \"core-format-text\", 2);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](10, \"ion-note\");\n        core[\"zc\" /* ɵɵelement */](11, \"ion-icon\", 37);\n        core[\"pd\" /* ɵɵtext */](12);\n        core[\"Pc\" /* ɵɵpipe */](13, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"zc\" /* ɵɵelement */](14, \"div\", 30);\n        core[\"nd\" /* ɵɵtemplate */](15, CoreCommentsViewerPage_ion_item_24_ion_button_15_Template, 3, 4, \"ion-button\", 24);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Rc\" /* ɵɵpipeBind2 */](5, 7, \"core.thereisdatatosync\", core[\"ad\" /* ɵɵpureFunction1 */](16, _c0, core[\"Qc\" /* ɵɵpipeBind1 */](6, 10, core[\"Qc\" /* ɵɵpipeBind1 */](7, 12, \"core.comments.comments\")))), \" \");\n        core[\"lc\" /* ɵɵadvance */](5);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r3.offlineComment.content)(\"contextLevel\", ctx_r3.contextLevel)(\"contextInstanceId\", ctx_r3.instanceId)(\"courseId\", ctx_r3.courseId);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](13, 14, \"core.notsent\"), \" \");\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r3.showDelete);\n    }\n}\nfunction CoreCommentsViewerPage_ion_footer_25_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r30 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-footer\", 38);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\", 39);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"core-send-message-form\", 40);\n        core[\"Mc\" /* ɵɵlistener */](\"onSubmit\", function CoreCommentsViewerPage_ion_footer_25_Template_core_send_message_form_onSubmit_2_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r30); const ctx_r29 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r29.addComment($event); });\n        core[\"Pc\" /* ɵɵpipe */](3, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r4 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"sendDisabled\", ctx_r4.sending)(\"message\", ctx_r4.newComment)(\"placeholder\", core[\"Qc\" /* ɵɵpipeBind1 */](3, 3, \"core.comments.addcomment\"));\n    }\n}\n/**\n * Page that displays comments.\n */\nlet viewer_page_CoreCommentsViewerPage = /*@__PURE__*/ (() => {\n    class CoreCommentsViewerPage {\n        constructor(route) {\n            this.route = route;\n            this.comments = [];\n            this.commentsLoaded = false;\n            this.itemId = 0;\n            this.area = '';\n            this.page = 0;\n            this.title = '';\n            this.canLoadMore = false;\n            this.loadMoreError = false;\n            this.canAddComments = false;\n            this.canDeleteComments = false;\n            this.showDelete = false;\n            this.hasOffline = false;\n            this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n            this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n            this.sending = false;\n            this.newComment = '';\n            this.addDeleteCommentsAvailable = false;\n            this.viewDestroyed = false;\n            this.currentUserId = sites[\"b\" /* CoreSites */].getCurrentSiteUserId();\n            // Refresh data if comments are synchronized automatically.\n            this.syncObserver = events[\"b\" /* CoreEvents */].on(comments_sync[\"b\" /* CoreCommentsSyncProvider */].AUTO_SYNCED, (data) => {\n                if (data.contextLevel == this.contextLevel && data.instanceId == this.instanceId &&\n                    data.componentName == this.componentName && data.itemId == this.itemId && data.area == this.area) {\n                    // Show the sync warnings.\n                    this.showSyncWarnings(data.warnings);\n                    // Refresh the data.\n                    this.commentsLoaded = false;\n                    this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                    this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                    this.page = 0;\n                    this.comments = [];\n                    this.fetchComments(false);\n                }\n            }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n            this.isOnline = app[\"a\" /* CoreApp */].isOnline();\n            this.onlineObserver = singletons[\"B\" /* Network */].onChange().subscribe(() => {\n                // Execute the callback in the Angular zone, so change detection doesn't stop working.\n                singletons[\"C\" /* NgZone */].run(() => {\n                    this.isOnline = app[\"a\" /* CoreApp */].isOnline();\n                });\n            });\n        }\n        /**\n         * View loaded.\n         */\n        ngOnInit() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    this.contextLevel = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteParam('contextLevel');\n                    this.instanceId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('instanceId');\n                    this.componentName = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteParam('componentName');\n                    this.itemId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('itemId');\n                    this.area = services_navigator[\"a\" /* CoreNavigator */].getRouteParam('area') || '';\n                    this.title = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('title') ||\n                        singletons[\"M\" /* Translate */].instant('core.comments.comments');\n                    this.courseId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('courseId');\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                    services_navigator[\"a\" /* CoreNavigator */].back();\n                    return;\n                }\n                // Is implicit the user can delete if he can add.\n                this.addDeleteCommentsAvailable = yield services_comments[\"a\" /* CoreComments */].isAddCommentsAvailable();\n                this.currentUserId = sites[\"b\" /* CoreSites */].getCurrentSiteUserId();\n                this.commentsLoaded = false;\n                yield this.fetchComments(true);\n            });\n        }\n        /**\n         * Fetches the comments.\n         *\n         * @param sync When to resync comments.\n         * @param showErrors When to display errors or not.\n         * @return Resolved when done.\n         */\n        fetchComments(sync, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.loadMoreError = false;\n                if (sync) {\n                    yield utils[\"a\" /* CoreUtils */].ignoreErrors(this.syncComments(showErrors));\n                }\n                try {\n                    // Get comments data.\n                    const commentsResponse = yield services_comments[\"a\" /* CoreComments */].getComments(this.contextLevel, this.instanceId, this.componentName, this.itemId, this.area, this.page);\n                    this.canAddComments = this.addDeleteCommentsAvailable && !!commentsResponse.canpost;\n                    let comments = commentsResponse.comments.sort((a, b) => a.timecreated - b.timecreated);\n                    if (commentsResponse.count !== undefined) {\n                        this.canLoadMore = (this.comments.length + comments.length) < commentsResponse.count;\n                    }\n                    else {\n                        // Old style.\n                        this.canLoadMore = commentsResponse.comments.length > 0 &&\n                            commentsResponse.comments.length >= services_comments[\"b\" /* CoreCommentsProvider */].pageSize;\n                    }\n                    comments = yield Promise.all(comments.map((comment) => this.loadCommentProfile(comment)));\n                    this.comments = comments.concat(this.comments);\n                    this.comments.forEach((comment, index) => {\n                        comment.showDate = this.showDate(comment, this.comments[index - 1]);\n                        comment.showUserData = this.showUserData(comment, this.comments[index - 1]);\n                        comment.showTail = this.showTail(comment, this.comments[index + 1]);\n                    });\n                    this.canDeleteComments = this.addDeleteCommentsAvailable &&\n                        (this.hasOffline || this.comments.some((comment) => !!comment.delete));\n                    yield this.loadOfflineData();\n                }\n                catch (error) {\n                    this.loadMoreError = true; // Set to prevent infinite calls with infinite-loading.\n                    if (error && this.componentName == 'assignsubmission_comments') {\n                        dom[\"a\" /* CoreDomUtils */].showAlertTranslated('core.notice', 'core.comments.commentsnotworking');\n                    }\n                    else {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, singletons[\"M\" /* Translate */].instant('core.error') + ': get_comments');\n                    }\n                }\n                finally {\n                    this.commentsLoaded = true;\n                    this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_REFRESH;\n                    this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_SYNC;\n                    if (this.page == 0) {\n                        this.scrollToBottom();\n                    }\n                }\n            });\n        }\n        /**\n         * Function to load more commemts.\n         *\n         * @param infiniteComplete Infinite scroll complete function. Only used from core-infinite-loading.\n         * @return Resolved when done.\n         */\n        loadPrevious(infiniteComplete) {\n            this.page++;\n            this.canLoadMore = false;\n            return this.fetchComments(true).finally(() => {\n                infiniteComplete && infiniteComplete();\n            });\n        }\n        /**\n         * Refresh the comments.\n         *\n         * @param showErrors Whether to display errors or not.\n         * @param refresher Refresher.\n         * @return Resolved when done.\n         */\n        refreshComments(showErrors, refresher) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.commentsLoaded = false;\n                this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                try {\n                    yield this.invalidateComments();\n                }\n                finally {\n                    this.page = 0;\n                    this.comments = [];\n                    try {\n                        yield this.fetchComments(true, showErrors);\n                    }\n                    finally {\n                        refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n                    }\n                }\n            });\n        }\n        /**\n         * Show sync warnings if any.\n         *\n         * @param warnings the warnings\n         */\n        showSyncWarnings(warnings) {\n            const message = utils_text[\"a\" /* CoreTextUtils */].buildMessage(warnings);\n            if (message) {\n                dom[\"a\" /* CoreDomUtils */].showErrorModal(message);\n            }\n        }\n        /**\n         * Tries to synchronize comments.\n         *\n         * @param showErrors Whether to display errors or not.\n         * @return Promise resolved if sync is successful, rejected otherwise.\n         */\n        syncComments(showErrors) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const result = yield comments_sync[\"a\" /* CoreCommentsSync */].syncComments(this.contextLevel, this.instanceId, this.componentName, this.itemId, this.area);\n                    this.showSyncWarnings((result === null || result === void 0 ? void 0 : result.warnings) || []);\n                }\n                catch (error) {\n                    if (showErrors) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.errorsync', true);\n                    }\n                    throw new errors_error[\"a\" /* CoreError */](error);\n                }\n            });\n        }\n        /**\n         * Send the comment or store it offline.\n         *\n         * @param text Comment text to add.\n         */\n        addComment(text) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                app[\"a\" /* CoreApp */].closeKeyboard();\n                const loadingModal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                // Freeze the add comment button.\n                this.sending = true;\n                try {\n                    const commentsResponse = yield services_comments[\"a\" /* CoreComments */].addComment(text, this.contextLevel, this.instanceId, this.componentName, this.itemId, this.area);\n                    dom[\"a\" /* CoreDomUtils */].showToast(commentsResponse ? 'core.comments.eventcommentcreated' : 'core.datastoredoffline', true, 3000);\n                    if (commentsResponse) {\n                        this.invalidateComments();\n                        const addedComments = yield this.loadCommentProfile(commentsResponse);\n                        addedComments.showDate = this.showDate(addedComments, this.comments[this.comments.length - 1]);\n                        addedComments.showUserData = this.showUserData(addedComments, this.comments[this.comments.length - 1]);\n                        addedComments.showTail = this.showTail(addedComments, this.comments[this.comments.length + 1]);\n                        // Add the comment to the top.\n                        this.comments = this.comments.concat([addedComments]);\n                        this.canDeleteComments = this.addDeleteCommentsAvailable;\n                        events[\"b\" /* CoreEvents */].trigger(services_comments[\"b\" /* CoreCommentsProvider */].COMMENTS_COUNT_CHANGED_EVENT, {\n                            contextLevel: this.contextLevel,\n                            instanceId: this.instanceId,\n                            component: this.componentName,\n                            itemId: this.itemId,\n                            area: this.area,\n                            countChange: 1,\n                        }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    }\n                    else if (commentsResponse === false) {\n                        // Comments added in offline mode.\n                        yield this.loadOfflineData();\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                }\n                finally {\n                    loadingModal.dismiss();\n                    this.sending = false;\n                    // New comments.\n                    this.scrollToBottom();\n                }\n            });\n        }\n        /**\n         * Delete a comment.\n         *\n         * @param e Click event.\n         * @param comment Comment to delete.\n         */\n        deleteComment(e, comment) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                e.preventDefault();\n                e.stopPropagation();\n                const modified = 'lastmodified' in comment\n                    ? comment.lastmodified\n                    : comment.timecreated;\n                const time = utils_time[\"a\" /* CoreTimeUtils */].userDate(modified * 1000, 'core.strftimerecentfull');\n                const deleteComment = {\n                    contextlevel: this.contextLevel,\n                    instanceid: this.instanceId,\n                    component: this.componentName,\n                    itemid: this.itemId,\n                    area: this.area,\n                    content: comment.content,\n                    id: 'id' in comment ? comment.id : undefined,\n                };\n                try {\n                    yield dom[\"a\" /* CoreDomUtils */].showDeleteConfirm('core.comments.deletecommentbyon', {\n                        $a: { user: comment.fullname || '', time: time },\n                    });\n                }\n                catch (_a) {\n                    // User cancelled, nothing to do.\n                    return;\n                }\n                try {\n                    const deletedOnline = yield services_comments[\"a\" /* CoreComments */].deleteComment(deleteComment);\n                    this.showDelete = false;\n                    if (deletedOnline && 'id' in comment) {\n                        const index = this.comments.findIndex((commentinList) => commentinList.id == comment.id);\n                        if (index >= 0) {\n                            this.comments.splice(index, 1);\n                            events[\"b\" /* CoreEvents */].trigger(services_comments[\"b\" /* CoreCommentsProvider */].COMMENTS_COUNT_CHANGED_EVENT, {\n                                contextLevel: this.contextLevel,\n                                instanceId: this.instanceId,\n                                component: this.componentName,\n                                itemId: this.itemId,\n                                area: this.area,\n                                countChange: -1,\n                            }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                        }\n                    }\n                    else {\n                        this.loadOfflineData();\n                    }\n                    this.invalidateComments();\n                    dom[\"a\" /* CoreDomUtils */].showToast('core.comments.eventcommentdeleted', true, 3000);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Delete comment failed.');\n                }\n            });\n        }\n        /**\n         * Invalidate comments.\n         *\n         * @return Resolved when done.\n         */\n        invalidateComments() {\n            return services_comments[\"a\" /* CoreComments */].invalidateCommentsData(this.contextLevel, this.instanceId, this.componentName, this.itemId, this.area);\n        }\n        /**\n         * Loads the profile info onto the comment object.\n         *\n         * @param comment Comment object.\n         * @return Promise resolved with modified comment when done.\n         */\n        loadCommentProfile(comment) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                // Get the user profile image.\n                try {\n                    const user = yield services_user[\"a\" /* CoreUser */].getProfile(comment.userid, undefined, true);\n                    comment.profileimageurl = user.profileimageurl;\n                    comment.fullname = user.fullname;\n                }\n                catch (_a) {\n                    // Ignore errors.\n                }\n                return comment;\n            });\n        }\n        /**\n         * Check if the user info should be displayed for the current message.\n         * User data is only displayed if the previous message was from another user.\n         *\n         * @param comment Comment object.\n         * @param prevComment Previous comment object.\n         * @return Whether user data should be shown.\n         */\n        showUserData(comment, prevComment) {\n            return comment.userid != this.currentUserId && (!prevComment || prevComment.userid != comment.userid || !!comment.showDate);\n        }\n        /**\n         * Check if a css tail should be shown.\n         *\n         * @param comment Comment object.\n         * @param nextComment Previous comment object.\n         * @return Whether user data should be shown.\n         */\n        showTail(comment, nextComment) {\n            return !nextComment || nextComment.userid != comment.userid || !!nextComment.showDate;\n        }\n        /**\n         * Check if the date should be displayed between messages (when the day changes at midnight for example).\n         *\n         * @param comment Comment object.\n         * @param prevComment Previous comment object.\n         * @return True if messages are from diferent days, false othetwise.\n         */\n        showDate(comment, prevComment) {\n            if (!prevComment) {\n                return true;\n            }\n            // Check if day has changed.\n            return !moment_default()(comment.timecreated * 1000).isSame(prevComment.timecreated * 1000, 'day');\n        }\n        /**\n         * Load offline comments.\n         *\n         * @return Promise resolved when done.\n         */\n        loadOfflineData() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const promises = [];\n                let hasDeletedComments = false;\n                // Load the only offline comment allowed if any.\n                promises.push(comments_offline[\"a\" /* CoreCommentsOffline */].getComment(this.contextLevel, this.instanceId, this.componentName, this.itemId, this.area).then((offlineComment) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                    this.offlineComment = offlineComment;\n                    if (!offlineComment) {\n                        return;\n                    }\n                    if (this.newComment == '') {\n                        this.newComment = this.offlineComment.content;\n                    }\n                    this.offlineComment.userid = this.currentUserId;\n                    return;\n                })));\n                // Load deleted comments offline.\n                promises.push(comments_offline[\"a\" /* CoreCommentsOffline */].getDeletedComments(this.contextLevel, this.instanceId, this.componentName, this.itemId, this.area).then((deletedComments) => {\n                    hasDeletedComments = deletedComments && deletedComments.length > 0;\n                    if (hasDeletedComments) {\n                        deletedComments.forEach((deletedComment) => {\n                            const comment = this.comments.find((comment) => comment.id == deletedComment.commentid);\n                            if (comment) {\n                                comment.deleted = !!deletedComment.deleted;\n                            }\n                        });\n                    }\n                    return;\n                }));\n                yield Promise.all(promises);\n                this.hasOffline = !!this.offlineComment || hasDeletedComments;\n            });\n        }\n        /**\n         * Restore a comment.\n         *\n         * @param e Click event.\n         * @param comment Comment to delete.\n         */\n        undoDeleteComment(e, comment) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                e.preventDefault();\n                e.stopPropagation();\n                yield comments_offline[\"a\" /* CoreCommentsOffline */].undoDeleteComment(comment.id);\n                comment.deleted = false;\n                this.showDelete = false;\n            });\n        }\n        /**\n         * Scroll bottom when render has finished.\n         */\n        scrollToBottom() {\n            // Need a timeout to leave time to the view to be rendered.\n            setTimeout(() => {\n                var _a;\n                if (!this.viewDestroyed) {\n                    (_a = this.content) === null || _a === void 0 ? void 0 : _a.scrollToBottom();\n                }\n            }, 100);\n        }\n        /**\n         * Toggle delete.\n         */\n        toggleDelete() {\n            this.showDelete = !this.showDelete;\n        }\n        /**\n         * Page destroyed.\n         */\n        ngOnDestroy() {\n            var _a;\n            (_a = this.syncObserver) === null || _a === void 0 ? void 0 : _a.off();\n            this.onlineObserver.unsubscribe();\n            this.viewDestroyed = true;\n        }\n    }\n    CoreCommentsViewerPage.ɵfac = function CoreCommentsViewerPage_Factory(t) { return new (t || CoreCommentsViewerPage)(core[\"yc\" /* ɵɵdirectiveInject */](router[\"a\" /* ActivatedRoute */])); };\n    CoreCommentsViewerPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: CoreCommentsViewerPage, selectors: [[\"page-core-comments-viewer\"]], viewQuery: function CoreCommentsViewerPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](ionic_angular[\"v\" /* IonContent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.content = _t.first);\n            }\n        }, decls: 26, vars: 33, consts: [[\"slot\", \"start\"], [3, \"text\"], [3, \"text\", \"contextLevel\", \"contextInstanceId\", \"courseId\"], [\"slot\", \"end\"], [\"slot\", \"end\", \"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [3, \"hidden\", \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"icon\", \"fas-comments\", 3, \"message\", 4, \"ngIf\"], [\"position\", \"top\", 3, \"enabled\", \"error\", \"action\"], [1, \"addon-messages-discussion-container\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"ion-text-wrap addon-message addon-message-mine\", 4, \"ngIf\"], [\"class\", \"footer-adjustable\", 4, \"ngIf\"], [\"slot\", \"end\", \"fill\", \"clear\", 3, \"click\"], [\"name\", \"fas-pen\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"icon\", \"fas-comments\", 3, \"message\"], [\"class\", \"ion-text-center addon-messages-date\", 4, \"ngIf\"], [1, \"ion-text-wrap\", \"addon-message\"], [\"class\", \"addon-message-user\", 4, \"ngIf\"], [1, \"addon-message-text\"], [4, \"ngIf\"], [\"class\", \"tail\", 4, \"ngIf\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", \"class\", \"addon-messages-delete-button\", 3, \"click\", 4, \"ngIf\"], [1, \"ion-text-center\", \"addon-messages-date\"], [1, \"addon-message-user\"], [\"slot\", \"start\", 3, \"user\", \"linkProfile\"], [\"name\", \"fas-trash\", \"aria-hidden\", \"true\"], [1, \"ion-text-wrap\"], [1, \"tail\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", 1, \"addon-messages-delete-button\", 3, \"click\"], [\"name\", \"fas-trash\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"fas-undo-alt\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [1, \"ion-text-wrap\", \"addon-message\", \"addon-message-mine\"], [1, \"ion-text-center\"], [\"name\", \"fas-exclamation-triangle\", \"aria-hidden\", \"true\"], [\"name\", \"fas-clock\", \"aria-hidden\", \"true\"], [1, \"footer-adjustable\"], [\"color\", \"contrast\"], [3, \"sendDisabled\", \"message\", \"placeholder\", \"onSubmit\"]], template: function CoreCommentsViewerPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"zc\" /* ɵɵelement */](7, \"core-format-text\", 2);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](8, \"ion-buttons\", 3);\n                core[\"nd\" /* ɵɵtemplate */](9, CoreCommentsViewerPage_ion_button_9_Template, 3, 3, \"ion-button\", 4);\n                core[\"Ec\" /* ɵɵelementStart */](10, \"core-context-menu\");\n                core[\"Ec\" /* ɵɵelementStart */](11, \"core-context-menu-item\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function CoreCommentsViewerPage_Template_core_context_menu_item_action_11_listener() { return ctx.refreshComments(false); });\n                core[\"Pc\" /* ɵɵpipe */](12, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"core-context-menu-item\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function CoreCommentsViewerPage_Template_core_context_menu_item_action_13_listener() { return ctx.refreshComments(true); });\n                core[\"Pc\" /* ɵɵpipe */](14, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](15, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](16, \"ion-refresher\", 6);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function CoreCommentsViewerPage_Template_ion_refresher_ionRefresh_16_listener($event) { return ctx.refreshComments(false, $event.target); });\n                core[\"zc\" /* ɵɵelement */](17, \"ion-refresher-content\", 7);\n                core[\"Pc\" /* ɵɵpipe */](18, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](19, \"core-loading\", 8);\n                core[\"nd\" /* ɵɵtemplate */](20, CoreCommentsViewerPage_core_empty_box_20_Template, 2, 3, \"core-empty-box\", 9);\n                core[\"Ec\" /* ɵɵelementStart */](21, \"core-infinite-loading\", 10);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function CoreCommentsViewerPage_Template_core_infinite_loading_action_21_listener($event) { return ctx.loadPrevious($event); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](22, \"ion-list\", 11);\n                core[\"nd\" /* ɵɵtemplate */](23, CoreCommentsViewerPage_ng_container_23_Template, 13, 18, \"ng-container\", 12);\n                core[\"nd\" /* ɵɵtemplate */](24, CoreCommentsViewerPage_ion_item_24_Template, 16, 18, \"ion-item\", 13);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"nd\" /* ɵɵtemplate */](25, CoreCommentsViewerPage_ion_footer_25_Template, 4, 5, \"ion-footer\", 14);\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 25, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", ctx.title)(\"contextLevel\", ctx.contextLevel)(\"contextInstanceId\", ctx.instanceId)(\"courseId\", ctx.courseId);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.canDeleteComments);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !(ctx.commentsLoaded && !ctx.hasOffline))(\"priority\", 100)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](12, 27, \"core.refresh\"))(\"iconAction\", ctx.refreshIcon)(\"closeOnClick\", true);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !(ctx.commentsLoaded && ctx.hasOffline && ctx.isOnline))(\"priority\", 100)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](14, 29, \"core.settings.synchronizenow\"))(\"iconAction\", ctx.syncIcon)(\"closeOnClick\", false);\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.commentsLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](18, 31, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.commentsLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !(ctx.comments == null ? null : ctx.comments.length) && !ctx.offlineComment);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"enabled\", ctx.canLoadMore)(\"error\", ctx.loadMoreError);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx.comments);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.offlineComment);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.commentsLoaded && ctx.canAddComments);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], format_text[\"a\" /* CoreFormatTextDirective */], common[\"t\" /* NgIf */], context_menu[\"a\" /* CoreContextMenuComponent */], context_menu_item[\"a\" /* CoreContextMenuItemComponent */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], infinite_loading[\"a\" /* CoreInfiniteLoadingComponent */], ionic_angular[\"P\" /* IonList */], common[\"s\" /* NgForOf */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], empty_box[\"a\" /* CoreEmptyBoxComponent */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"O\" /* IonLabel */], ionic_angular[\"W\" /* IonNote */], user_avatar[\"a\" /* CoreUserAvatarComponent */], ionic_angular[\"A\" /* IonFooter */], send_message_form[\"a\" /* CoreSendMessageFormComponent */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */], format_date[\"a\" /* CoreFormatDatePipe */], common[\"p\" /* LowerCasePipe */]], styles: [\".ios[_nghost-%COMP%]   ion-footer[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]:last-child, .ios   [_nghost-%COMP%]   ion-footer[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]:last-child{padding-bottom:4px;min-height:0}ion-content[_ngcontent-%COMP%]{--content-background:var(--background-alternative);--background:var(--content-background)}ion-content[_ngcontent-%COMP%]::part(scroll){padding-bottom:0!important}.addon-messages-discussion-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-bottom:16px!important;background:var(--content-background)}.addon-messages-date[_ngcontent-%COMP%]{font-weight:400;font-size:.9rem}ion-item.addon-message[_ngcontent-%COMP%]{--message-background:var(--addon-messages-message-bg);--message-activated-background:var(--addon-messages-message-activated-bg);--message-alignment:flex-start;border:0;border-radius:var(--medium-radius);padding:0 8px;margin:8px;--background:var(--message-background);background:var(--message-background);align-self:var(--message-alignment);width:90%;max-width:var(--list-item-max-width);--min-height:var(--a11y-min-target-size);position:relative;transition:width .5s ease-in-out;overflow:visible}ion-item.addon-message[_ngcontent-%COMP%]::part(native){--inner-border-width:0px;--inner-padding-end:0px;padding:0;margin:0}ion-item.addon-message[_ngcontent-%COMP%]:hover{filter:drop-shadow(2px 2px 2px rgba(0,0,0,.3))}ion-item.addon-message[_ngcontent-%COMP%]   core-format-text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:only-child{display:inline}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-user[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:.5rem;margin-top:0;color:var(--ion-text-color)}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-user[_ngcontent-%COMP%]   core-user-avatar[_ngcontent-%COMP%]{display:block;--core-avatar-size:var(--addon-messages-avatar-size);margin:0}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-user[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:500;flex-grow:1;padding-left:.5rem;padding-right:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ion-item.addon-message[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{color:var(--addon-messages-message-note-text);font-size:var(--addon-messages-message-note-font-size);margin:0;padding:8px 0;align-self:flex-start}ion-item.addon-message[tappable][_ngcontent-%COMP%]:active{--message-background:var(--message-activated-background)}ion-item.addon-message[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;padding:8px 0}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-text[_ngcontent-%COMP%]{display:inline-flex}ion-item.addon-message[_ngcontent-%COMP%]   .addon-message-text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:var(--ion-text-color)}ion-item.addon-message[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{content:\\\"\\\";width:0;height:0;position:absolute;touch-action:none;bottom:0;border:.5rem solid transparent;border-bottom:.5rem solid var(--message-background)}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]{--message-background:var(--addon-messages-message-mine-bg);--message-activated-background:var(--addon-messages-message-mine-activated-bg);--message-alignment:flex-end}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{float:right;margin:2px -3px -2px 5px}[dir=rtl][_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{float:left}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:5px;margin-inline-start:5px;-webkit-margin-end:-3px;margin-inline-end:-3px}}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{right:-8px;margin-right:-.5rem}[dir=rtl][_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{left:unset;right:unset;left:-8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item.addon-message.addon-message-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:-.5rem;margin-inline-end:-.5rem}}ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{left:-8px;margin-left:-.5rem}[dir=rtl][_nghost-%COMP%]   ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{left:unset;right:unset;right:-8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item.addon-message.addon-message-not-mine[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{margin-left:unset;-webkit-margin-start:-.5rem;margin-inline-start:-.5rem}}ion-item.addon-message[_ngcontent-%COMP%]   .addon-messages-delete-button[_ngcontent-%COMP%]{min-height:0;line-height:normal;margin-top:0;margin-bottom:0;height:var(--a11y-min-target-size)!important;align-self:flex-end}ion-item.addon-message[_ngcontent-%COMP%]   .addon-messages-delete-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4em;line-height:normal;color:var(--danger)}ion-item.addon-message.addon-message-no-user[_ngcontent-%COMP%]{margin-top:0}\"], data: { animation: [animations[\"a\" /* CoreAnimations */].SLIDE_IN_OUT] } });\n    return CoreCommentsViewerPage;\n})();\n\n// CONCATENATED MODULE: ./src/core/features/comments/pages/viewer/viewer.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: viewer_page_CoreCommentsViewerPage,\n    },\n];\nlet viewer_module_CoreCommentsViewerPageModule = /*@__PURE__*/ (() => {\n    class CoreCommentsViewerPageModule {\n    }\n    CoreCommentsViewerPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: CoreCommentsViewerPageModule });\n    CoreCommentsViewerPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function CoreCommentsViewerPageModule_Factory(t) { return new (t || CoreCommentsViewerPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return CoreCommentsViewerPageModule;\n})();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](viewer_module_CoreCommentsViewerPageModule, { declarations: [viewer_page_CoreCommentsViewerPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */]], exports: [router[\"m\" /* RouterModule */]] }); })();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}