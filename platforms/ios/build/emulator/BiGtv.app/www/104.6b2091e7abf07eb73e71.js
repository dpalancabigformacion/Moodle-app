(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{aDgO:function(o,e,r){"use strict";r.r(e),r.d(e,"CoreLoginForgottenPasswordPageModule",(function(){return F}));var t=r("tyNb"),a=r("L3Fv"),n=r("mrSG"),s=r("3Pt+"),i=r("3LXp"),c=r("mv9v"),l=r("j3ag"),d=r("pHTc"),u=r("4reR"),g=r("fXoL"),m=r("TEn/"),P=r("nt/U"),p=r("6uVz"),w=r("ACYt"),f=r("sYmb");const b=["resetPasswordForm"];let h=(()=>{class CoreLoginForgottenPasswordPage{constructor(o){this.formBuilder=o}ngOnInit(){const o=d.a.getRouteParam("siteUrl");if(!o)return i.a.showErrorModal("Site URL not supplied."),d.a.back(),void 0;this.siteUrl=o,this.autoFocus=l.D.is("tablet"),this.myForm=this.formBuilder.group({field:["username",s.F.required],value:[d.a.getRouteParam("username")||"",s.F.required]})}resetPassword(o){return Object(n.a)(this,void 0,void 0,(function*(){o.preventDefault(),o.stopPropagation();const e=this.myForm.value.field,r=this.myForm.value.value;if(!r)return i.a.showErrorModal("core.login.usernameoremail",!0),void 0;const t=yield i.a.showModalLoading("core.sending",!0),a="email"==e;try{const o=yield c.a.requestPasswordReset(this.siteUrl,a?"":r,a?r:"");"dataerror"==o.status?this.showError(a,o.warnings):"emailpasswordconfirmnotsent"==o.status||"emailpasswordconfirmnoemail"==o.status?i.a.showErrorModal(o.notice):(u.a.triggerFormSubmittedEvent(this.formElement,!0),i.a.showAlert(l.M.instant("core.success"),o.notice),d.a.back())}catch(o){i.a.showErrorModal(o)}finally{t.dismiss()}}))}showError(o,e){for(let r=0;r<e.length;r++){const t=e[r];if("email"==t.item&&o||"username"==t.item&&!o){i.a.showErrorModal(t.message);break}}}}return CoreLoginForgottenPasswordPage.ɵfac=function CoreLoginForgottenPasswordPage_Factory(o){return new(o||CoreLoginForgottenPasswordPage)(g.yc(s.f))},CoreLoginForgottenPasswordPage.ɵcmp=g.sc({type:CoreLoginForgottenPasswordPage,selectors:[["page-core-login-forgotten-password"]],viewQuery:function CoreLoginForgottenPasswordPage_Query(o,e){var r;(1&o&&g.ud(b,!0),2&o)&&(g.dd(r=g.Nc())&&(e.formElement=r.first))},decls:44,vars:30,consts:[["slot","start"],[3,"text"],[1,"list-item-limited-width"],[1,"ion-text-wrap"],[3,"formGroup","ngSubmit"],["resetPasswordForm",""],["formControlName","field"],["slot","end","value","username"],["slot","end","value","email"],[1,"sr-only"],["type","text","name","value","formControlName","value","autocapitalize","none","autocorrect","off",3,"placeholder","core-auto-focus"],["type","submit","expand","block",1,"ion-margin",3,"disabled"]],template:function CoreLoginForgottenPasswordPage_Template(o,e){1&o&&(g.Ec(0,"ion-header"),g.Ec(1,"ion-toolbar"),g.Ec(2,"ion-buttons",0),g.zc(3,"ion-back-button",1),g.Pc(4,"translate"),g.Dc(),g.Ec(5,"ion-title"),g.Ec(6,"h1"),g.pd(7),g.Pc(8,"translate"),g.Dc(),g.Dc(),g.Dc(),g.Dc(),g.Ec(9,"ion-content"),g.Ec(10,"div",2),g.Ec(11,"ion-list"),g.Ec(12,"ion-item",3),g.Ec(13,"ion-label"),g.pd(14),g.Pc(15,"translate"),g.Dc(),g.Dc(),g.Dc(),g.Ec(16,"ion-card"),g.Ec(17,"form",4,5),g.Mc("ngSubmit",(function CoreLoginForgottenPasswordPage_Template_form_ngSubmit_17_listener(o){return e.resetPassword(o)})),g.Ec(19,"ion-item-divider",3),g.Ec(20,"ion-label"),g.Ec(21,"h2"),g.pd(22),g.Pc(23,"translate"),g.Dc(),g.Dc(),g.Dc(),g.Ec(24,"ion-radio-group",6),g.Ec(25,"ion-item"),g.Ec(26,"ion-label"),g.pd(27),g.Pc(28,"translate"),g.Dc(),g.zc(29,"ion-radio",7),g.Dc(),g.Ec(30,"ion-item"),g.Ec(31,"ion-label"),g.pd(32),g.Pc(33,"translate"),g.Dc(),g.zc(34,"ion-radio",8),g.Dc(),g.Dc(),g.Ec(35,"ion-item"),g.Ec(36,"ion-label",9),g.pd(37),g.Pc(38,"translate"),g.Dc(),g.zc(39,"ion-input",10),g.Pc(40,"translate"),g.Dc(),g.Ec(41,"ion-button",11),g.pd(42),g.Pc(43,"translate"),g.Dc(),g.Dc(),g.Dc(),g.Dc(),g.Dc()),2&o&&(g.lc(3),g.Vc("text",g.Qc(4,12,"core.back")),g.lc(4),g.qd(g.Qc(8,14,"core.login.passwordforgotten")),g.lc(7),g.qd(g.Qc(15,16,"core.login.passwordforgotteninstructions2")),g.lc(3),g.Vc("formGroup",e.myForm),g.lc(5),g.qd(g.Qc(23,18,"core.login.searchby")),g.lc(5),g.qd(g.Qc(28,20,"core.login.username")),g.lc(5),g.qd(g.Qc(33,22,"core.user.email")),g.lc(5),g.qd(g.Qc(38,24,"core.login.usernameoremail")),g.lc(2),g.Wc("placeholder",g.Qc(40,26,"core.login.usernameoremail")),g.Vc("core-auto-focus",e.autoFocus),g.lc(2),g.Vc("disabled",!e.myForm.valid),g.lc(1),g.rd(" ",g.Qc(43,28,"core.courses.search")," "))},directives:[m.C,m.Ab,m.m,m.h,m.i,m.yb,P.a,m.v,m.P,m.I,m.O,m.n,s.H,s.s,s.k,m.J,m.Z,m.Ob,s.r,s.i,m.Y,m.Mb,m.H,m.Pb,p.a,w.a,m.l],pipes:[f.d],encapsulation:2}),CoreLoginForgottenPasswordPage})();const E=[{path:"",component:h}];let F=(()=>{class CoreLoginForgottenPasswordPageModule{}return CoreLoginForgottenPasswordPageModule.ɵmod=g.wc({type:CoreLoginForgottenPasswordPageModule}),CoreLoginForgottenPasswordPageModule.ɵinj=g.vc({factory:function CoreLoginForgottenPasswordPageModule_Factory(o){return new(o||CoreLoginForgottenPasswordPageModule)},imports:[[t.m.forChild(E),a.a],t.m]}),CoreLoginForgottenPasswordPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&g.kd(F,{declarations:[h],imports:[t.m,a.a],exports:[t.m]}))}}]);