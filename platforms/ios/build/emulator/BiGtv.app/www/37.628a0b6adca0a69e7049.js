(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"LfF/":function(e,n,t){"use strict";t.r(n),t.d(n,"AddonCalendarEventPageModule",(function(){return z}));var i=t("tyNb"),o=t("L3Fv"),c=t("9Xwr"),a=t("mrSG"),d=t("SmTL"),r=t("n6RP"),l=t("Lc7R"),s=t("+lfu"),_=t("nvXB"),v=t("fjkH"),h=t("3LXp"),m=t("vuGA"),u=t("9+EE"),g=t("ANhT"),f=t("ULAo"),E=t("Q98t"),p=t("mWdr"),I=t("j3ag"),b=t("pHTc"),C=t("bFG1"),P=t("BaYo"),y=t("2CAT"),D=t("fXoL"),O=t("TEn/"),A=t("4JiN"),T=t("ofXK"),x=t("fQ68"),M=t("8/N+"),w=t("nt/U"),N=t("PgjG"),V=t("hMzs"),L=t("3CSS"),k=t("eAud"),S=t("iSJP"),R=t("ACYt"),Q=t("sYmb");function AddonCalendarEventPage_h1_6_Template(e,n){if(1&e&&(D.Ec(0,"h1"),D.zc(1,"core-format-text",13),D.Dc()),2&e){const e=D.Oc();D.lc(1),D.Vc("text",e.event.name)("contextLevel",e.event.contextLevel)("contextInstanceId",e.event.contextInstanceId)}}const _c0=function(e){return{$a:e}};function AddonCalendarEventPage_ion_card_22_Template(e,n){1&e&&(D.Ec(0,"ion-card",14),D.Ec(1,"ion-item"),D.zc(2,"ion-icon",15),D.Ec(3,"ion-label"),D.pd(4),D.Pc(5,"translate"),D.Pc(6,"translate"),D.Dc(),D.Dc(),D.Dc()),2&e&&(D.lc(4),D.qd(D.Rc(5,1,"core.hasdatatosync",D.ad(6,_c0,D.Qc(6,4,"addon.calendar.calendarevent")))))}function AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template(e,n){if(1&e&&D.zc(0,"core-mod-icon",25),2&e){const e=D.Oc(2);D.Vc("modicon",e.event.moduleIcon)("showAlt",!1)("modname",e.event.modulename)("componentId",e.event.instance)}}function AddonCalendarEventPage_ion_list_23_ion_icon_3_Template(e,n){if(1&e&&D.zc(0,"ion-icon",26),2&e){const e=D.Oc(2);D.Vc("name",e.event.eventIcon)}}function AddonCalendarEventPage_ion_list_23_span_8_Template(e,n){if(1&e&&(D.Ec(0,"span",19),D.pd(1),D.Dc()),2&e){const e=D.Oc(2);D.lc(1),D.qd(e.event.iconTitle)}}function AddonCalendarEventPage_ion_list_23_ion_note_17_Template(e,n){1&e&&(D.Ec(0,"ion-note",4),D.zc(1,"ion-icon",27),D.pd(2),D.Pc(3,"translate"),D.Dc()),2&e&&(D.lc(2),D.rd(" ",D.Qc(3,1,"core.deletedoffline")," "))}function AddonCalendarEventPage_ion_list_23_ion_item_26_Template(e,n){if(1&e&&(D.Ec(0,"ion-item",28),D.Ec(1,"ion-label"),D.Ec(2,"h2"),D.pd(3),D.Pc(4,"translate"),D.Dc(),D.Ec(5,"p"),D.zc(6,"core-format-text",29),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.Vc("href",e.courseUrl),D.lc(3),D.qd(D.Qc(4,4,"core.course")),D.lc(3),D.Vc("text",e.courseName)("contextInstanceId",e.courseId)}}function AddonCalendarEventPage_ion_list_23_ion_item_27_Template(e,n){if(1&e&&(D.Ec(0,"ion-item",30),D.Ec(1,"ion-label"),D.Ec(2,"h2"),D.pd(3),D.Pc(4,"translate"),D.Dc(),D.Ec(5,"p"),D.pd(6),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,2,"core.group")),D.lc(3),D.qd(e.groupName)}}function AddonCalendarEventPage_ion_list_23_ion_item_28_Template(e,n){if(1&e&&(D.Ec(0,"ion-item",31),D.Ec(1,"ion-label"),D.Ec(2,"h2"),D.pd(3),D.Pc(4,"translate"),D.Dc(),D.Ec(5,"p"),D.zc(6,"core-format-text",32),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,3,"core.category")),D.lc(3),D.Vc("text",e.categoryPath)("contextInstanceId",e.event.categoryid)}}function AddonCalendarEventPage_ion_list_23_ion_item_29_Template(e,n){if(1&e&&(D.Ec(0,"ion-item",31),D.Ec(1,"ion-label"),D.Ec(2,"h2"),D.pd(3),D.Pc(4,"translate"),D.Dc(),D.Ec(5,"p"),D.zc(6,"core-format-text",13),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,4,"core.description")),D.lc(3),D.Vc("text",e.event.description)("contextLevel",e.event.contextLevel)("contextInstanceId",e.event.contextInstanceId)}}function AddonCalendarEventPage_ion_list_23_ion_item_30_Template(e,n){if(1&e&&(D.Ec(0,"ion-item",31),D.Ec(1,"ion-label"),D.Ec(2,"h2"),D.pd(3),D.Pc(4,"translate"),D.Dc(),D.Ec(5,"p"),D.Ec(6,"a",33),D.zc(7,"core-format-text",13),D.Dc(),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(3),D.qd(D.Qc(4,5,"core.location")),D.lc(3),D.Vc("href",e.event.encodedLocation,D.id),D.lc(1),D.Vc("text",e.event.location)("contextLevel",e.event.contextLevel)("contextInstanceId",e.event.contextInstanceId)}}function AddonCalendarEventPage_ion_list_23_ion_item_31_Template(e,n){if(1&e&&(D.Ec(0,"ion-item"),D.Ec(1,"ion-label"),D.Ec(2,"ion-button",34),D.pd(3),D.Pc(4,"translate"),D.Dc(),D.Dc(),D.Dc()),2&e){const e=D.Oc(2);D.lc(2),D.Vc("href",e.moduleUrl),D.lc(1),D.rd(" ",D.Qc(4,2,"addon.calendar.gotoactivity")," ")}}const _c1=function(e){return[e]};function AddonCalendarEventPage_ion_list_23_Template(e,n){if(1&e&&(D.Ec(0,"ion-list"),D.Ec(1,"ion-item",16),D.nd(2,AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template,1,4,"core-mod-icon",17),D.nd(3,AddonCalendarEventPage_ion_list_23_ion_icon_3_Template,1,1,"ion-icon",18),D.Ec(4,"ion-label"),D.Ec(5,"span",19),D.pd(6),D.Pc(7,"translate"),D.nd(8,AddonCalendarEventPage_ion_list_23_span_8_Template,2,1,"span",20),D.Dc(),D.Ec(9,"h1"),D.zc(10,"core-format-text",13),D.Dc(),D.Dc(),D.Dc(),D.Ec(11,"ion-item"),D.Ec(12,"ion-label"),D.Ec(13,"h2"),D.pd(14),D.Pc(15,"translate"),D.Dc(),D.zc(16,"core-format-text",13),D.Dc(),D.nd(17,AddonCalendarEventPage_ion_list_23_ion_note_17_Template,4,3,"ion-note",21),D.Dc(),D.Ec(18,"ion-item"),D.Ec(19,"ion-label"),D.Ec(20,"h2"),D.pd(21),D.Pc(22,"translate"),D.Dc(),D.Ec(23,"p"),D.pd(24),D.Pc(25,"translate"),D.Dc(),D.Dc(),D.Dc(),D.nd(26,AddonCalendarEventPage_ion_list_23_ion_item_26_Template,7,6,"ion-item",22),D.nd(27,AddonCalendarEventPage_ion_list_23_ion_item_27_Template,7,4,"ion-item",23),D.nd(28,AddonCalendarEventPage_ion_list_23_ion_item_28_Template,7,5,"ion-item",24),D.nd(29,AddonCalendarEventPage_ion_list_23_ion_item_29_Template,7,6,"ion-item",24),D.nd(30,AddonCalendarEventPage_ion_list_23_ion_item_30_Template,8,7,"ion-item",24),D.nd(31,AddonCalendarEventPage_ion_list_23_ion_item_31_Template,5,4,"ion-item",3),D.Dc()),2&e){const e=D.Oc();D.lc(1),D.Vc("ngClass",D.ad(29,_c1,"addon-calendar-eventtype-"+e.event.eventtype)),D.lc(1),D.Vc("ngIf",e.event.moduleIcon),D.lc(1),D.Vc("ngIf",e.event.eventIcon&&!e.event.moduleIcon),D.lc(3),D.rd(" ",D.Qc(7,21,"addon.calendar.type"+e.event.formattedType)," "),D.lc(2),D.Vc("ngIf",e.event.moduleIcon&&e.event.iconTitle),D.lc(2),D.Vc("text",e.event.name)("contextLevel",e.event.contextLevel)("contextInstanceId",e.event.contextInstanceId),D.lc(4),D.qd(D.Qc(15,23,"addon.calendar.when")),D.lc(2),D.Vc("text",e.event.formattedtime)("contextLevel",e.event.contextLevel)("contextInstanceId",e.event.contextInstanceId),D.lc(1),D.Vc("ngIf",e.event.deleted),D.lc(4),D.qd(D.Qc(22,25,"addon.calendar.eventtype")),D.lc(3),D.qd(D.Qc(25,27,"addon.calendar.type"+e.event.formattedType)),D.lc(2),D.Vc("ngIf",e.courseName),D.lc(1),D.Vc("ngIf",e.groupName),D.lc(1),D.Vc("ngIf",e.categoryPath),D.lc(1),D.Vc("ngIf",e.event.description),D.lc(1),D.Vc("ngIf",e.event.location),D.lc(1),D.Vc("ngIf",e.moduleUrl)}}function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template(e,n){if(1&e&&(D.Ec(0,"p"),D.pd(1),D.Dc()),2&e){const e=D.Oc(2).$implicit;D.lc(1),D.qd(e.sublabel)}}function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template(e,n){if(1&e){const e=D.Fc();D.Ec(0,"ion-item",31),D.Ec(1,"ion-label"),D.Ec(2,"p",37),D.pd(3),D.Dc(),D.nd(4,AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template,2,1,"p",3),D.Dc(),D.Ec(5,"ion-button",38),D.Mc("click",(function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template_ion_button_click_5_listener(n){D.fd(e);const t=D.Oc().$implicit;return D.Oc(2).cancelNotification(t.id,n)})),D.Pc(6,"translate"),D.zc(7,"ion-icon",39),D.Dc(),D.Dc()}if(2&e){const e=D.Oc().$implicit,n=D.Oc(2);D.qc("item-dimmed",e.timestamp<=n.currentTime),D.lc(3),D.qd(e.label),D.lc(1),D.Vc("ngIf",e.sublabel),D.lc(1),D.mc("aria-label",D.Qc(6,5,"core.delete"))}}function AddonCalendarEventPage_ion_card_24_ng_container_6_Template(e,n){if(1&e&&(D.Cc(0),D.nd(1,AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template,8,7,"ion-item",36),D.Bc()),2&e){const e=n.$implicit;D.lc(1),D.Vc("ngIf",e.timestamp>0)}}function AddonCalendarEventPage_ion_card_24_ng_container_7_Template(e,n){if(1&e){const e=D.Fc();D.Cc(0),D.Ec(1,"ion-item"),D.Ec(2,"ion-label"),D.Ec(3,"ion-button",40),D.Mc("click",(function AddonCalendarEventPage_ion_card_24_ng_container_7_Template_ion_button_click_3_listener(){D.fd(e);return D.Oc(2).addReminder()})),D.pd(4),D.Pc(5,"translate"),D.Dc(),D.Dc(),D.Dc(),D.Bc()}2&e&&(D.lc(4),D.rd(" ",D.Qc(5,1,"addon.calendar.setnewreminder")," "))}function AddonCalendarEventPage_ion_card_24_Template(e,n){if(1&e&&(D.Ec(0,"ion-card"),D.Ec(1,"ion-item"),D.Ec(2,"ion-label"),D.Ec(3,"h2"),D.pd(4),D.Pc(5,"translate"),D.Dc(),D.Dc(),D.Dc(),D.nd(6,AddonCalendarEventPage_ion_card_24_ng_container_6_Template,2,1,"ng-container",35),D.nd(7,AddonCalendarEventPage_ion_card_24_ng_container_7_Template,6,3,"ng-container",3),D.Dc()),2&e){const e=D.Oc();D.lc(4),D.qd(D.Qc(5,3,"addon.calendar.reminders")),D.lc(2),D.Vc("ngForOf",e.reminders),D.lc(1),D.Vc("ngIf",e.event.timestart>e.currentTime)}}let U=(()=>{class AddonCalendarEventPage{constructor(e){this.route=e,this.eventLoaded=!1,this.courseName="",this.courseUrl="",this.notificationsEnabled=!1,this.moduleUrl="",this.categoryPath="",this.currentTime=-1,this.reminders=[],this.canEdit=!1,this.hasOffline=!1,this.isOnline=!1,this.syncIcon=P.a.ICON_LOADING,this.notificationsEnabled=g.a.isAvailable(),this.siteHomeId=u.b.getCurrentSiteHomeId(),this.currentSiteId=u.b.getCurrentSiteId(),this.canEdit=d.a.canEditEventsInSite(),this.editEventObserver=v.b.on(d.c.EDIT_EVENT_EVENT,(e=>{e&&e.eventId===this.eventId&&(this.eventLoaded=!1,this.refreshEvent(!0,!1))}),this.currentSiteId),this.newEventObserver=v.b.on(d.c.NEW_EVENT_EVENT,(e=>{this.eventId<0&&e&&(e.eventId===this.eventId||e.oldEventId===this.eventId)&&(this.eventId=e.eventId,this.eventLoaded=!1,this.refreshEvent(!0,!1))}),this.currentSiteId),this.syncObserver=v.b.on(s.b.AUTO_SYNCED,this.checkSyncResult.bind(this,!1),this.currentSiteId),this.manualSyncObserver=v.b.on(s.b.MANUAL_SYNCED,this.checkSyncResult.bind(this,!0),this.currentSiteId),this.onlineObserver=I.B.onChange().subscribe((()=>{I.C.run((()=>{this.isOnline=_.a.isOnline()}))})),this.defaultTimeChangedObserver=v.b.on(d.c.DEFAULT_NOTIFICATION_TIME_CHANGED,(()=>{this.loadReminders()}),this.currentSiteId),this.currentTime=E.a.timestamp(),this.updateCurrentTime=window.setInterval((()=>{this.currentTime=E.a.timestamp()}),5e3)}loadReminders(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.notificationsEnabled||!this.event)return;const e=yield d.a.getEventReminders(this.eventId,this.currentSiteId);this.reminders=yield r.b.formatReminders(e,this.event.timestart,this.currentSiteId)}))}ngOnInit(){try{this.eventId=b.a.getRequiredRouteNumberParam("id")}catch(e){return h.a.showErrorModal(e),b.a.back(),void 0}this.syncIcon=P.a.ICON_LOADING,this.fetchEvent()}fetchEvent(e=!1,n=!1){return Object(a.a)(this,void 0,void 0,(function*(){if(this.isOnline=_.a.isOnline(),e){if(yield this.syncEvents(n))return}try{if(this.eventId>=0){const e=yield d.a.getEventById(this.eventId);this.event=yield r.b.formatEventData(e)}try{const e=r.b.formatOfflineEventData(yield l.a.getEvent(this.eventId));this.hasOffline=!0,this.event=Object.assign(this.event||{},e)}catch(e){if(this.hasOffline=!1,this.eventId<0)return h.a.showErrorModal("Event not found."),b.a.back(),void 0}if(!this.event)return;if(this.loadReminders(),this.categoryPath="",this.courseName="",this.courseUrl="",this.moduleUrl="",this.event.moduleIcon){const e=f.a.translateModuleName(this.event.modulename||"");-1===e.indexOf("core.mod_")&&(this.event.modulename=e),this.moduleUrl=this.event.url||""}const e=[],n=this.event,t=this.event.courseid;t!=this.siteHomeId&&this.event.course&&(this.courseId=this.event.course.id,this.courseName=this.event.course.fullname,this.courseUrl=this.event.course.viewurl),t&&this.event.groupid&&e.push(this.loadGroupName(this.event,t)),this.event.iscategoryevent&&this.event.category&&(this.categoryPath=this.event.category.nestedname),this.event.location&&(this.event.location=m.a.decodeHTML(this.event.location),this.event.encodedLocation=m.a.buildAddressURL(this.event.location)),e.push(l.a.isEventDeleted(this.eventId).then((e=>{n.deleted=e}))),e.push(d.a.getCalendarTimeFormat().then((e=>Object(a.a)(this,void 0,void 0,(function*(){n.formattedtime=yield d.a.formatEventTime(n,e)}))))),yield Promise.all(e)}catch(e){h.a.showErrorModalDefault(e,"addon.calendar.errorloadevent",!0)}this.eventLoaded=!0,this.syncIcon=P.a.ICON_SYNC}))}syncEvents(e=!1){return Object(a.a)(this,void 0,void 0,(function*(){let n=!1;try{const e=yield s.a.syncEvents();e.warnings&&e.warnings.length&&h.a.showErrorModal(e.warnings[0]),e.deleted&&-1!=e.deleted.indexOf(this.eventId)?n=!0:this.eventId<0&&e.offlineIdMap[this.eventId]&&(this.eventId=e.offlineIdMap[this.eventId]),e.updated&&(e.source="event",v.b.trigger(s.b.MANUAL_SYNCED,e,this.currentSiteId))}catch(n){e&&h.a.showErrorModalDefault(n,"core.errorsync",!0)}return n}))}loadGroupName(e,n){return Object(a.a)(this,void 0,void 0,(function*(){try{const t=(yield p.a.getUserGroupsInCourse(n)).find((n=>n.id==e.groupid));this.groupName=t?t.name:""}catch(e){this.groupName=""}}))}addReminder(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.event||!this.event.id)return;const e=yield h.a.openModal({component:y.a});void 0!==e&&(yield d.a.addEventReminder(this.event,e,this.currentSiteId),yield this.loadReminders())}))}cancelNotification(e,n){return Object(a.a)(this,void 0,void 0,(function*(){n.preventDefault(),n.stopPropagation();try{yield h.a.showDeleteConfirm();const n=yield h.a.showModalLoading("core.deleting",!0);try{yield d.a.deleteEventReminder(e),yield this.loadReminders()}catch(e){h.a.showErrorModalDefault(e,"Error deleting reminder")}finally{n.dismiss()}}catch(e){}}))}doRefresh(e,n,t=!1){return Object(a.a)(this,void 0,void 0,(function*(){this.eventLoaded&&(yield this.refreshEvent(!0,t).finally((()=>{null==e?void 0:e.complete(),n&&n()})))}))}refreshEvent(e=!1,n=!1){return Object(a.a)(this,void 0,void 0,(function*(){this.syncIcon=P.a.ICON_LOADING;const t=[];this.eventId>0&&t.push(d.a.invalidateEvent(this.eventId)),t.push(d.a.invalidateTimeFormat()),yield C.a.allPromisesIgnoringErrors(t),yield this.fetchEvent(e,n)}))}openEdit(){b.a.navigateToSitePath(`/calendar/edit/${this.eventId}`)}deleteEvent(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.event)return;const e=I.M.instant("addon.calendar.deleteevent"),n={};let t;this.event.eventcount>1?(t=I.M.instant("addon.calendar.confirmeventseriesdelete",{$a:{name:this.event.name,count:this.event.eventcount}}),n.inputs=[{type:"radio",name:"deleteall",checked:!0,value:!1,label:I.M.instant("addon.calendar.deleteoneevent")},{type:"radio",name:"deleteall",checked:!1,value:!0,label:I.M.instant("addon.calendar.deleteallevents")}]):t=I.M.instant("addon.calendar.confirmeventdelete",{$a:this.event.name});let i=!1;try{i=yield h.a.showConfirm(t,e,void 0,void 0,n)}catch(e){return}const o=yield h.a.showModalLoading("core.sending",!0);try{let e=!1;if(this.event.id<0?yield l.a.deleteEvent(this.event.id):e=yield d.a.deleteEvent(this.event.id,this.event.name,i),e)try{yield r.b.refreshAfterChangeEvent(this.event,i?this.event.eventcount:1)}catch(e){}this.event.id<0?v.b.trigger(d.c.NEW_EVENT_DISCARDED_EVENT,{},u.b.getCurrentSiteId()):v.b.trigger(d.c.DELETED_EVENT_EVENT,{eventId:this.eventId,sent:e},u.b.getCurrentSiteId()),e||this.event.id<0?(h.a.showToast("addon.calendar.eventcalendareventdeleted",!0,3e3),b.a.back()):this.event.deleted=!0}catch(e){h.a.showErrorModalDefault(e,"Error deleting event.")}o.dismiss()}))}undoDelete(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.event)return;const e=yield h.a.showModalLoading("core.sending",!0);try{yield l.a.unmarkDeleted(this.event.id),v.b.trigger(d.c.UNDELETED_EVENT_EVENT,{eventId:this.eventId},u.b.getCurrentSiteId()),this.event.deleted=!1}catch(e){h.a.showErrorModalDefault(e,"Error undeleting event.")}e.dismiss()}))}checkSyncResult(e,n){if(n)if(n.deleted&&-1!=n.deleted.indexOf(this.eventId))h.a.showToast("addon.calendar.eventcalendareventdeleted",!0,3e3),b.a.back();else if(n.events&&(!e||"event"!=n.source))if(this.eventId<0)n.offlineIdMap[this.eventId]&&(this.eventId=n.offlineIdMap[this.eventId],this.eventLoaded=!1,this.refreshEvent());else{n.events.find((e=>e.id==this.eventId))&&(this.eventLoaded=!1,this.refreshEvent())}}ngOnDestroy(){this.editEventObserver.off(),this.syncObserver.off(),this.manualSyncObserver.off(),this.onlineObserver.unsubscribe(),this.newEventObserver.off(),clearInterval(this.updateCurrentTime)}}return AddonCalendarEventPage.ɵfac=function AddonCalendarEventPage_Factory(e){return new(e||AddonCalendarEventPage)(D.yc(i.a))},AddonCalendarEventPage.ɵcmp=D.sc({type:AddonCalendarEventPage,selectors:[["page-addon-calendar-event"]],decls:25,vars:34,consts:[["collapsible",""],["slot","start"],[3,"text"],[4,"ngIf"],["slot","end"],[3,"hidden","priority","content","iconAction","closeOnClick","action"],["iconAction","fas-edit",3,"hidden","priority","content","action"],["iconAction","fas-trash",3,"hidden","priority","content","action"],["iconAction","fas-undo-alt",3,"hidden","priority","content","action"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["class","core-warning-card",4,"ngIf"],[3,"text","contextLevel","contextInstanceId"],[1,"core-warning-card"],["name","fas-exclamation-triangle","slot","start","aria-hidden","true"],["collapsible","",1,"ion-text-wrap","addon-calendar-event",3,"ngClass"],["slot","start",3,"modicon","showAlt","modname","componentId",4,"ngIf"],["aria-hidden","true","slot","start",3,"name",4,"ngIf"],[1,"sr-only"],["class","sr-only",4,"ngIf"],["slot","end",4,"ngIf"],["class","ion-text-wrap","core-link","","capture","true",3,"href",4,"ngIf"],["class","ion-text-wrap core-groupname",4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["slot","start",3,"modicon","showAlt","modname","componentId"],["aria-hidden","true","slot","start",3,"name"],["name","fas-trash","aria-hidden","true"],["core-link","","capture","true",1,"ion-text-wrap",3,"href"],["contextLevel","course",3,"text","contextInstanceId"],[1,"ion-text-wrap","core-groupname"],[1,"ion-text-wrap"],["contextLevel","coursecat",3,"text","contextInstanceId"],["core-link","","auto-login","no",3,"href"],["expand","block","core-link","","capture","true",3,"href"],[4,"ngFor","ngForOf"],["class","ion-text-wrap",3,"item-dimmed",4,"ngIf"],[1,"item-heading"],["fill","clear","slot","end",3,"click"],["name","fas-trash","color","danger","slot","icon-only","aria-hidden","true"],["expand","block",3,"click"]],template:function AddonCalendarEventPage_Template(e,n){1&e&&(D.Ec(0,"ion-header",0),D.Ec(1,"ion-toolbar"),D.Ec(2,"ion-buttons",1),D.zc(3,"ion-back-button",2),D.Pc(4,"translate"),D.Dc(),D.Ec(5,"ion-title"),D.nd(6,AddonCalendarEventPage_h1_6_Template,2,3,"h1",3),D.Dc(),D.Ec(7,"ion-buttons",4),D.Ec(8,"core-context-menu"),D.Ec(9,"core-context-menu-item",5),D.Mc("action",(function AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener(e){return n.doRefresh(void 0,e,!0)})),D.Pc(10,"translate"),D.Dc(),D.Ec(11,"core-context-menu-item",6),D.Mc("action",(function AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener(){return n.openEdit()})),D.Pc(12,"translate"),D.Dc(),D.Ec(13,"core-context-menu-item",7),D.Mc("action",(function AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener(){return n.deleteEvent()})),D.Pc(14,"translate"),D.Dc(),D.Ec(15,"core-context-menu-item",8),D.Mc("action",(function AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener(){return n.undoDelete()})),D.Pc(16,"translate"),D.Dc(),D.Dc(),D.Dc(),D.Dc(),D.Dc(),D.Ec(17,"ion-content"),D.Ec(18,"ion-refresher",9),D.Mc("ionRefresh",(function AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener(e){return n.doRefresh(e.target)})),D.zc(19,"ion-refresher-content",10),D.Pc(20,"translate"),D.Dc(),D.Ec(21,"core-loading",11),D.nd(22,AddonCalendarEventPage_ion_card_22_Template,7,8,"ion-card",12),D.nd(23,AddonCalendarEventPage_ion_list_23_Template,32,31,"ion-list",3),D.nd(24,AddonCalendarEventPage_ion_card_24_Template,8,5,"ion-card",3),D.Dc(),D.Dc()),2&e&&(D.lc(3),D.Vc("text",D.Qc(4,22,"core.back")),D.lc(3),D.Vc("ngIf",n.event),D.lc(3),D.Vc("hidden",!n.eventLoaded||!n.hasOffline&&n.event&&!n.event.deleted||!n.isOnline)("priority",400)("content",D.Qc(10,24,"core.settings.synchronizenow"))("iconAction",n.syncIcon)("closeOnClick",!1),D.lc(2),D.Vc("hidden",!n.event||!n.event.canedit||n.event.deleted||!n.canEdit&&n.event.id>0)("priority",300)("content",D.Qc(12,26,"core.edit")),D.lc(2),D.Vc("hidden",!n.event||!n.event.candelete||n.event.deleted)("priority",200)("content",D.Qc(14,28,"core.delete")),D.lc(2),D.Vc("hidden",!n.event||!n.event.deleted)("priority",200)("content",D.Qc(16,30,"core.restore")),D.lc(3),D.Vc("disabled",!n.eventLoaded),D.lc(1),D.Wc("pullingText",D.Qc(20,32,"core.pulltorefresh")),D.lc(2),D.Vc("hideUntil",n.eventLoaded),D.lc(1),D.Vc("ngIf",n.hasOffline||n.event&&n.event.deleted),D.lc(1),D.Vc("ngIf",n.event),D.lc(1),D.Vc("ngIf",n.notificationsEnabled&&n.event))},directives:[O.C,A.b,O.Ab,O.m,O.h,O.i,O.yb,T.t,x.a,M.a,w.a,O.v,O.bb,O.cb,N.a,V.a,O.n,O.I,O.D,L.a,O.O,O.P,T.q,k.a,O.W,S.a,R.a,O.l,T.s],pipes:[Q.d],styles:["[_nghost-%COMP%]{--addon-calendar-blank-day-background-color:var(--light)}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:.7rem;--margin-vertical:12px;--margin-end:12px;margin-top:var(--margin-vertical);margin-bottom:var(--margin-vertical);margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#8e24aa}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#ca3120}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#f0ad4e}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#0f6cbf}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#357a32}","[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1.6rem}"]}),AddonCalendarEventPage})();const q=[{path:"",component:U}];let z=(()=>{class AddonCalendarEventPageModule{}return AddonCalendarEventPageModule.ɵmod=D.wc({type:AddonCalendarEventPageModule}),AddonCalendarEventPageModule.ɵinj=D.vc({factory:function AddonCalendarEventPageModule_Factory(e){return new(e||AddonCalendarEventPageModule)},imports:[[i.m.forChild(q),o.a,c.a],i.m]}),AddonCalendarEventPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&D.kd(z,{declarations:[U],imports:[i.m,o.a,c.a],exports:[i.m]}))}}]);