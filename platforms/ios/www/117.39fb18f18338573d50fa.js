(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{ZmPN:function(e,t,r){"use strict";r.r(t),r.d(t,"CoreSitePreferencesPageModule",(function(){return M}));var i=r("fXoL"),n=r("tyNb"),c=r("L3Fv"),s=r("mrSG"),o=r("fjkH"),a=r("9+EE"),l=r("pHTc"),d=r("46ml"),u=r("EoRH"),f=r("baaQ"),h=r("CvRw"),g=r("YEzr");class settings_handlers_source_CoreSettingsHandlersSource extends h.a{loadPageItems(){return Object(s.a)(this,void 0,void 0,(function*(){return{items:g.a.getHandlers()}}))}getItemPath(e){return e.page}getItemQueryParams(e){return e.params||{}}}var P=r("1gmh"),p=r("3LXp"),m=r("TEn/"),_=r("nt/U"),b=r("PgjG"),S=r("ofXK"),y=r("3zv0"),C=r("ACYt"),D=r("3CSS"),v=r("sYmb");function CoreSitePreferencesPage_ion_item_17_ion_icon_2_Template(e,t){if(1&e&&i.zc(0,"ion-icon",14),2&e){const e=i.Oc().$implicit;i.Vc("name",e.icon)}}const _c0=function(e){return["core-settings-handler",e]};function CoreSitePreferencesPage_ion_item_17_Template(e,t){if(1&e){const e=i.Fc();i.Ec(0,"ion-item",12),i.Mc("click",(function CoreSitePreferencesPage_ion_item_17_Template_ion_item_click_0_listener(){i.fd(e);const r=t.$implicit;return i.Oc().handlers.select(r)})),i.Pc(1,"translate"),i.nd(2,CoreSitePreferencesPage_ion_item_17_ion_icon_2_Template,1,1,"ion-icon",13),i.Ec(3,"ion-label"),i.Ec(4,"p",8),i.pd(5),i.Pc(6,"translate"),i.Dc(),i.Dc(),i.Dc()}if(2&e){const e=t.$implicit,r=i.Oc();i.Vc("ngClass",i.ad(9,_c0,e.class)),i.mc("aria-label",i.Qc(1,5,e.title))("aria-current",r.handlers.getItemAriaCurrent(e)),i.lc(2),i.Vc("ngIf",e.icon),i.lc(3),i.qd(i.Qc(6,7,e.title))}}let E=(()=>{class CoreSitePreferencesPage{constructor(){this.isDestroyed=!1,this.siteId=a.b.getCurrentSiteId();const e=f.a.getOrCreateSource(settings_handlers_source_CoreSettingsHandlersSource,[]);this.handlers=new u.a(e,CoreSitePreferencesPage),this.sitesObserver=o.b.on(o.b.SITE_UPDATED,(()=>{this.refreshData()}),this.siteId)}ngAfterViewInit(){return Object(s.a)(this,void 0,void 0,(function*(){const e=l.a.getRouteParam("page");try{yield this.fetchData()}finally{const t=e?this.handlers.items.find((t=>t.page==e)):void 0;t?(this.handlers.watchSplitViewOutlet(this.splitView),yield this.handlers.select(t)):yield this.handlers.start(this.splitView)}}))}fetchData(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.handlers.load()}))}synchronize(){return Object(s.a)(this,void 0,void 0,(function*(){try{yield P.a.synchronizeSite(!1,this.siteId)}catch(e){if(this.isDestroyed)return;p.a.showErrorModalDefault(e,"core.settings.errorsyncsite",!0)}}))}isSynchronizing(){return!!P.a.getSiteSyncPromise(this.siteId)}refreshData(e){this.handlers.getSource().setDirty(!0),this.fetchData().finally((()=>{null==e?void 0:e.complete()}))}ngOnDestroy(){var e;this.isDestroyed=!0,null===(e=this.sitesObserver)||void 0===e||e.off(),this.handlers.destroy()}}return CoreSitePreferencesPage.ɵfac=function CoreSitePreferencesPage_Factory(e){return new(e||CoreSitePreferencesPage)},CoreSitePreferencesPage.ɵcmp=i.sc({type:CoreSitePreferencesPage,selectors:[["page-core-site-preferences"]],viewQuery:function CoreSitePreferencesPage_Query(e,t){var r;(1&e&&i.ud(d.a,!0),2&e)&&(i.dd(r=i.Nc())&&(t.splitView=r.first))},decls:31,vars:22,consts:[["slot","start"],[3,"text"],["slot","end"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["detail","true","button","",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],[1,"item-heading"],["slot","end",3,"loading"],["fill","clear",3,"click"],["name","fas-sync-alt","slot","icon-only","aria-hidden","true"],["detail","true","button","",3,"ngClass","click"],["slot","start","aria-hidden","true",3,"name",4,"ngIf"],["slot","start","aria-hidden","true",3,"name"]],template:function CoreSitePreferencesPage_Template(e,t){1&e&&(i.Ec(0,"ion-header"),i.Ec(1,"ion-toolbar"),i.Ec(2,"ion-buttons",0),i.zc(3,"ion-back-button",1),i.Pc(4,"translate"),i.Dc(),i.Ec(5,"ion-title"),i.Ec(6,"h1"),i.pd(7),i.Pc(8,"translate"),i.Dc(),i.Dc(),i.zc(9,"ion-buttons",2),i.Dc(),i.Dc(),i.Ec(10,"ion-content"),i.Ec(11,"core-split-view"),i.Ec(12,"ion-refresher",3),i.Mc("ionRefresh",(function CoreSitePreferencesPage_Template_ion_refresher_ionRefresh_12_listener(e){return t.refreshData(e.target)})),i.zc(13,"ion-refresher-content",4),i.Pc(14,"translate"),i.Dc(),i.Ec(15,"core-loading",5),i.Ec(16,"ion-list"),i.nd(17,CoreSitePreferencesPage_ion_item_17_Template,7,11,"ion-item",6),i.Dc(),i.Ec(18,"ion-card"),i.Ec(19,"ion-item",7),i.Ec(20,"ion-label"),i.Ec(21,"p",8),i.pd(22),i.Pc(23,"translate"),i.Dc(),i.Ec(24,"p"),i.pd(25),i.Pc(26,"translate"),i.Dc(),i.Dc(),i.Ec(27,"core-button-with-spinner",9),i.Ec(28,"ion-button",10),i.Mc("click",(function CoreSitePreferencesPage_Template_ion_button_click_28_listener(){return t.synchronize()})),i.Pc(29,"translate"),i.zc(30,"ion-icon",11),i.Dc(),i.Dc(),i.Dc(),i.Dc(),i.Dc(),i.Dc(),i.Dc()),2&e&&(i.lc(3),i.Vc("text",i.Qc(4,10,"core.back")),i.lc(4),i.qd(i.Qc(8,12,"core.settings.preferences")),i.lc(5),i.Vc("disabled",!t.handlers.loaded),i.lc(1),i.Wc("pullingText",i.Qc(14,14,"core.pulltorefresh")),i.lc(2),i.Vc("hideUntil",t.handlers.loaded),i.lc(2),i.Vc("ngForOf",t.handlers.items),i.lc(5),i.qd(i.Qc(23,16,"core.settings.synchronizenow")),i.lc(3),i.rd(" ",i.Qc(26,18,"core.settings.synchronizenowhelp")," "),i.lc(2),i.Vc("loading",t.isSynchronizing()),i.lc(1),i.mc("aria-label",i.Qc(29,20,"core.settings.synchronizenow")))},directives:[m.C,m.Ab,m.m,m.h,m.i,m.yb,_.a,m.v,d.a,m.bb,m.cb,b.a,m.P,S.s,m.n,m.I,m.O,y.a,C.a,m.l,m.D,D.a,S.q,S.t],pipes:[v.d],encapsulation:2}),CoreSitePreferencesPage})();var w=r("vY5A"),O=r("X9cG"),z=r("Y+03");function buildRoutes(e){const t=Object(w.d)(e,O.b),r=[{path:"",component:E},...t.siblings],i=[{path:"",component:E,children:t.siblings}];return[...Object(w.c)(r,(()=>z.a.isMobile)),...Object(w.c)(i,(()=>z.a.isTablet))]}let M=(()=>{class CoreSitePreferencesPageModule{}return CoreSitePreferencesPageModule.ɵmod=i.wc({type:CoreSitePreferencesPageModule}),CoreSitePreferencesPageModule.ɵinj=i.vc({factory:function CoreSitePreferencesPageModule_Factory(e){return new(e||CoreSitePreferencesPageModule)},providers:[{provide:n.g,multi:!0,useFactory:buildRoutes,deps:[i.x]}],imports:[[c.a],n.m]}),CoreSitePreferencesPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&i.kd(M,{declarations:[E],imports:[c.a],exports:[n.m]}))}}]);